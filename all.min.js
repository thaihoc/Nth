;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['jquery','moment'],factory);}else{factory(jQuery,moment);}})(function($,moment){$.extend({getElement:function(e){if(typeof e==='string'||e instanceof window.Element){return $(e);}else if(e instanceof $){return e;}else{return $();}}});$.fn.scrollbarWidth=function(){var e=$.getElement(this);if(!e.length){return 0;}
var $div=$('<div/>',{id:'nth_check_scrollbar_width'}).css({float:'left',width:'100%'});e.append($div);var scrollbarWidth=e.width()-$div.width();$div.remove();return scrollbarWidth;}
if(typeof console==='undefined'){console={log:function(){},warn:function(){}}}
moment.fn.isToday=function(){var dt=new Date();return this.year()===dt.getFullYear()&&this.date()===dt.getDate();}
var Nth={}
Nth.Dom={}
Nth.File={}
Nth.Filter=function(){}
Nth.Filter.Word={}
Nth.FormBuilder={}
Nth.FormBuilder.Element={}
Nth.Helper={}
Nth.Validator=function(){};(function(Nth){'use strict';Nth.Nth=function(){this.versionCompare=function(v1,v2){var r=0;v1=(v1+'').split('.');v2=(v2+'').split('.');for(var i=0;i<v1.length;i++){var v1i=Number(v1[i]||0);var v2i=Number(v2[i]||0);if(v1i>v2i){r=1;break;}else if(v1i===v2i){r=0;}else{r=-1;break;}}
return r;}}})(Nth);window.Nth=Nth;return Nth;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth'],factory);}else{factory(Nth);}})(function(Nth){var Browser=function(ua){this.userAgent=ua;this.name=null;this.version=null;this.analyze();}
Browser.prototype.setUserAgent=function(ua){this.userAgent=ua;return this;}
Browser.prototype.analyze=function(){if(!this.userAgent){this.userAgent=navigator.userAgent;}
var matches=this.userAgent.match(/MSIE\s(\d)+/);if(matches){this.name=Nth.Browser.IE;this.version=matches[1]||null;}
return this;}
Browser.prototype.getName=function(){return this.name;}
Browser.prototype.getVersion=function(){return this.version;}
Browser.prototype.isIE=function(){return this.name===Nth.Browser.IE;}
Browser.prototype.isChrome=function(){return this.name===Nth.Browser.CHROME;}
Browser.prototype.isFirefox=function(){return this.name===Nth.Browser.FIREFOX;}
Browser.IE='Internet Explorer';Browser.CHROME='Google Chrome';Browser.FIREFOX='Mozilla Firefox';Nth.Browser=Browser;return Browser;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','bootstrap'],factory);}else{factory(Nth);}})(function(Nth){var Alert=function(message,callback){if($('#alertModal').length){return;}
var $modal=$('<div/>',{'class':"modal fade",'id':"alertModal",'tabindex':"-1",'role':"dialog",'aria-labelledby':"alertModalLabel"});var $dialog=$('<div/>',{'class':"modal-dialog modal-sm",'role':"document"});var $content=$('<div/>',{'class':'modal-content'});var $header=$('<div/>',{'class':'modal-header'});var $dismiss=$('<button/>',{type:"button",'class':"close",'aria-label':"Close"}).html('<span aria-hidden="true">&times;</span>');var $title=$('<h4/>',{'class':"modal-title",'id':"alertModalLabel"}).html('Thông báo');$header.append($dismiss,$title);var $body=$('<div/>',{'class':'modal-body'}).html(message);var $footer=$('<div/>',{'class':'modal-footer'});var $ok=$('<button/>',{type:"button",'class':"btn btn-primary"}).html('Đồng ý');$ok.on('click',function(){$modal.modal('hide');});$footer.append($ok);$content.append($header,$body,$footer);$modal.append($dialog.append($content));$('body').append($modal.modal());$modal.on('shown.bs.modal',function(){$ok.focus();});$modal.on('hidden.bs.modal',function(){$modal.remove();if(typeof callback==='function'){callback();}});return $modal;}
Nth.Alert=Alert;return Alert;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Options'],factory);}else{factory(Nth);}})(function(Nth){var AsyncTaskManager=function(option){var setting=new Nth.Options($.extend({},{debug:false,auto:true},option));this.list=[];this.executing=false;this.add=function(obj,method,args,id,debug){var process=[obj,method,args,id,debug];this.list.push(process);if(setting.getOption('debug')||debug){console.log('add process: ');this.debug(process);}
if(setting.getOption('auto')){this.execute();}
return this;}
this.done=function(result){var process=this.current();this.executing=false;if(setting.getOption('debug')||process[4]){console.log('process done: ');if(result){console.log(result);}
this.debug(process);}
this.list.splice(0,1);if(setting.getOption('auto')){this.next();}
return this;}
this.current=function(){return this.list[0];}
this.execute=function(){if(!this.executing){this.executing=true;var process=this.current();process[1].apply(process[0],process[2]);}
return this;}
this.count=function(){return this.list.length;}
this.next=function(){if(this.count()){this.execute();return true;}
return false;}
this.debug=function(process){var id=process[3]||'';console.log('- id: %s',id);console.log('----------------------------');}}
Nth.AsyncTaskManager=AsyncTaskManager;return AsyncTaskManager;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','bootstrap'],factory);}else{factory(Nth);}})(function(Nth){var Confirm=function(message,callback){var choosed=Confirm.CLOSE;var $modal=$('<div/>',{'class':"modal fade",'id':"confirmModal",'tabindex':"-1",'role':"dialog",'aria-labelledby':"confirmModalLabel"});var $dialog=$('<div/>',{'class':"modal-dialog modal-sm",'role':"document"});var $content=$('<div/>',{'class':'modal-content'});var $header=$('<div/>',{'class':'modal-header'});var $dismiss=$('<button/>',{type:"button",'class':"close",'aria-label':"Close"}).html('<span aria-hidden="true">&times;</span>');$dismiss.on('click',function(){$modal.modal('hide');});var $title=$('<h4/>',{'class':"modal-title",'id':"confirmModalLabel"}).html('Xác nhận');$header.append($dismiss,$title);var $body=$('<div/>',{'class':'modal-body'}).html(message);var $footer=$('<div/>',{'class':'modal-footer'});var $dismiss2=$('<button/>',{type:"button",'class':"btn btn-default"}).html('Đóng lại');$dismiss2.on('click',function(){choosed=Confirm.CANCEL;$modal.modal('hide');});var $ok=$('<button/>',{type:"button",'class':"btn btn-primary"}).html('Đồng ý');$ok.on('click',function(){choosed=Confirm.OK;$modal.modal('hide');});$footer.append($dismiss2,$ok);$content.append($header,$body,$footer);$modal.append($dialog.append($content));$('body').append($modal.modal());$modal.on('shown.bs.modal',function(){$dismiss2.focus();});$modal.on('hidden.bs.modal',function(){$modal.remove();if(typeof callback==='function'){callback(choosed);}});return $modal;}
Confirm.OK=1;Confirm.CANCEL=0;Confirm.CLOSE=-1;Nth.Confirm=Confirm;return Confirm;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth'],factory);}else{factory(Nth);}})(function(Nth){var Options=function(options){if(!$.isPlainObject(options)){options={};}
this.setOptions(options);}
Options.prototype.getOptions=function(){return this.options;}
Options.prototype.setOptions=function(options){if(!$.isPlainObject(options)){throw'The type of "options" argument must be plain object';}
this.options=options;return this;}
Options.prototype.getOption=function(name,def){if(def===undefined){def=null;}
return this.existsOption(name)?this.options[name]:def;}
Options.prototype.setOption=function(name,value){this.options[name]=value;return this;}
Options.prototype.mergeOptions=function(options,recursive){this.options=$.extend(recursive===undefined?{}:recursive,this.getOptions(),options);return this;}
Options.prototype.existsOption=function(name){return this.options[name]!==undefined;}
Options.prototype.removeOption=function(name){if(this.existsOption(name)){delete this.options[name];}
return this;}
Options.prototype.cloneOptions=function(){return $.extend(true,{},this.getOptions());}
Nth.Options=Options;return Options;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth'],factory);}else{factory(Nth)}})(function(Nth){var ReflectionClass=function(name){this.name=name;}
ReflectionClass.prototype.getName=function(){return this.name;}
ReflectionClass.prototype.getShortName=function(){var arr=this.name.split('.');return arr[arr.length-1];}
ReflectionClass.prototype.getNamespaceName=function(){var arr=this.name.split('.');arr.splice(arr.length-1,1);return arr.join('.');}
ReflectionClass.prototype.inNamespace=function(){return!!this.getNamespaceName();}
ReflectionClass.prototype.getClass=function(){var cls=window;$.each(this.name.split('.'),function(i,chain){cls=cls[chain];});return cls;}
ReflectionClass.prototype.exists=function(){try{var cls=this.getClass();return typeof cls==='function';}catch(e){return false;}}
Nth.ReflectionClass=ReflectionClass;return ReflectionClass;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Options'],factory);}else{factory(Nth);}})(function(Nth){var Filter=function(){}
Filter.prototype.constructor=Filter;Filter.prototype.__CLASS__='Nth.Filter';Filter.prototype.setElement=function(element){this.element=element;return this;}
Filter.prototype.getElement=function(){return this.element;}
Filter.prototype.onHook=function(){return this;}
Filter.prototype.onUnhook=function(){return this;}
Filter.prototype.toJson=function(){return{name:this.__CLASS__,options:this.cloneOptions()}}
Nth.Filter=Filter;return Filter;});;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Options'],factory);}else{factory(Nth);}})(function(Nth){var Validator=function(options){Nth.Options.call(this,{retypeText:'Vui lòng nhập {0}',reselectText:'Vui lòng chọn {0}',notRight:'{0} không đúng',valueTooSmall:'{0} phải lớn hơn hoặc bằng {1}',valueTooLarge:'{0} phải nhỏ hơn hoặc bằng {1}'});this.mergeOptions(options);}
Validator.prototype=Object.create(Nth.Options.prototype);Validator.prototype.constructor=Validator;Validator.prototype.__CLASS__='Nth.Validator';Validator.prototype.setMessage=function(message){this.message=message;return this;}
Validator.prototype.getMessage=function(){return this.message;}
Validator.prototype.setElement=function(element){this.element=element;return this;}
Validator.prototype.getElement=function(){return this.element;}
Validator.prototype.isValid=function(){return true;}
Validator.prototype.onHook=function(){return this;}
Validator.prototype.onUnhook=function(){return this;}
Validator.prototype.toJson=function(){return{name:this.__CLASS__,options:this.cloneOptions()}}
Validator.__getInstance=function(){if(!(Validator.__instance instanceof Validator)){Validator.__instance=new Validator();}
return Validator.__instance;}
Nth.Validator=Validator;return Validator;});;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','moment','Nth/Helper/String'],factory);}else{factory(Nth,moment);}})(function(Nth,moment){var DateTime=function(dateTime){if(typeof dateTime==='undefined'){dateTime=new Date();}
this.setDateTime(dateTime);}
DateTime.prototype.__CLASS__='Nth.DateTime';DateTime.prototype.getDateTime=function(){return this.dateTime;}
DateTime.prototype.setDateTime=function(dateTime){if(!(dateTime instanceof Date)){throw'dateTime argument must be an instance of Date function';}
this.dateTime=dateTime;return this;}
DateTime.prototype.clarification=function(){var date=this.toObject(true);var now=(new DateTime()).toObject();var diff=null;var result='';now.i=parseInt(now.i);date.i=parseInt(date.i);diff=now.Y-date.Y;if(diff===0){diff=now.n-date.n;if(diff===0){diff=now.j-date.j;if(diff===0){diff=now.G-date.G;if(diff===0){diff=now.i-date.i;if(diff===0){result='Mới đây';}else if(diff>0){result=diff+' phút trước';}else if(diff<0){result=Math.abs(diff)+' phút sau';}}else if(diff>0){if(diff===1){diff=now.i+60-date.i
if(diff<60){result=diff+' phút trước';}else{result='1 giờ trước';}}else{result=diff+' giờ trước';}}else if(diff<0){result=Math.abs(diff)+' giờ sau';}}else if(diff>0){if(diff===1){result='Hôm qua';}else if(diff===2){result='Hôm kia';}else{result=diff+' ngày trước';}}else if(diff<0){diff=Math.abs(diff);if(diff===1){result='Ngày mai';}else if(diff===2){result='Ngày mốt';}else{result=diff+' ngày sau';}}}else if(diff>0){if(diff===1){diff=now.j+DateTime.daysInMonth(date.n,date.Y)-date.j;if(diff<28){if(diff===1){result='Hôm qua';}else if(diff===2){result='Hôm kia';}else{result=diff+' ngày trước';}}else{result='1 tháng trước';}}else{result=diff+' tháng trước';}}else if(diff<0){result=Math.abs(diff)+' tháng sau';}}else if(diff>0){if(diff===1){diff=now.n+12-date.n;if(diff<12){result=diff+' tháng trước';}else{result='1 năm trước';}}else{result=diff+' năm trước';}}else if(diff<0){result=Math.abs(diff)+' năm sau';}
return result;}
DateTime.prototype.isToday=function(){var now=new Date();var dt=this.getDateTime();now=new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,0,0);dt=new Date(dt.getFullYear(),dt.getMonth(),dt.getDate(),0,0,0);return now.getTime()==dt.getTime();}
DateTime.prototype.isYesterday=function(){var now=new Date();var dt=this.getDateTime();now.setDate(now.getDate()-1);now=new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,0,0);dt=new Date(dt.getFullYear(),dt.getMonth(),dt.getDate(),0,0,0);return now.getTime()==dt.getTime();}
DateTime.prototype.compare=function(dt){if(!(dt instanceof DateTime)){throw'The argument was passed must be an instance of DateTime class';}
var t1=this.getDateTime().getTime();var t2=dt.getDateTime().getTime();if(t1===t2){return 0;}else if(t1>t2){return 1;}
return-1;}
DateTime.prototype.toObject=function(interpolate){var dt=this.getDateTime();var translator=DateTime.translator;var date=dt.getDate();var day=dt.getDay();var fullyear=dt.getFullYear();var hours=dt.getHours();var milliseconds=dt.getMilliseconds();var minutes=dt.getMinutes();var month=dt.getMonth();var seconds=dt.getSeconds();var time=dt.getTime();var fo={};fo.d=date<10?'0'+date:date;fo.D=translator.day[day];fo.j=date;fo.l=translator.dayFull[day];fo.L=translator.dayFull[day].toLowerCase();fo.N=day+1;fo.S=DateTime.getDayOrdinalSuffix(fo.j);fo.w=day;fo.z=null;fo.W=null;fo.F=translator.monthFull[month];fo.n=month+1;fo.m=fo.n<10?'0'+fo.n:fo.n;fo.M=translator.month[month];fo.t=null;fo.L=null;fo.o=fullyear;fo.Y=fullyear;fo.y=fullyear.toString().substr(-2,2);fo.a=hours>0&&hours<13?'am':'pm';fo.A=fo.a=='am'?'AM':'PM';fo.B=null;fo.g=hours===12||hours===0?12:hours%12;fo.G=hours;fo.h=fo.g<10?'0'+fo.g:fo.g;fo.H=fo.G<10?'0'+fo.G:fo.G;fo.i=minutes<10?'0'+minutes:minutes;fo.s=seconds<10?'0'+seconds:seconds;fo.u=milliseconds;fo.e=null;fo.I=null;fo.O=null;fo.P=null;fo.T=null;fo.Z=null;fo.c=null;fo.r=null;fo.U=time;if(interpolate){return DateTime.interpolate(fo);}
return fo;}
DateTime.prototype.toString=function(format){if(typeof format!=='string'){format='d/m/Y H:i:s';}
var result='';var fo=this.toObject()
for(var i=0;i<format.length;i++){var j=format.indexOf(format[i]);if(format[j-1]!='\\'&&typeof fo[format[i]]!=='undefined'){result+=fo[format[i]];}else{result+=format[i];}}
return result;}
DateTime.formatOffsets=['d','D','j','l','N','S','w','z','W','F','n','m','M','t','L','o','Y','y','a','A','B','g','G','h','H','i','s','u','e','I','O','P','T','Z','c','r','U']
DateTime.translator={day:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],dayFull:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],month:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],monthFull:['January','February','March','April','May','June','July','August','September','October','November','December']}
DateTime.getDayOrdinalSuffix=function(j){switch(j){case 1||21||31:return'st';case 2||22:return'nd';case 3||23:return'rd';default:return'th';}}
DateTime.isLeapYear=function(Y){if(Y%4==0){if(Y%100==0){return Y%400==0?1:0;}
return 1;}
return 0;}
DateTime.daysInMonth=function(n,Y){var t=0;if([1,3,5,7,8,10,12].indexOf(n)>-1){t=31;}else if([4,6,9,11].indexOf(n)>-1){t=30;}else if(n==2){this.isLeapYear(Y)?t=29:t=28;}
return t;}
DateTime.interpolate=function(fo){var strHelper=new Nth.Helper.String();var formatOffsets=DateTime.formatOffsets;var translator=DateTime.translator;var saturated=false;var weHave=[];var weDontHave=[];if(typeof fo=='object'){for(var i=0,len=formatOffsets.length;i<len;i++){var f=formatOffsets[i];(typeof fo[f]=='undefined'||fo[f]==null)?weDontHave.push(f):weHave.push(f);}}
while(weHave.length&&weDontHave.length&&!saturated){var firstLength=weHave.length;for(var i=0;i<weDontHave.length;i++){if(weDontHave[i]=='d'){if(weHave.indexOf('j')>-1){fo.d=parseInt(fo.j)<10?'0'+fo.j:fo.j;weHave.push('d');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='D'){if(weHave.indexOf('l')>-1){fo.D=fo.l.substr(0,3);weHave.push('D');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('L')>-1){fo.D=strHelper.setString(fo.L.substr(0,3)).ucfirst().getString();weHave.push('D');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('N')>-1){fo.D=translator.day[fo.N===7?0:fo.N];weHave.push('D');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='j'){if(weHave.indexOf('d')>-1){fo.j=parseInt(fo.d);weHave.push('j');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='l'){if(weHave.indexOf('D')>-1){var idx=translator.day.indexOf(fo.D);fo.l=translator.dayFull[idx];weHave.push('l');weDontHave.splice(i,1);break;}
if(weHave.indexOf('L')>-1){fo.l=strHelper.setString(fo.L).ucfirst().getString();weHave.push('l');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='L'){if(weHave.indexOf('D')>-1){var idx=translator.day.indexOf(fo.D);fo.L=translator.dayFull[idx].toLowerCase();weHave.push('L');weDontHave.splice(i,1);break;}
if(weHave.indexOf('l')>-1){fo.L=fo.l.toLowerCase();weHave.push('L');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='N'){if(weHave.indexOf('D')>-1){var idx=translator.day.indexOf(fo.D)
idx===0?fo.N=7:fo.N=idx;weHave.push('N');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('l')>-1){var idx=translator.dayFull.indexOf(fo.l)
idx===0?fo.N=7:fo.N=idx;weHave.push('N');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('L')>-1){var idx=translator.dayFull.indexOf(strHelper.setString(fo.L).ucfirst().getString())
idx===0?fo.N=7:fo.N=idx;weHave.push('N');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='S'){if(weHave.indexOf('j')>-1){fo.S=DateTime.getDayOrdinalSuffix(fo.j);weHave.push('S');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('d')>-1){fo.S=DateTime.getDayOrdinalSuffix(parseInt(fo.d));weHave.push('S');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='w'){if(weHave.indexOf('N')>-1){fo.w=fo.N===7?0:fo.N;weHave.push('w');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('D')>-1){fo.w=translator.day.indexOf(fo.D);weHave.push('w');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('l')>-1){fo.w=translator.dayFull.indexOf(fo.l);weHave.push('w');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('L')>-1){fo.w=translator.dayFull.indexOf(strHelper.setString(fo.L).ucfirst().getString());weHave.push('w');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='z'){if(weHave.indexOf('j')>-1&&weHave.indexOf('n')>-1&&weHave.indexOf('Y')>-1){var z=fo.j,n=fo.n;while(n>1){z+=DateTime.daysInMonth(n,fo.Y);n--;}
fo.z=z;weHave.push('z');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='W'){if(weHave.indexOf('z')>-1){fo.W=Math.ceil(fo.z/7);weHave.push('W');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='F'){if(weHave.indexOf('m')>-1){fo.F=translator.monthFull[parseInt(fo.m)-1]
weHave.push('F');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('M')>-1){var w=translator.month.indexOf(fo.M);fo.F=translator.monthFull[w]
weHave.push('F');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('n')>-1){fo.F=translator.monthFull[fo.n-1]
weHave.push('F');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='m'){if(weHave.indexOf('F')>-1){var n=translator.monthFull.indexOf(fo.F)+1;fo.m=n>10?n:'0'+n;weHave.push('m');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('M')>-1){var n=translator.month.indexOf(fo.M)+1;fo.m=n>10?n:'0'+n;weHave.push('m');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('n')>-1){;fo.m=fo.n>10?fo.n:'0'+fo.n;weHave.push('m');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='M'){if(weHave.indexOf('F')>-1){var idx=translator.monthFull.indexOf(fo.F);fo.M=translator.month[idx];weHave.push('M');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('m')>-1){fo.M=translator.month[parseInt(fo.m)-1];weHave.push('m');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('n')>-1){fo.M=translator.month[fo.n-1];weHave.push('m');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='n'){if(weHave.indexOf('F')>-1){fo.n=translator.monthFull.indexOf(fo.F)+1;weHave.push('n');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('m')>-1){fo.n=parseInt(fo.m);weHave.push('n');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('M')>-1){fo.n=translator.month.indexOf(fo.M)+1;weHave.push('n');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='t'){if(weHave.indexOf('F')>-1&&weHave.indexOf('Y')>-1){var n=translator.monthFull.indexOf(fo.F)+1;fo.t=DateTime.daysInMonth(n,fo.Y);weHave.push('t');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('m')>-1&&weHave.indexOf('Y')>-1){var n=parseInt(fo.m);fo.t=DateTime.daysInMonth(n,fo.Y);weHave.push('t');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('M')>-1&&weHave.indexOf('Y')>-1){var n=translator.month.indexOf(fo.M)+1;fo.t=DateTime.daysInMonth(n,fo.Y);weHave.push('t');weDontHave.splice(i,1);break;}
else if(weHave.indexOf('n')>-1&&weHave.indexOf('Y')>-1){fo.t=DateTime.daysInMonth(fo.n,fo.Y);weHave.push('t');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='L'){if(weHave.indexOf('Y')>-1){fo.L=DateTime.isLeapYear(fo.Y);weHave.push('L');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='y'){if(weHave.indexOf('Y')>-1){fo.y=fo.Y.toString().substr(2,2)
weHave.push('y');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='a'){if(weHave.indexOf('A')>-1){fo.a=fo.A.toLowerCase();weHave.push('a');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='A'){if(weHave.indexOf('a')>-1){fo.A=fo.a.toUpperCase();weHave.push('A');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='g'){if(weHave.indexOf('h')>-1){fo.g=parseInt(fo.h);weHave.push('g');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='G'){if(weHave.indexOf('H')>-1){fo.G=parseInt(fo.H);weHave.push('G');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='h'){if(weHave.indexOf('g')>-1){fo.h=fo.g>10?fo.g:'0'+fo.g;weHave.push('h');weDontHave.splice(i,1);break;}}else if(weDontHave[i]=='H'){if(weHave.indexOf('G')>-1){fo.H=fo.G>10?fo.G:'0'+fo.G;weHave.push('H');weDontHave.splice(i,1);break;}}}
saturated=weHave.length==firstLength;}
return fo;}
DateTime.getInfoFromFormat=function(dateString,format){format=format||'d/m/Y H:i:s';var formatOffsets=DateTime.formatOffsets;var translator=DateTime.translator;var fo={}
for(var i=0,len=format.length;i<len;i++){if(formatOffsets.indexOf(format[i])>-1){if(format[i]=='d'){fo.d=dateString.substr(0,2);dateString=dateString.substr(2,dateString.length-2);}else if(format[i]=='D'){fo.D=dateString.substr(0,3);dateString=dateString.substr(3,dateString.length-3);}else if(format[i]=='j'){var j=dateString[0];if(parseInt(dateString[1])){j+=dateString[1];}
fo.j=parseInt(j);dateString=dateString.substr(j.length,dateString.length-j.length);}else if(format[i]=='l'){for(var k=0,j=translator.dayFull.length;k<j;k++){var l=translator.dayFull[k],reg=new RegExp('^'+l,'m');if(reg.test(dateString)){fo.l=l;dateString=dateString.substr(l.length,dateString.length-l.length);break;}}}else if(format[i]=='L'){for(var k=0,j=translator.dayFull.length;k<j;k++){var L=translator.dayFull[k].toLowerCase(),reg=new RegExp('^'+L,'m');if(reg.test(dateString)){fo.L=L;dateString=dateString.substr(L.length,dateString.length-L.length);break;}}}else if(format[i]=='N'){fo.N=dateString.substr(0,1);dateString=dateString.substr(1,dateString.length-1);}else if(format[i]=='S'){fo.S=dateString.substr(0,2);dateString=dateString.substr(2,dateString.length-2);}else if(format[i]=='w'){fo.w=dateString.substr(0,1);dateString=dateString.substr(1,dateString.length-1);}else if(format[i]=='z'){var z=dateString[0];if(parseInt(dateString[1])){z+=dateString[1];}
if(parseInt(dateString[2])){z+=dateString[2];}
fo.z=parseInt(z);dateString=dateString.substr(z.length,dateString.length-z.length);}
else if(format[i]=='W'){var W=dateString[0];if(parseInt(dateString[1])){W+=dateString[1];}
fo.W=parseInt(W);dateString=dateString.substr(W.length,dateString.length-W.length);}
else if(format[i]=='F'){for(var k=0,j=translator.monthFull.length;k<j;k++){var F=translator.monthFull[k],reg=new RegExp('^'+F,'m');if(reg.test(dateString)){fo.F=F;dateString=dateString.substr(F.length,dateString.length-F.length);break;}}}else if(format[i]=='n'){var n=dateString[0];if(parseInt(dateString[1])){n+=dateString[1];}
fo.n=parseInt(n);dateString=dateString.substr(n.length,dateString.length-n.length);}else if(format[i]=='m'){fo.m=dateString.substr(0,2);dateString=dateString.substr(2,dateString.length-2);}else if(format[i]=='M'){fo.M=dateString.substr(0,3);dateString=dateString.substr(3,dateString.length-3);}else if(format[i]=='t'){fo.t=dateString.substr(0,2);dateString=dateString.substr(2,dateString.length-2);}
else if(format[i]=='L'){fo.L=dateString.substr(0,1);dateString=dateString.substr(1,dateString.length-1);}else if(format[i]=='o'){fo.o=dateString.substr(0,4);dateString=dateString.substr(4,dateString.length-4);}else if(format[i]=='Y'){fo.Y=parseInt(dateString.substr(0,4));dateString=dateString.substr(4,dateString.length-4);}else if(format[i]=='y'){fo.y=dateString.substr(0,2);dateString=dateString.substr(2,dateString.length-2);}
else if(format[i]=='a'){fo.a=dateString.substr(0,2);dateString=dateString.substr(2,dateString.length-2);}else if(format[i]=='A'){fo.A=dateString.substr(0,2);dateString=dateString.substr(2,dateString.length-2);}else if(format[i]=='B'){fo.B=dateString.substr(0,3);dateString=dateString.substr(3,dateString.length-3);}else if(format[i]=='g'){var g=dateString[0];if(parseInt(dateString[1])){g+=dateString[1];}
fo.g=parseInt(g);dateString=dateString.substr(g.length,dateString.length-g.length);}else if(format[i]=='G'){var G=dateString[0];if(parseInt(dateString[1])){G+=dateString[1];}
fo.G=parseInt(G);dateString=dateString.substr(G.length,dateString.length-G.length);}else if(format[i]=='h'){fo.h=dateString.substr(0,2);dateString=dateString.substr(2,dateString.length-2);}else if(format[i]=='H'){fo.H=dateString.substr(0,2);dateString=dateString.substr(2,dateString.length-2);}else if(format[i]=='i'){fo.i=dateString.substr(0,2);dateString=dateString.substr(2,dateString.length-2);}else if(format[i]=='s'){fo.s=dateString.substr(0,2);dateString=dateString.substr(2,dateString.length-2);}
else if(format[i]=='e'){console.warn('Timezone '+format[i]+' is not supported!');}else if(format[i]=='I'){console.warn('Timezone '+format[i]+' is not supported!');}else if(format[i]=='O'){console.warn('Timezone '+format[i]+' is not supported!');}else if(format[i]=='P'){console.warn('Timezone '+format[i]+' is not supported!');}else if(format[i]=='T'){console.warn('Timezone '+format[i]+' is not supported!');}else if(format[i]=='Z'){console.warn('Timezone '+format[i]+' is not supported!');}
else if(format[i]=='c'){console.warn('Full Date/Time '+format[i]+' is not supported!');}else if(format[i]=='r'){console.warn('Full Date/Time '+format[i]+' is not supported!');}else if(format[i]=='U'){console.warn('Full Date/Time '+format[i]+' is not supported!');}}else{dateString=dateString.substr(1,dateString.length-1);}}
return fo;}
DateTime.createFromFormat=function(dateString,format){if(dateString==='c'){return DateTime.createFromObject(new Date());}
format=format||'d/m/Y H:i:s';var fo=DateTime.getInfoFromFormat(dateString,format);var year=fo.Y?fo.Y:1900;var month=fo.m?fo.m:fo.M?fo.M:fo.n?fo.n:1;var date=fo.d?fo.d:fo.j?fo.j:1;var hours=fo.H?fo.H:fo.G?fo.G:0;var minutes=fo.i?fo.i:0;var seconds=fo.s?fo.s:0;var dateTime=new Date(year,parseInt(month)-1,date,hours,minutes,seconds);return new DateTime(dateTime);}
DateTime.createFromObject=function(obj){var fo=(new DateTime(obj)).toObject();var dateTime=new Date(fo.Y,parseInt(fo.m)-1,fo.d,fo.H||0,fo.i||0,fo.s||0);return new DateTime(dateTime);}
DateTime.create=function(value,format){if(value instanceof Date){return DateTime.createFromObject(value);}else if(typeof value==='string'){if('c'===value){return DateTime.createFromObject(new Date());}
return DateTime.createFromFormat(value,format);}else{throw'Can\'t create DateTime object';}}
DateTime.parseRelativeDate=function(relativeDate){switch(relativeDate){case'c':return moment()
case'today':return moment()
case'yesterday':return moment().subtract(1,'day');default:return moment().subtract(Number(relativeDate.replace("days ago","").trim()),'days');}}
DateTime.parseInputDate=function(inputDate,format){if(moment.isMoment(inputDate)||inputDate instanceof Date){return moment(inputDate);}
var relativeDate=inputDate.match(/c|today|yesterday|[0-9]+\s+(days ago)/);if(relativeDate!==null){var rs=DateTime.parseRelativeDate(relativeDate[0]);if(format){rs=moment(rs.format(format),format);}
return rs;}else if(format){return moment(inputDate,format);}
return momment();}
Nth.DateTime=DateTime;return DateTime;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Filter'],factory);}else{factory(Nth);}})(function(Nth){var StringToUpper=function(){Nth.Filter.call(this);}
StringToUpper.prototype=Object.create(Nth.Filter.prototype);StringToUpper.prototype.constructor=StringToUpper;StringToUpper.prototype.__CLASS__='Nth.Filter.StringToUpper';StringToUpper.prototype.getInputEvent=function(){return'keyup.StringToUpper';}
StringToUpper.prototype.onHook=function(){var element=this.getElement();var inst=this;var val=element.getValue();if(typeof val==='string'&&val){element.setValue(this.filter(val));}
element.getControl().getNode().on(this.getInputEvent(),function(){this.value=inst.filter(this.value);});return this;}
StringToUpper.prototype.onUnhook=function(){this.getElement().getControl().getNode().off(this.getInputEvent());return this;}
StringToUpper.prototype.filter=function(string){return(string+'').toUpperCase();}
StringToUpper.prototype.getSetterOptions=function(){return{subject:'Chuyển đổi tất cả ký tự thành kiểu in hoa khi người dùng nhập'}}
StringToUpper.prototype.toJson=function(){return{name:this.__CLASS__}}
Nth.Filter.StringToUpper=StringToUpper;return StringToUpper;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth'],factory);}else{factory(Nth);}})(function(Nth){var Node=function(node){this.attributes={}
if(this instanceof Node){this.setNode(node);}else{return new Node(node);}}
Node.prototype.getNode=function(){return this.node;}
Node.prototype.setNode=function(node){this.node=$.getElement(node);this.sync();}
Node.prototype.sync=function(){var inst=this;if(!this.getNode().length){this.attributes={}
return this;}
$.each(this.getNode()[0].attributes,function(){inst.attributes[this.name]=this.value;});return this;}
Node.prototype.getAttributes=function(){this.sync();return this.attributes;}
Node.prototype.setAttributes=function(attributes){var inst=this;$.each(this.sync().attributes,function(name){inst.removeAttribute(name);});this.getNode().attr(attributes)
return this;}
Node.prototype.getAttribute=function(name,def){this.sync();if(def===undefined){def=null;}
return this.attributes[name]===undefined?def:this.attributes[name];}
Node.prototype.setAttribute=function(name,value){this.getNode().attr(name,value);this.attributes[name]=value;return this;}
Node.prototype.mergeAttributes=function(attributes,recursive){return this.setAttributes($.extend(recursive===undefined?{}:recursive,this.getAttributes(),attributes));}
Node.prototype.existsAttribute=function(name){return this.sync().attributes[name]!==undefined;}
Node.prototype.removeAttribute=function(name){if(this.existsAttribute(name)){delete this.attributes[name];this.getNode().removeAttr(name);}
return this;}
Node.prototype.clone=function(){return $.extend({},{},this.getAttributes());}
Nth.Dom.Node=Node;return Node;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth'],factory);}else{factory(Nth);}})(function(Nth){var File=function(path){this.setPath(path);}
File.prototype.getPath=function(){return this.path;}
File.prototype.setPath=function(path){this.path=(path||'').replace(/\\/g,File.DIRECTORY_SEPARATOR);return this;}
File.prototype.getExtension=function(){var arr=this.path.split('.');return arr[arr.length-1];}
File.prototype.getBasename=function(){var arr=this.path.split(File.DIRECTORY_SEPARATOR);return arr[arr.length-1];}
File.DIRECTORY_SEPARATOR='/';Nth.File.File=File;return File;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/File/File'],factory);}else{factory(Nth);}})(function(Nth){var FileIcon=function(file){this.domNode=$('<span/>');this.setFile(file);}
FileIcon.prototype.getFile=function(){return this.file;}
FileIcon.prototype.setFile=function(file){if(!(file instanceof Nth.File.File)){throw'The argument was pass must be an instance of Nth.File.File';}
this.file=file;this.getDomNode().attr('class','file-icon file-'+file.getExtension().toLowerCase())
return this;}
FileIcon.prototype.getDomNode=function(){return this.domNode;}
Nth.File.FileIcon=FileIcon;return FileIcon;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth'],factory);}else{factory(Nth);}})(function(Nth){var Json=function(v){var value=v;this.getValue=function(collection){if(collection){if(typeof collection==='string'){collection=collection.split(' ');}
if(collection.length===1){return value[collection[0]];}
var r={}
for(var i in collection){r[collection[i]]=value[collection[i]];}
return r;}
return value;}
this.setValue=function(v){value=v;return this;}
this.filter=function(option){option=$.extend({},{removeNull:true,removeUndefined:true,removeEmptyString:true,removeFalse:true},option);if(!value||!$.isPlainObject(value)){value={}
return this;}
for(var i in value){if(option.removeNull){if(value[i]===null){delete value[i];}else if(typeof value[i]=='object'){if($.isEmptyObject(value[i])){delete value[i];}}}
if(option.removeUndefined){if(typeof value[i]==='undefined'){delete value[i];}}
if(option.removeEmptyString){if(value[i]===""){delete value[i];}}
if(option.removeFalse){if(value[i]===false){delete value[i];}}}
return this;}
this.existsEmptyElement=function(){return this.count()>this.clone().filter().count();}
this.count=function(){var len=0;if(value&&$.isPlainObject(value)){for(var i in value){len++;}}
return len;}
this.isEmpty=function(){return this.count()===0;}
this.clone=function(){return new Nth.Helper.Json($.extend({},value));}}
Nth.Helper.Json=Json;return Json;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth'],factory);}else{factory(Nth);}})(function(Nth){var NumberHelper=function(number,fraction){this.setNumber(number);this.setFraction(fraction);}
NumberHelper.prototype.getNumber=function(){return this.number;}
NumberHelper.prototype.setNumber=function(number){this.number='';if(typeof number==='number'){this.number=number+'';}else if(typeof number==='string'){this.number=number;}
return this;}
NumberHelper.prototype.getFraction=function(){return this.fraction;}
NumberHelper.prototype.setFraction=function(fraction){this.fraction=fraction||',';return this;}
NumberHelper.prototype.getSeparator=function(){return this.getFraction()===','?'.':',';}
NumberHelper.prototype.isOddNumber=function(){var arr=this.getNumber().split(this.getFraction());return arr.length===2&&arr[1];}
NumberHelper.prototype.addCommas=function(){return this.addSeparator(',');}
NumberHelper.prototype.removeCommas=function(){return this.removeSeparator(',');}
NumberHelper.prototype.addDotted=function(){return this.addSeparator('.');}
NumberHelper.prototype.removeDotted=function(){return this.removeSeparator('.');}
NumberHelper.prototype.addSeparator=function(o){o=o||this.getSeparator();var s=o===','?'.':',';var fraction=this.getFraction();if(fraction===o){this.removeSeparator(s).replaceSeparator(o,s).setFraction(s);}else{this.removeSeparator(o);}
var x=this.getArrayPartly();var x1=x[0];var x2=x.length>1?s+x[1]:'';var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,'$1'+o+'$2');}
this.setNumber(x1+x2);return this;}
NumberHelper.prototype.removeSeparator=function(s){this.replaceSeparator(s,'');return this;}
NumberHelper.prototype.replaceSeparator=function(s,r){var n=this.getNumber();if(n===''){return n;}
var stringHelper=new Nth.Helper.String(s);var rex=new RegExp(stringHelper.escapeRegexp(),'g');this.setNumber(n.replace(rex,r));return this;}
NumberHelper.prototype.clean=function(){var separator=this.getSeparator();var n=this.removeSeparator(separator).getNumber();n=n.replace(/^[0]+/g,'');if(this.isOddNumber()){n=n.replace(/[0]+$/g,'');}
this.setNumber(n);return this;}
NumberHelper.prototype.getArrayPartly=function(){return this.getNumber().split(this.getFraction());}
NumberHelper.prototype.read=function(o){o=o||',';var clone=this.clone();var s=[];var nts={0:'không',1:'một',2:'hai',3:'ba',4:'bốn',5:'năm',6:'sáu',7:'bảy',8:'tám',9:'chín'};var n=clone.clean().getArrayPartly();var chan=n[0]?n[0]:'';var le=n[1]?n[1]:'';function push(v){if(v&&v.length){if(typeof v=='string'){if(!s.length){s.push(v);}else{s.push(' ');s.push(v);}}else{for(var i in v){push(v[i]);}}}}
function read3(n3,dl,ex){var r=[],donvi,chuc,tram;if(n3.length===3){donvi=Number(n3[2]);chuc=Number(n3[1]);tram=Number(n3[0]);if(tram===0&&chuc===0&&donvi===0){if(dl&&ex){return dl;}else{return'';}}}else if(n3.length===2){donvi=Number(n3[1]);chuc=Number(n3[0]);}else if(n3.length===1){donvi=Number(n3[0]);}
if(!isNaN(tram)){r.push(nts[tram]);r.push('trăm');}
if(!isNaN(chuc)&&chuc!==0){if(chuc===1){r.push('mười');}else if(!isNaN(tram)&&chuc===0){r.push('lẻ');}else{r.push(nts[chuc]);r.push('mươi');}}
if(!isNaN(donvi)){if(chuc===0&&donvi>0){r.push('lẻ');r.push(nts[donvi]);}else if(!isNaN(chuc)&&chuc!==1&&donvi===1){r.push('mốt');}else if(!isNaN(chuc)&&chuc!==0&&donvi===5){r.push('lăm');}else if(donvi!==0||(isNaN(tram)&&isNaN(chuc))){r.push(nts[donvi]);}}
if(dl&&(r.length||ex)){r.push(dl);}
return r;}
function readAll(rn){var nh=new NumberHelper(rn,clone.getFraction());var s=nh.addSeparator().getNumber().split(nh.getSeparator());for(var i=0,l=s.length;i<l;i++){var tty=l-i-4,ttrieu=l-i-3,ttram=l-i-2;if(tty%3===0&&tty>=0){var ty=s[i];push(read3(ty,'tỷ',!0));}
if(ttrieu%3===0&&ttrieu>=0){var trieu=s[i];push(read3(trieu,'triệu'));}
if(ttram%3===0&&ttram>=0){var nghin=s[i];push(read3(nghin,'nghìn'));}
if(l-i===1){var donvi=s[i];push(read3(donvi));}}}
if(chan){readAll(chan);}
if(le){push('phẩy');readAll(le);}
var stringHelper=new Nth.Helper.String(s.join(''));return stringHelper.ucfirst().getString();}
NumberHelper.prototype.clone=function(){return new NumberHelper(this.getNumber(),this.getFraction());}
Nth.Helper.Number=NumberHelper;return NumberHelper;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth'],factory);}else{factory(Nth);}})(function(Nth){var String=function(s){var string=s;this.setString=function(s){string=s;return this;}
this.getString=function(){return string;}
this.escapeRegexp=function(){return string.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");}
this.ucfirst=function(){string+='';string=string.substring(0,1).toUpperCase()+string.substring(1);return this;}
this.lcfirst=function(){string+='';string=string.substring(0,1).toLowerCase()+string.substring(1);return this;}
this.limit=function(len,placeholder){var str=string+'';if(!str){return'';}
len=len||50;if(str.length>len){str=str.substring(0,len-2)+(placeholder||'...');}
return str;}
this.removeMarks=function(){var rules={a:["à","á","ạ","ả","ã","â","ầ","ấ","ậ","ẩ","ẫ","ă","ằ","ắ","ặ","ẳ","ẵ"],e:["è","é","ẹ","ẻ","ẽ","ê","ề","ế","ệ","ể","ễ"],i:["ì","í","ị","ỉ","ĩ"],o:["ò","ó","ọ","ỏ","õ","ô","ồ","ố","ộ","ổ","ỗ","ơ","ờ","ớ","ợ","ở","ỡ"],u:["ù","ú","ụ","ủ","ũ","ư","ừ","ứ","ự","ử","ữ"],y:["ỳ","ý","ỵ","ỷ","ỹ"],d:["đ"],A:["À","Á","Ạ","Ả","Ã","Â","Ầ","Ấ","Ậ","Ẩ","Ẫ","Ă","Ằ","Ắ","Ặ","Ẳ","Ẵ"],E:["È","É","Ẹ","Ẻ","Ẽ","Ê","Ề","Ế","Ệ","Ể","Ễ"],I:["Ì","Í","Ị","Ỉ","Ĩ"],O:["Ò","Ó","Ọ","Ỏ","Õ","Ô","Ồ","Ố","Ộ","Ổ","Ỗ","Ơ","Ờ","Ớ","Ợ","Ở","Ỡ"],U:["Ù","Ú","Ụ","Ủ","Ũ","Ư","Ừ","Ứ","Ự","Ử","Ữ"],Y:["Ỳ","Ý","Ỵ","Ỷ","Ỹ"],D:["Đ"]}
var regex;for(var replaceChar in rules){var findChar=rules[replaceChar];for(var i in findChar){regex=new RegExp(findChar[i],"g");string=string.replace(regex,replaceChar);}}
if(string.length){for(var i in string){if(string.charCodeAt(i)>255){string=string.replace(string[i],'');}}}
return this;}
this.cleanSpecialChars=function(){string=string.replace(/[^\w\s]/gi,'');return this;}
this.trim=function(){}
this.sprintf=function(){var parameters=arguments;var pattern=/\{\{|\}\}|\{(\d+)\}/g;return string.replace(pattern,function(match,group){var value;if(match==="{{")
return"{";if(match==="}}")
return"}";value=parameters[parseInt(group,10)];return value?value.toString():"";});}}
Nth.Helper.String=String;return String;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth'],factory);}else{factory(Nth);}})(function(Nth){var ArrayHelper=function(arr){this.setArray(arr||[]);}
ArrayHelper.prototype.setArray=function(arr){if(!(arr instanceof window.Array)){console.warn('The argument was passed must be an instance of Array');return this;}
this.array=arr;return this;}
ArrayHelper.prototype.getArray=function(){return this.array;}
ArrayHelper.prototype.removeItem=function(item){if(this.existsItem(item)){this.array.splice(this.array.indexOf(item),1);}
return this;}
ArrayHelper.prototype.hasItem=function(item){return this.array.indexOf(item)>-1;}
ArrayHelper.prototype.addItem=function(item){this.array.push(item);return this;}
ArrayHelper.prototype.flip=function(){var tmp={};var array=this.getArray();for(var key in array){if(array.hasOwnProperty(key)){tmp[array[key]]=key;}}
array=tmp;return this;}
ArrayHelper.prototype.trimItems=function(){var array=this.getArray();for(var i in array){if(typeof array[i]=='string'){array[i]=$.trim(array[i]);}}
return this;}
Nth.Helper.Array=ArrayHelper;return ArrayHelper;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Validator'],factory);}else{factory(Nth);}})(function(Nth){var Cdpwd=function(){Nth.Validator.call(this,{invalidCdpwd:'Mật khẩu phải có ít nhất 6 ký tự'});}
Cdpwd.prototype=Object.create(Nth.Validator.prototype);Cdpwd.prototype.constructor=Cdpwd;Cdpwd.prototype.__CLASS__='Nth.Validator.Cdpwd';Cdpwd.prototype.isValid=function(pwd){if(!pwd||pwd.length<6){this.setMessage(this.getOption('invalidCdpwd'));return false;}
return true;}
Cdpwd.prototype.toJson=function(){return{name:this.__CLASS__}}
Cdpwd.prototype.getSetterOptions=function(){return{subject:'Định dạng là mật khẩu công dân (Phải có ít nhất 6 ký tự)'}}
Nth.Validator.Cdpwd=Cdpwd;return Cdpwd;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Validator'],factory);}else{factory(Nth);}})(function(Nth){var Cmnd=function(){Nth.Validator.call(this,{cmndNotNumber:'Số CMND phải là chữ số',invalidCmnd:'Số CMND phải có 9 hoặc 12 chữ số'});}
Cmnd.prototype=Object.create(Nth.Validator.prototype);Cmnd.prototype.constructor=Cmnd;Cmnd.prototype.__CLASS__='Nth.Validator.Cmnd';Cmnd.isValid=function(cmnd){if(isNaN(cmnd)){this.setMessage(this.getOption('cmndNotNumber'));return false;}else if(!(cmnd.length===9||cmnd.length===12)){this.setMessage(this.getOption('invalidCmnd'));return false;}
return true;}
Cmnd.prototype.toJson=function(){return{name:this.__CLASS__}}
Cmnd.prototype.getSetterOptions=function(){return{subject:'Định dạng là số chứng minh nhân dân (9 hoặc 12 số)'}}
Nth.Validator.Cmnd=Cmnd;return Cmnd;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','moment','Nth/Validator','Nth/Helper/String','Nth/DateTime'],factory);}else{factory(Nth,moment);}})(function(Nth,moment){var DateValidator=function(options){options=$.extend({},{format:'DD/MM/YYYY',min:null,max:null,invalidDateFormat:'{0} không hợp lệ'},options);options.format=this.parseFormat(options.format);Nth.Validator.call(this,options);this.errors=['Năm','Tháng','Ngày','Giờ','Phút','Giây','Mili giây'];this.element=null;}
DateValidator.prototype=Object.create(Nth.Validator.prototype);DateValidator.prototype.constructor=DateValidator;DateValidator.prototype.__CLASS__='Nth.Validator.Date';DateValidator.prototype.getLeastFormatName=function(){var format=this.getOption('format');if(format.indexOf('D')>-1){return'ngày';}
if(format.indexOf('M')>-1){return'tháng';}
if(format.indexOf('YY')>-1){return'năm';}
return'ngày/giờ';}
DateValidator.prototype.parseFormat=function(format){if((format+'').match(/d|m/)){if(format==='m/Y'){return'MM/YYYY';}else if(format==='Y'){return'YYYY';}
return'DD/MM/YYYY';}
return format;}
DateValidator.prototype.isValid=function(dateString){var format=this.getOption('format');var strHelper=new Nth.Helper.String();var dt=moment(dateString,format);if(!dt.isValid()){strHelper.setString(this.getOption('invalidDateFormat'));this.setMessage(strHelper.sprintf(this.errors[dt.invalidAt()]));return false;}
var min=this.getOption('min');var max=this.getOption('max');var name=this.getElement().getValidName();var lfname=this.getLeastFormatName();if(min){var dt1=moment(dateString,format);var dt2=Nth.DateTime.parseInputDate(min,format)
if(dt1.isBefore(dt2)){var cpdtName=dt2.isToday()?'hiện tại':dt2.format(format);strHelper.setString(this.getOption('valueTooSmall'));this.setMessage(strHelper.sprintf(name||'Giá trị ',lfname+' '+cpdtName));return false;}}
if(max){var dt1=moment(dateString,format);var dt2=Nth.DateTime.parseInputDate(max,format);if(dt1.isAfter(dt2)){var cpdtName=dt2.isToday()?lfname+' hiện tại':dt2.format(format);strHelper.setString(this.getOption('valueTooLarge'));this.setMessage(strHelper.sprintf(name||'Giá trị ',lfname+' '+cpdtName));return false;}}
return true;}
DateValidator.prototype.onHook=function(){var element=this.getElement();var defaultValue=element.getDefaultValue();if(defaultValue){element.setValue(defaultValue);}
var inst=this;element.getWrapper().getNode().on('nth.fb.import-data.DateValidator',function(e,item){if(item.value&&!item.format){item.format=element.diagnoseFormatByValue(item.value);if(item.format){element.setFormat(item.format);}}});element.getWrapper().getNode().on('nth.fb.export-data.DateValidator',function(e,item){item.format=inst.getOption('format');});return this;}
DateValidator.prototype.onUnhook=function(){var element=this.getElement();element.getWrapper().getNode().off('nth.fb.export-data.DateValidator nth.fb.export-data.DateValidator');return this;}
DateValidator.prototype.getSetterOptions=function(){var element=this.getElement();var fieldset=new Nth.FormBuilder.Fieldset('datev-fieldset');var row_1=new Nth.FormBuilder.Row('datev-row-1',{parentComponent:fieldset});var row_2=new Nth.FormBuilder.Row('datev-row-2',{parentComponent:fieldset});var row_3=new Nth.FormBuilder.Row('datev-row-3',{parentComponent:fieldset});var col_1=new Nth.FormBuilder.Column('datev-column-1',{parentComponent:row_1,wrapperAttributes:{'class':'col-md-6'}});var col_2=new Nth.FormBuilder.Column('datev-column-2',{parentComponent:row_2,wrapperAttributes:{'class':'col-md-6'}});var col_3=new Nth.FormBuilder.Column('datev-column-3',{parentComponent:row_2,wrapperAttributes:{'class':'col-md-6'}});var col_4=new Nth.FormBuilder.Column('datev-column-4',{parentComponent:row_3,wrapperAttributes:{'class':'col-md-6'}});var col_5=new Nth.FormBuilder.Column('datev-column-5',{parentComponent:row_3,wrapperAttributes:{'class':'col-md-6'}});var col_6=new Nth.FormBuilder.Column('datev-column-6',{parentComponent:row_1,wrapperAttributes:{'class':'col-md-6'}});var formatElement=new Nth.FormBuilder.Element.Select('datev-format-option',{parentComponent:col_1,label:'Định dạng ngày',selectItemData:[['DD/MM/YYYY','Ngày/Tháng/Năm (DD/MM/YYYY)',true],['MM/YYYY','Tháng/Năm (MM/YYYY)'],['YYYY','Năm (YYYY)']],value:this.getOption('format'),autoInit:false});var currvalueElement=new Nth.FormBuilder.Element.Checkbox('datev-current-value-option',{parentComponent:col_6,label:'Lấy ngày hiện tại làm giá trị mặc định',value:'c',checked:element.getDefaultValue()==='c'});currvalueElement.getControl().getNode().on('change',function(){if(currvalueElement.checked()){element.setDefaultValue('c').setValue('c');}else{element.setDefaultValue(null).setValue(null);}});var minElement=new Nth.FormBuilder.Element.Date('datev-min-option',{parentComponent:col_2,label:'Giá trị nhỏ nhất',value:this.getOption('min')==='c'?null:this.getOption('min'),disabled:this.getOption('min')==='c',validators:[new Nth.Validator.Date({format:this.getOption('format')})]});var currminElement=new Nth.FormBuilder.Element.Checkbox('datev-current-min-option',{parentComponent:col_3,label:'Lấy ngày hiện tại làm giá trị nhỏ nhất',value:'c',checked:this.getOption('min')==='c'});var maxElement=new Nth.FormBuilder.Element.Date('datev-max-option',{parentComponent:col_4,label:'Giá trị lớn nhất',value:this.getOption('max')==='c'?null:this.getOption('max'),disabled:this.getOption('max')==='c',validators:[new Nth.Validator.Date({format:this.getOption('format')})]});var currmaxElement=new Nth.FormBuilder.Element.Checkbox('datev-current-max-option',{parentComponent:col_5,label:'Lấy ngày hiện tại làm giá trị lớn nhất',value:'c',checked:this.getOption('max')==='c'});formatElement.getWrapper().getNode().on('nth.fb.bound',function(){minElement.getDateTimePicker().hide();maxElement.getDateTimePicker().hide();var format=formatElement.getValue();minElement.setFormat(format);maxElement.setFormat(format);element.setFormat(format);});formatElement.init();currminElement.getControl().getNode().on('change',function(){if(currminElement.checked()){minElement.disable();}else{minElement.enable();}});currmaxElement.getControl().getNode().on('change',function(){if(currmaxElement.checked()){maxElement.disable();}else{maxElement.enable();}});fieldset.addComponent(row_1);fieldset.addComponent(col_1);fieldset.addComponent(col_6);fieldset.addComponent(formatElement);fieldset.addComponent(currvalueElement);fieldset.addComponent(row_2);fieldset.addComponent(col_2);fieldset.addComponent(minElement);fieldset.addComponent(col_3);fieldset.addComponent(currminElement);fieldset.addComponent(row_3);fieldset.addComponent(col_4);fieldset.addComponent(maxElement);fieldset.addComponent(col_5);fieldset.addComponent(currmaxElement);var result={subject:'Định dạng theo kiểu ngày',fieldset:fieldset,options:function(){var options={};options.format=formatElement.getValue();if(currminElement.checked()){options.min='c';}else if(minElement.getValue()){options.min=minElement.getValue();}
if(currmaxElement.checked()){options.max='c';}else if(maxElement.getValue()){options.max=maxElement.getValue();}
return options;}}
return result;}
DateValidator.prototype.toJson=function(){return{name:this.__CLASS__,options:{format:this.getOption('format'),min:this.getOption('min'),max:this.getOption('max')}}}
Nth.Validator.Date=DateValidator;return DateValidator;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','moment','Nth/Validator','Nth/Helper/String','Nth/DateTime'],factory);}else{factory(Nth,moment);}})(function(Nth,moment){var DateTime=function(options){Nth.Validator.call(this,$.extend({},{invalidFormat:'{0} Không hợp lệ'},options));if(!$.isArray(this.getOption('formats'))){this.setOption('formats',[{name:'Ngày/Tháng/Năm',format:'DD/MM/YYYY',defaultValue:null,minValue:null,maxValue:null,isCurrent:true}]);}}
DateTime.prototype=Object.create(Nth.Validator.prototype);DateTime.prototype.constructor=DateTime;DateTime.prototype.__CLASS__='Nth.Validator.DateTime';DateTime.prototype.getSupportFormats=function(){return[{name:'Ngày/Tháng/Năm',format:'DD/MM/YYYY',defaultValue:null,minValue:null,maxValue:null},{name:'Tháng/Năm',format:'MM/YYYY',defaultValue:null,minValue:null,maxValue:null},{name:'Năm',format:'YYYY',defaultValue:null,minValue:null,maxValue:null},{name:'Ngày/Tháng/Năm Giờ:Phút',format:'DD/MM/YYYY HH:mm',defaultValue:null,minValue:null,maxValue:null},{name:'Giờ:Phút',format:'HH:mm',defaultValue:null,minValue:null,maxValue:null}];}
DateTime.prototype.getInvalidName=function(at){return['Năm','Tháng','Ngày','Giờ','Phút','Giây','Mili giây'][at];}
DateTime.prototype.getFormats=function(){return this.getOption('formats',[]);}
DateTime.prototype.setFormats=function(formats){this.setOption('formats',formats);return this;}
DateTime.prototype.getFormat=function(format,def){var rs=this.getFormats().filter(function(a){return a.format===format;});return rs.length===1?rs[0]:def;}
DateTime.prototype.existsFormat=function(format){return!!this.getFormat(format);}
DateTime.prototype.setFormat=function(format,option,value){var options={};if($.isPlainObject(format)){options=format;}else if(typeof format==='string'){options['format']=format;}
if(option&&typeof value!=='undefined'){options[option]=value;}
if(!$.isPlainObject(options)||!options['format']){throw"options is invalid";}
options=$.extend({},this.getFormat(options.format),options);this.removeFormat(options.format).getFormats().push(options);return this;}
DateTime.prototype.removeFormat=function(format){var inst=this;$.each(this.getFormats(),function(i,a){if(a.format===format){inst.getFormats().splice(i,1);return false;}});return this;}
DateTime.prototype.getCurrentFormat=function(){var formats=this.getFormats();var rs=formats.filter(function(a){return a.isCurrent;});return rs.length===1?rs[0]:formats[0];}
DateTime.prototype.setCurrentFormat=function(format){if(this.existsFormat(format)){$.each(this.getFormats(),function(i,a){a.isCurrent=a.format===format?true:false;});}else if(typeof format==='string'){this.setFormat({name:format,format:format,isCurrent:true});}else if($.isPlainObject(format)){this.setFormat(format);}
return this;}
DateTime.prototype.isValid=function(dateString){var options=this.getCurrentFormat();var strHelper=new Nth.Helper.String();var dt=moment(dateString,options.format);if(!dt.isValid()){strHelper.setString(this.getOption('invalidFormat'));this.setMessage(strHelper.sprintf(this.getInvalidName[dt.invalidAt()]));return false;}
var name=this.getElement()?this.getElement().getValidName():options.name;if(options.minValue){var dt1=moment(dateString,options.format);var dt2=Nth.DateTime.parseInputDate(options.minValue,options.format)
if(dt1.isBefore(dt2)){strHelper.setString(this.getOption('valueTooSmall'));this.setMessage(strHelper.sprintf(name,dt2.format(options.format)));return false;}}
if(options.maxValue){var dt1=moment(dateString,options.format);var dt2=Nth.DateTime.parseInputDate(options.maxValue,options.format);if(dt1.isAfter(dt2)){strHelper.setString(this.getOption('valueTooLarge'));this.setMessage(strHelper.sprintf(name,dt2.format(options.format)));return false;}}
return true;}
DateTime.prototype.onHook=function(){var inst=this;var element=this.getElement();element.getWrapper().getNode().on('nth.fb.import-data.DateTime',function(e,item){inst.setCurrentFormat(item.format);});element.getWrapper().getNode().on('nth.fb.export-data.DateTime',function(e,item){item.format=inst.getCurrentFormat().format;});return this;}
DateTime.prototype.onUnhook=function(){this.getElement().getWrapper().getNode().off('nth.fb.export-data.DateTime nth.fb.export-data.DateTime');return this;}
DateTime.prototype.getSetterOptions=function(){var inst=this;var fieldset=new Nth.FormBuilder.Fieldset(true,{componentNamePrefix:'fs-datetimev'});var $panelGroup=$('<div/>',{role:"tablist",'class':"panel-group",'aria-multiselectable':true}).appendTo(fieldset.getDomNode());$.each(this.getSupportFormats(),function(i,options){var set=inst.getFormat(options.format,{});var $panel=$('<div/>',{'class':'panel panel-default'}).appendTo($panelGroup);var $panelHeading=$('<div/>',{'class':'panel-heading',role:"tab",id:"heading"+i}).appendTo($panel);var row_1=new Nth.FormBuilder.Row(true,{parentComponent:fieldset,addingRelative:$panelHeading});var col_1=new Nth.FormBuilder.Column(true,{parentComponent:row_1,wrapperAttributes:{'class':'col-xs-7'}});var col_2=new Nth.FormBuilder.Column(true,{parentComponent:row_1,wrapperAttributes:{'class':'col-xs-5 text-right'}});var include=new Nth.FormBuilder.Element.Checkbox(i+'-include',{parentComponent:col_1,label:options.name,value:options.format,checked:set.format});include.getLabel().getNode().css('margin',0);include.getWrapper().getNode().css({margin:0,'font-size':'13px'});var $collapseTrigger=$('<a/>',{href:"#collapse"+i,role:"button",style:'font-size:13px;'+(set.format?'':'display:none'),'data-toggle':"collapse",'aria-expanded':"true",'aria-controls':"collapse"+i}).html('<i class="fa fa-gear"></i>').appendTo(col_2.getDomNode());if(set.isCurrent){col_2.getDomNode().prepend('<em>(mặc định)&nbsp;&nbsp;</em>');}
var $collapseWrapper=$('<div/>',{id:"collapse"+i,role:"tabpanel",'class':"panel-collapse collapse",'data-toggle':false,'aria-labelledby':"heading"+i}).appendTo($panel);var $panelBody=$('<div/>',{'class':'panel-body'}).appendTo($collapseWrapper);var row_2=new Nth.FormBuilder.Row(true,{parentComponent:fieldset,addingRelative:$panelBody});var col_3=new Nth.FormBuilder.Column(true,{parentComponent:row_2,wrapperAttributes:{'class':'col-md-6'}});var col_4=new Nth.FormBuilder.Column(true,{parentComponent:row_2,wrapperAttributes:{'class':'col-md-6'}});var setAsCurrent=new Nth.FormBuilder.Element.Radio(i+'-set-as-current',{parentComponent:col_4,label:'Sử dụng mặc định',controlAttributes:{name:'dtv-option-set-as-current'},checked:set.isCurrent});setAsCurrent.getControl().getNode().on('change',function(){$panelGroup.find('.panel-heading em').remove();if(setAsCurrent.checked()){col_2.getDomNode().prepend('<em>(mặc định)&nbsp;&nbsp;</em>');}});var defaultValue=new Nth.FormBuilder.Element.DateTime(i+'-default-value',{parentComponent:col_3,label:'Giá trị mặc định',formats:[{format:options.format}],value:set.defaultValue,disabled:set.defaultValue==='today'});var currentValueAsDefault=new Nth.FormBuilder.Element.Checkbox(i+'-current-value-as-default',{parentComponent:col_4,label:'Lấy thời gian hiện tại làm giá trị mặc định',value:'today',checked:set.defaultValue==='today'});currentValueAsDefault.getControl().getNode().on('change',function(){if(currentValueAsDefault.checked()){defaultValue.disable();}else{defaultValue.enable();}});var minValue=new Nth.FormBuilder.Element.DateTime(i+'-min-value',{parentComponent:col_3,label:'Giá trị nhỏ nhất',formats:[{format:options.format}],value:set.minValue,disabled:set.minValue==='today'});var currentValueAsMin=new Nth.FormBuilder.Element.Checkbox(i+'-current-value-as-min',{parentComponent:col_4,label:'Lấy thời gian hiện tại làm giá trị nhỏ nhất',value:'today',checked:set.minValue==='today'});currentValueAsMin.getControl().getNode().on('change',function(){if(currentValueAsMin.checked()){minValue.disable();}else{minValue.enable();}});var maxValue=new Nth.FormBuilder.Element.DateTime(i+'-max-value',{parentComponent:col_3,label:'Giá trị lớn nhất',formats:[{format:options.format}],value:set.maxValue,disabled:set.maxValue==='today'});var currentValueAsMax=new Nth.FormBuilder.Element.Checkbox(i+'-current-value-as-max',{parentComponent:col_4,label:'Lấy thời gian hiện tại làm giá trị lớn nhất',value:'today',checked:set.maxValue==='today'});currentValueAsMax.getControl().getNode().on('change',function(){if(currentValueAsMax.checked()){maxValue.disable();}else{maxValue.enable();}});include.getControl().getNode().on('change',function(){if(include.checked()){$collapseTrigger.show();}else{$collapseTrigger.hide();$collapseWrapper.collapse('hide');row_2.reset(function(){if(this.is('Radio')||this.is('Checkbox')){this.setOption('checked',false);}});col_2.getDomNode().children('em').remove();}});fieldset.addComponent(row_1,row_2);fieldset.addComponent(col_1,col_2,col_3,col_4);fieldset.addComponent(include);fieldset.addComponent(setAsCurrent);fieldset.addComponent(defaultValue);fieldset.addComponent(currentValueAsDefault);fieldset.addComponent(minValue);fieldset.addComponent(currentValueAsMin);fieldset.addComponent(maxValue);fieldset.addComponent(currentValueAsMax);});return{subject:'Định dạng theo kiểu ngày/giờ',fieldset:fieldset,beforeSave:function(){var result=true;fieldset.isValid(function(){if(this.hasMessage()){result=false;return this.showMessage();}
var formats=[];var prefix=fieldset.getConfigParam('componentNamePrefix');$.each(inst.getSupportFormats(),function(i){var include=fieldset.getComponent(prefix+i+'-include');var setAsCurrent=fieldset.getComponent(prefix+i+'-set-as-current');var defaultValue=fieldset.getComponent(prefix+i+'-default-value');var currentValueAsDefault=fieldset.getComponent(prefix+i+'-current-value-as-default');var minValue=fieldset.getComponent(prefix+i+'-min-value');var currentValueAsMin=fieldset.getComponent(prefix+i+'-current-value-as-min');var maxValue=fieldset.getComponent(prefix+i+'-max-value');var currentValueAsMax=fieldset.getComponent(prefix+i+'-current-value-as-max');if(include.checked()){formats.push({name:include.getLabelOption(),format:include.getValue(),isCurrent:setAsCurrent.checked(),defaultValue:currentValueAsDefault.checked()?currentValueAsDefault.getValue():defaultValue.getValue(),minValue:currentValueAsMin.checked()?currentValueAsMin.getValue():minValue.getValue(),maxValue:currentValueAsMax.checked()?currentValueAsMax.getValue():maxValue.getValue()});}});if(formats.length===0){fieldset.setMessage('Bạn phải chọn ít nhất 1 định dạng.');fieldset.showMessage();result=false;}else{inst.setOption('formats',formats);}});return result;}}}
DateTime.prototype.toJson=function(){return{name:this.__CLASS__,options:{formats:this.getFormats()}}}
Nth.Validator.DateTime=DateTime;return DateTime;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Validator'],factory);}else{factory(Nth);}})(function(Nth){var EmailAddress=function(){Nth.Validator.call(this,{invalidEmail:'Email không hợp lệ'});}
EmailAddress.prototype=Object.create(Nth.Validator.prototype);EmailAddress.prototype.constructor=EmailAddress;EmailAddress.prototype.__CLASS__='Nth.Validator.EmailAddress';EmailAddress.prototype.isValid=function(emailAdrress){if(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(emailAdrress)){return true;}
this.setMessage(this.getOption('invalidEmail'));return false;}
EmailAddress.prototype.getSetterOptions=function(){return{subject:'Định dạng theo kiểu địa chỉ Email'}}
EmailAddress.prototype.toJson=function(){return{name:this.__CLASS__}}
Nth.Validator.EmailAddress=EmailAddress;return EmailAddress;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Validator'],factory);}else{factory(Nth);}})(function(Nth){var Number=function(){Nth.Validator.call(this,{invalidNumber:'Giá trị phải là số'});}
Number.prototype=Object.create(Nth.Validator.prototype);Number.prototype.constructor=Number;Number.prototype.__CLASS__='Nth.Validator.Number';Number.prototype.isValid=function(number){if(isNaN(number)){this.setMessage(this.getOption('invalidNumber'));return false;}
return true;}
Number.prototype.getSetterOptions=function(){return{subject:'Định dạng theo kiểu số'}}
Number.prototype.toJson=function(){return{name:this.__CLASS__}}
Nth.Validator.Number=Number;return Number;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Validator'],factory);}else{factory(Nth);}})(function(Nth){var PhoneNumber=function(){Nth.Validator.call(this,{invalidPhoneNumber:'Số điện thoại không hợp lệ'});}
PhoneNumber.prototype=Object.create(Nth.Validator.prototype);PhoneNumber.prototype.constructor=PhoneNumber;PhoneNumber.prototype.__CLASS__='Nth.Validator.PhoneNumber';PhoneNumber.prototype.isValid=function(phoneNumber){if(phoneNumber.match(/^(0|\+84)\d{9,10}$/g)){return true;}
this.setMessage(this.getOption('invalidPhoneNumber'));return false;}
PhoneNumber.prototype.getSetterOptions=function(){return{subject:'Định dạng theo kiểu số điện thoại'}}
PhoneNumber.prototype.toJson=function(){return{name:this.__CLASS__}}
Nth.Validator.PhoneNumber=PhoneNumber;return PhoneNumber;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Validator'],factory);}else{factory(Nth);}})(function(Nth){var Unit=function(options){Nth.Validator.call(this,{fraction:',',invalidCurrency:'Giá trị phải là số'});this.mergeOptions(options);}
Unit.prototype=Object.create(Nth.Validator.prototype);Unit.prototype.constructor=Unit;Unit.prototype.__CLASS__='Nth.Validator.Unit';Unit.prototype.getFraction=function(){return this.getOption('fraction');}
Unit.prototype.getSeparator=function(){return this.getFraction()===','?'.':',';}
Unit.prototype.onHook=function(){var element=this.getElement();var inst=this;var value=element.getValue();var fraction=element.getOption('decimalFraction',this.getFraction());if(value){var numberHelper=new Nth.Helper.Number(value,fraction);element.setValue(numberHelper.addSeparator(this.getSeparator()).getNumber());}
element.getControl().getNode().on('keyup.Unit',function(){var value=this.value;if(value){if(!inst.isValid(value)){var self=this;$(this).attr('readonly',true);return Nth.Alert(inst.getMessage(),function(){while(value&&!inst.isValid(value)){value=value.substr(0,value.length-1);}
$(self).removeAttr('readonly').val(value);element.focus();});}
if(this.value){var numberHelper=new Nth.Helper.Number(this.value,inst.getFraction());this.value=numberHelper.addSeparator(inst.getSeparator()).getNumber();}}});element.getWrapper().getNode().on('nth.fb.export-data.Unit',function(e,item){item.decimalFraction=inst.getFraction();}).on('nth.fb.import-data.Unit',function(e,item){if(item.decimalFraction){element.setOption('decimalFraction',item.decimalFraction);}});element.setOption('decimalFraction',this.getFraction());return this;}
Unit.prototype.onUnhook=function(){var element=this.getElement();element.getControl().getNode().off('keyup.Unit');element.getWrapper().getNode().off('nth.fb.export-data.Unit nth.fb.import-data.Unit');return this;}
Unit.prototype.isValid=function(unit){var s1=this.getSeparator()==='.'?'\\.':',';var s2=s1===','?'\\.':',';var re=new RegExp('^([\\d'+s1+']+('+s2+'(\\d+)?)?)$');if(re.test(unit)){return true;}
this.setMessage(this.getOption('invalidCurrency'));return false;}
Unit.prototype.getSetterOptions=function(){var inst=this;var fieldset=new Nth.FormBuilder.Fieldset('unitv-fieldset');var row_1=new Nth.FormBuilder.Row('unitv-row-1',{parentComponent:fieldset});var col_1=new Nth.FormBuilder.Column('unitv-column-1',{parentComponent:row_1,wrapperAttributes:{'class':'col-xs-6'}});var fraction=new Nth.FormBuilder.Element.Select('unitv-format-option',{parentComponent:col_1,label:'Dấu phân cách cho phần lẻ',selectItemData:[[',','Dấu phẩy',true],['.','Dấu chấm']],value:this.getFraction()});fieldset.addComponent(row_1);fieldset.addComponent(col_1);fieldset.addComponent(fraction);return{subject:'Định dạng theo kiểu tiền tệ',fieldset:fieldset,beforeSave:function(){inst.setOption('fraction',fraction.getValue());}}}
Unit.prototype.toJson=function(){return{name:this.__CLASS__,options:{fraction:this.getOption('fraction')}}}
Nth.Validator.Unit=Unit;return Unit;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Validator','Nth/Helper/String'],factory);}else{factory(Nth);}})(function(Nth){var File=function(options){Nth.Validator.call(this,$.extend({},{tooManyFiles:'Chỉ có thể chọn tối đa {0} tệp tin',tooFewFiles:'Phải chọn ít nhất {0} tệp tin',defaultInvalidFileExtension:'Phần mở rộng của tệp tin không được phép',invalidFileExtension:'Tệp tin phải có phần mở rộng là {0}',fileSizeTooLarge:'Kích thước tối đa mỗi tệp tin là {0} bytes',fileSizeTooSmall:'Kích thước tối thiểu mỗi tệp tin là {0} bytes',maxLength:null,minLength:null,maxSize:null,minSize:null,validExtension:/[a-z]/i},options));this.input=$();}
File.prototype=Object.create(Nth.Validator.prototype);File.prototype.constructor=File;File.prototype.__CLASS__='Nth.Validator.File';File.prototype.setInput=function(input){var $input=$.getElement(input);this.input=$input.is(':file')?$input:$();return this;}
File.prototype.getInput=function(){return this.input;}
File.prototype.getChosen=function(){var $input=this.getInput();if(!$input.length){return[];}
return $input[0].files instanceof FileList?$input[0].files:[];}
File.prototype.getExtensionRegExpObject=function(){var validExtension=this.getOption('validExtension');if(validExtension instanceof RegExp){return validExtension;}else if(typeof validExtension==='string'){return new RegExp('^('+validExtension+')$','i');}
return /[a-z]/i;}
File.prototype.getInvalidExtensionMessage=function(){var message=this.getOption('defaultInvalidFileExtension');var validExtension=this.getOption('validExtension');if(typeof validExtension==='string'){var strHelper=new Nth.Helper.String();strHelper.setString(this.getOption('invalidFileExtension'));message=strHelper.sprintf(validExtension.split('|').join(', '))}
return message;}
File.prototype.isValid=function(input){this.setInput(input);var chosen=this.getChosen();if(!chosen.length){return true;}
var strHelper=new Nth.Helper.String();var maxLength=this.getOption('maxLength');if(chosen.length>maxLength){strHelper.setString(this.getOption('tooManyFiles'));this.setMessage(strHelper.sprintf(maxLength));return false;}
var minLength=this.getOption('minLength');if(chosen.length<minLength){strHelper.setString(this.getOption('tooFewFiles'));this.setMessage(strHelper.sprintf(minLength));return false;}
var maxSize=this.getOption('maxSize');var minSize=this.getOption('minSize');var extRexgObj=this.getExtensionRegExpObject();for(var i=0;i<chosen.length;i++){var f=chosen[i];var file=new Nth.File.File(f.name);if(!extRexgObj.test(file.getExtension())){this.setMessage(this.getInvalidExtensionMessage());return false;}
if(maxSize&&f.size>maxSize){strHelper.setString(this.getOption('fileSizeTooLarge'));this.setMessage(strHelper.sprintf(maxSize));return false;}
if(minSize&&f.size<minSize){strHelper.setString(this.getOption('fileSizeTooSmall'));this.setMessage(strHelper.sprintf(minSize));return false;}}
return true;}
Nth.Validator.File=File;return File;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Validator','Nth/Helper/String'],factory);}else{factory(Nth);}})(function(Nth){var Captcha=function(options){Nth.Validator.call(this,$.extend({},{url:null,invalidUrl:'Không thể kiểm tra mã xác nhận',invalidCaptchaCode:'Mã xác nhận chưa đúng'},options));}
Captcha.prototype=Object.create(Nth.Validator.prototype);Captcha.prototype.constructor=Captcha;Captcha.prototype.__CLASS__='Nth.Validator.Captcha';Captcha.prototype.isValid=function(done){if(typeof done!=='function'){done=function(){return this;}}
var inst=this;var url=this.getOption('url');if(!url){this.setMessage(this.getOption('invalidUrl'));done.call(this,false);return this;}
$.ajax({type:'GET',url:url,success:function(r){if(parseInt(r)===0){inst.setMessage(inst.getOption('invalidCaptchaCode'));return done.call(inst,false);}
return done.call(inst,true);},error:function(){inst.setMessage(inst.getOption('invalidUrl'));return done.call(inst,false);}});return this;}
Nth.Validator.Captcha=Captcha;return Captcha;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Options','Nth/AsyncTaskManager','jquery-ui'],factory);}else{factory(Nth);}})(function(Nth){var FormBuilder=function(options){var nth=new Nth.Nth();if(nth.versionCompare($.fn.jquery,'1.9.0')===-1){console.warn('FormBuilder plugin required jquery version equal to 1.9.0 or higher');return;}
Nth.Options.call(this,{siteRoot:'',edittingFormClass:'form-editting',formWrapperClass:'form-wrapper',componentRowClass:'row',componentColumnClass:'col',componentDisabledClass:'disabled',elementWrapperClass:'form-group',elementLabelClass:'control-label',elementLabelContentClass:'label-content',elementErrorMessageClass:'form-error',elementRequiredLabelClass:'mandatory',elementRequiredLabelContent:'(*)',elementClass:'form-control',activeRowClass:'active',activeColumnClass:'active',activeElementClass:'active',columnReferPropertySelectItems:'',elementErrorClass:'has-error',defaultColumnSizeClass:'col-md-4',componentNamePrefix:'',controlIdPrefix:'_fc',mandatoryTitle:'Trường bắt buộc',messageNotifier:1});this.mergeOptions(options);this.asyncTaskManager=new Nth.AsyncTaskManager({debug:false});}
FormBuilder.prototype=Object.create(Nth.Options.prototype);FormBuilder.prototype.constructor=FormBuilder;FormBuilder.prototype.__CLASS__='Nth.FormBuilder.FormBuilder';FormBuilder.prototype.getAsyncTaskManager=function(){return this.asyncTaskManager;}
FormBuilder.prototype.serializableData=function(data){return $.isPlainObject(data)||$.isArray(data)||$.isNumeric(data)||$.type(data)==='string'||$.type(data)==='boolean'||data===null;}
FormBuilder.prototype.encodeXmlData=function(data){if(!this.serializableData(data)){throw'Encoding failed';}
return encodeURIComponent(JSON.stringify(data));}
FormBuilder.prototype.decodeXmlData=function(data){if(typeof data==='string'&&data){try{return $.parseJSON(decodeURIComponent(data));}catch(e){console.log(e);return $.parseJSON(unescape(data));}}
return data;}
FormBuilder.prototype.getXmlObject=function(obj,child){if(obj instanceof $){return obj;}else if(typeof obj==='string'){var $doc=$($.parseXML(obj));return typeof child==='string'&&child?$doc.children(child):$doc;}else if(obj&&$.type(obj)==='object'){return $(obj);}else{return $();}}
Nth.FormBuilder.__getInstance=function(){if(!(Nth.FormBuilder.__instance instanceof FormBuilder)){Nth.FormBuilder.__instance=new FormBuilder();}
return Nth.FormBuilder.__instance;}
Nth.FormBuilder.FormBuilder=FormBuilder;return FormBuilder;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Options','Nth/ReflectionClass','Nth/Dom/Node','Nth/FormBuilder/FormBuilder','Nth/FormBuilder/DrawingBoard','Nth/FormBuilder/ToolPalette','Nth/FormBuilder/PropertySetter'],factory);}else{factory(Nth);}})(function(Nth){var Component=function(name,options){Nth.Options.call(this,$.extend(true,{idPrefix:'_component_',wrapperNodeName:'div',parentComponent:null},options));if(name===true){name=this.generateId();}else{name=this.getConfigParam('componentNamePrefix')+name;}
var $div=$('<'+this.getOption('wrapperNodeName')+'/>',$.extend(true,{id:name},this.getOption('wrapperAttributes')));this.wrapper=new Nth.Dom.Node($div);this.message=null;if(this.getOption('hide')){$div.hide();}}
Component.prototype=Object.create(Nth.Options.prototype);Component.prototype.constructor=Component;Component.prototype.__CLASS__='Nth.FormBuilder.Component';Component.prototype.init=function(){return this;}
Component.prototype.trigger=function(evt,args){this.getWrapper().getNode().trigger(evt,args||[this]);return this;}
Component.prototype.generateId=function(){var $container=$('body');if(this.hasDrawingBoard()){$container=this.getDrawingBoard().getContainer();}
var fieldset=this.getFieldsetContainer();var prefix=this.getConfigParam('componentNamePrefix')+this.getOption('idPrefix');if($container.length&&fieldset){var i=1;var id=prefix+i
while($container.find('#'+id).length||fieldset.existsComponent(id)||fieldset.getUsedIds().hasItem(id)){id=prefix+ ++i;}
this.setCurrentIndex(i);fieldset.getUsedIds().addItem(id);return id;}
return prefix+new Date().getTime()+'_'+Math.round(Math.random()*10);}
Component.prototype.getConfigParam=function(name){if(this.existsOption(name)){return this.getOption(name)}
var fieldset=this.getFieldsetContainer();if(fieldset&&fieldset.existsOption(name)){return fieldset.getOption(name);}
return Nth.FormBuilder.__getInstance().getOption(name);}
Component.prototype.setConfigParam=function(name,value){this.setOption(name,value);return this;}
Component.prototype.getCurrentIndex=function(){return this.currentIndex||'';}
Component.prototype.setCurrentIndex=function(currentIndex){this.currentIndex=currentIndex;return this;}
Component.prototype.focus=function(){return this;}
Component.prototype.blur=function(){return this;}
Component.prototype.hide=function(){this.getWrapper().getNode().hide().trigger('nth.fb.hidden');return this;}
Component.prototype.show=function(){this.getWrapper().getNode().show().trigger('nth.fb.shown');return this;}
Component.prototype.enable=function(){this.getWrapper().getNode().removeClass(this.getConfigParam('componentDisabledClass'));return this;}
Component.prototype.disable=function(){this.getWrapper().getNode().addClass(this.getConfigParam('componentDisabledClass'));return this;}
Component.prototype.getMessage=function(){return this.message;}
Component.prototype.setMessage=function(message){this.message=message;return this;}
Component.prototype.hasMessage=function(){return!!this.getMessage();}
Component.prototype.showMessage=function(){var $error=this.getWrapper().getNode().children('.'+this.getConfigParam('elementErrorMessageClass'));if(!$error.length){$error=$('<p>',{'class':this.getConfigParam('elementErrorMessageClass')});}
$error.html(this.getMessage());this.getWrapper().getNode().addClass(this.getConfigParam('elementErrorClass')).append($error);this.focus();return this;}
Component.prototype.hideMessage=function(){this.getWrapper().getNode().children('.'+this.getConfigParam('elementErrorMessageClass')).remove();this.getWrapper().getNode().removeClass(this.getConfigParam('elementErrorClass'));this.blur();return this;}
Component.prototype.notifyMessage=function(){var messageNotifier=this.getConfigParam('messageNotifier');if(messageNotifier===1){var inst=this;return Nth.Alert(this.getMessage(),function(){inst.focus();});}
return this.showMessage();}
Component.prototype.getWrapper=function(){return this.wrapper;}
Component.prototype.getName=function(){return this.getWrapper().getNode().attr('id');}
Component.prototype.setName=function(name){this.getWrapper().getNode().attr('id',name);return this;}
Component.prototype.actived=function(){return false;}
Component.prototype.active=function(){return this;}
Component.prototype.getToolbox=function(){return this.toolbox;}
Component.prototype.setToolbox=function(toolbox){this.toolbox=toolbox;return this;}
Component.prototype.getDrawingBoard=function(){return this.getOption('drawingBoard');}
Component.prototype.setDrawingBoard=function(drawingBoard){if(!(drawingBoard instanceof Nth.FormBuilder.DrawingBoard)){throw'"drawingBoard" argument must be an instanceof FormBuilder.DrawingBoard';}
this.setOption('drawingBoard',drawingBoard);return this;}
Component.prototype.hasDrawingBoard=function(){return this.getDrawingBoard()instanceof Nth.FormBuilder.DrawingBoard;}
Component.prototype.getToolPalette=function(){return this.getOption('toolPalette');}
Component.prototype.setToolPalette=function(toolPalette){if(!(toolPalette instanceof Nth.FormBuilder.ToolPalette)){console.warn('The argument was passed must be an instance of FormBuilder.ToolPalette');return this;}
this.setOption('toolPalette',toolPalette);return this;}
Component.prototype.hasToolPalette=function(){return this.getToolPalette()instanceof Nth.FormBuilder.ToolPalette;}
Component.prototype.getParentComponent=function(){return this.getOption('parentComponent');}
Component.prototype.setParentComponent=function(component){if(!(component instanceof Component)){console.warn('The argument was passed must be an instanceof Nth.FormBuilder.Component');return this;}
this.setOption('parentComponent',component);return this;}
Component.prototype.hasParentComponent=function(){return this.getParentComponent()instanceof Component;}
Component.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add component to DrawingBoard');return;}
var component=new Component(true,this.getOptionsCopy());this.getDrawingBoard().getFieldset().addComponent(component);}
Component.prototype.getChilds=function(){var inst=this;var childs=[];var fieldset=this.getFieldsetContainer();if(fieldset){$.each(fieldset.getComponents(),function(i,c){if(!c.hasParentComponent()){return;}
if(c.getParentComponent().getName()===inst.getName()){childs.push(c);}});}
return childs;}
Component.prototype.getActivedChilds=function(){return this.getChilds().filter(function(c){return c.actived();});}
Component.prototype.getLastActivedChild=function(){var childs=this.getActivedChilds();if(childs.length){return childs[childs.length-1];}
return null}
Component.prototype.getOptionsCopy=function(){var options=$.extend({drawingBoard:this.getDrawingBoard(),toolPalette:this.getToolPalette(),parentComponent:null,addingMethod:null,addingRelative:null},this.getOptions());if(this.hasParentComponent()){options.parentComponent=this.getParentComponent();options.addingRelative=this.getParentComponent().getWrapper().getNode();}
if(this.hasToolPalette()){var setting=this.getToolPalette().getComponentSetting();options.addingMethod=setting.typeToAdd;}
return options;}
Component.prototype.getCreatorDraggableOptions=function(){var inst=this;var drawingBoard=this.getDrawingBoard();return{cursor:'move',connectToSortable:null,helper:'clone',stop:function(){if(drawingBoard.getDragging().length){inst.copyToDrawingBoard();drawingBoard.removeDragging();}}}}
Component.prototype.getCreatorContainer=function(){return $.getElement(this.getOption('creatorContainer'));}
Component.prototype.createCreator=function(){var $creatorContainer=this.getCreatorContainer();if(!$creatorContainer.length){console.warn('Can\'t not create component creator');return;}
var inst=this;var $wrapper=$('<div/>',{'class':'creator-wrapper'});var $icon=$('<span/>',{'class':'creator-icon '+this.getOption('creatorIconClass')});var $label=$('<a/>',{'class':'creator-label','href':'javascript:;'}).html(this.getOption('creatorLabel'));$creatorContainer.append($wrapper.append($icon,$label));if(this.hasDrawingBoard()){$wrapper.draggable(this.getCreatorDraggableOptions());$wrapper.on('click',function(){inst.copyToDrawingBoard();});}
return $wrapper.disableSelection();}
Component.prototype.getDomNode=function(){var wrapper=this.getWrapper();return wrapper?wrapper.getNode():$();}
Component.prototype.getFieldsetContainer=function(){if(this.hasDrawingBoard()){var fieldset=this.getDrawingBoard().getFieldset();if(fieldset instanceof Nth.FormBuilder.Fieldset){return fieldset;}}
var component=this.getParentComponent();while(component instanceof Component){if(component instanceof Nth.FormBuilder.Fieldset){return component;}
component=component.getParentComponent();}
return null;}
Component.prototype.notMe=function(name){if(name instanceof Component){name=name.getName();}
return this.getName()!==name;}
Component.prototype.hasNameExists=function(name){var fieldset=this.getFieldsetContainer();if(fieldset){return fieldset.existsComponent(name);}
return false;}
Component.prototype.hasElementIdExists=function(id){var fieldset=this.getFieldsetContainer();if(fieldset){return fieldset.getDomNode().find('.'+this.getConfigParam('elementWrapperClass')+' #'+id).length;}
return false;}
Component.prototype.hasElementNameExists=function(name){var fieldset=this.getFieldsetContainer();if(fieldset){return fieldset.getDomNode().find('[name="'+name+'"]').length;}
return false;}
Component.prototype.hasColumnReferExists=function(columnRefer){var result=false;var fieldset=this.getFieldsetContainer();if(fieldset&&columnRefer){var inst=this;$.each(fieldset.getComponents(),function(i,c){if(inst.notMe(c.getName())&&c.getOption('columnRefer')===columnRefer){result=true;return false;}});}
return result;}
Component.prototype.getPropertySetters=function(){if(!this.hasDrawingBoard()){return[];}
var propertySetter=new Nth.FormBuilder.PropertySetter(this);return[propertySetter.getNameSetter(),propertySetter.getWrapperClassSetter(),propertySetter.getWrapperStyleSetter()]}
Component.prototype.loadProperty=function(){if(this.hasToolPalette()){this.getToolPalette().loadComponentProperty(this)}
return this;}
Component.prototype.isValid=function(options){if(typeof options==='function'){options={done:options}}
options=new Nth.Options($.extend({},{start:function(){},done:function(){}},options));this.setMessage(null);options.getOption('start').call(this);options.getOption('done').call(this);return this;}
Component.prototype.toJson=function(){var rc=new Nth.ReflectionClass(this.__CLASS__);var json={name:this.getName(),type:rc.getShortName(),'class':rc.getName(),options:this.cloneOptions()};json.options.active=this.actived();json.options.wrapperAttributes=this.getWrapper().getAttributes();return json;}
Component.prototype.toXml=function(){var fb=Nth.FormBuilder.__getInstance();var json=this.toJson();delete json.options.addingMethod;delete json.options.addingRelative;var $xml=$('<component/>',{name:json.name,type:json.type,'class':json['class']});var $options=$('<options/>');$.each(json.options,function(name,value){try{var $option=$('<option/>',{name:name}).html(fb.encodeXmlData(value));$options.append($option);}catch(e){console.log('Encode '+name+' option failed');return true;}});$xml.append($options);var $childrens=$('<childrens/>');$.each(this.getChilds(),function(i,component){$childrens.append(component.toXml());});$xml.append($childrens);return $xml.prop('outerHTML');}
Nth.FormBuilder.Component=Component;return Component;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Options','Nth/FormBuilder/FormBuilder'],factory);}else{factory(Nth);}})(function(Nth){var ToolPalette=function(options){Nth.Options.call(this,{container:'',tabContainer:'',settingContainer:'',addElementTabText:'Add Element',elementPropertyTabText:'Element Property',fieldsetPropertyTabText:'Fieldset Property',addComponentAreaId:'add-element',componentPropertyAreaId:'element-property',fieldsetPropertyAreaId:'fieldset-property',componentCreators:['Text','Label','Textarea','Checkbox','DateTime','Radio','Select','List','Table','Row','Column'],componentSettingLabel:'Settings',drawingBoard:null});this.mergeOptions(options);this.tab=this.createTab();}
ToolPalette.prototype=Object.create(Nth.Options.prototype);ToolPalette.prototype.constructor=ToolPalette;ToolPalette.prototype.__CLASS__='Nth.FormBuilder.ToolPalette';ToolPalette.prototype.init=function(){if(this.hasDrawingBoard()){var fieldset=this.getDrawingBoard().getFieldset();if(fieldset){fieldset.loadProperty();}}
this.createComponentCreators();}
ToolPalette.prototype.getTab=function(){return this.tab;}
ToolPalette.prototype.getDrawingBoard=function(){return this.getOption('drawingBoard');}
ToolPalette.prototype.setDrawingBoard=function(drawingBoard){if(!(drawingBoard instanceof Nth.FormBuilder.DrawingBoard)){throw'"drawingBoard" argument must be an instanceof Nth.FormBuilder.DrawingBoard';}
this.setOption('drawingBoard',drawingBoard);return this;}
ToolPalette.prototype.hasDrawingBoard=function(){return this.getDrawingBoard()instanceof Nth.FormBuilder.DrawingBoard;}
ToolPalette.prototype.getContainer=function(){return $.getElement(this.getOption('container'));}
ToolPalette.prototype.getTabContainer=function(){return $.getElement(this.getOption('tabContainer'));}
ToolPalette.prototype.getAddComponentArea=function(){return this.getOption('addComponentAreaId')?$('#'+this.getOption('addComponentAreaId')):$();}
ToolPalette.prototype.getComponentPropertyArea=function(){return this.getOption('componentPropertyAreaId')?$('#'+this.getOption('componentPropertyAreaId')):$();}
ToolPalette.prototype.getFieldsetPropertyArea=function(){return this.getOption('fieldsetPropertyAreaId')?$('#'+this.getOption('fieldsetPropertyAreaId')):$();}
ToolPalette.prototype.createComponentCreators=function(){var $addElementArea=this.getAddComponentArea();var componentCreators=this.getOption('componentCreators');if(!$addElementArea.length||!componentCreators){throw'Can\'t create element creators';}
var $creatorList=$('<div/>',{'class':'creator-list clearfix'});for(var i in componentCreators){var creatorClass=componentCreators[i];var name=creatorClass+'_creator';var options={creatorContainer:$creatorList,drawingBoard:this.getDrawingBoard(),toolPalette:this}
if(typeof Nth.FormBuilder[creatorClass]==='function'&&Nth.FormBuilder[creatorClass].prototype instanceof Nth.FormBuilder.Component){var component=new Nth.FormBuilder[creatorClass](name,options);component.createCreator();}else if(typeof Nth.FormBuilder.Element[creatorClass]==='function'&&Nth.FormBuilder.Element[creatorClass].prototype instanceof Nth.FormBuilder.Element){var element=new Nth.FormBuilder.Element[creatorClass](name,options);element.createCreator();}else{console.warn('FormBuilder does not support "'+componentCreators[i]+'" element');continue;}}
$creatorList.disableSelection();$addElementArea.append($creatorList,this.createComponentSettingArea());}
ToolPalette.prototype.createTab=function(){var $tabContainer=this.getTabContainer();if(!$tabContainer.length){throw'Can\'t create tab. "tabContainer" seem not set';}
var $nav=$('<ul/>',{'class':"nav nav-tabs",'role':"tablist"});var $addElementItem=$('<li/>',{'role':"presentation",'class':"active"});$addElementItem.append($('<a/>',{'href':"#"+this.getOption('addComponentAreaId'),'aria-controls':this.getOption('addComponentAreaId'),'role':"tab",'data-toggle':"tab"}).html('<i class="fa fa-plus"></i> '+this.getOption('addElementTabText')));var $elementPropertyItem=$('<li/>',{'role':"presentation"});$elementPropertyItem.append($('<a/>',{'href':"#"+this.getOption('componentPropertyAreaId'),'aria-controls':this.getOption('componentPropertyAreaId'),'role':"tab",'data-toggle':"tab"}).html('<i class="fa fa-edit"></i> '+this.getOption('elementPropertyTabText')));var $fieldsetPropertyItem=$('<li/>',{'role':"presentation"});$fieldsetPropertyItem.append($('<a/>',{'href':"#"+this.getOption('fieldsetPropertyAreaId'),'aria-controls':this.getOption('fieldsetPropertyAreaId'),'role':"tab",'data-toggle':"tab"}).html('<i class="fa fa-edit"></i> '+this.getOption('fieldsetPropertyTabText')));$nav.append($addElementItem,$elementPropertyItem,$fieldsetPropertyItem);var $tabContent=$('<div/>',{'class':"tab-content"});$tabContent.append($('<div/>',{'class':"tab-pane fade in active",'id':this.getOption('addComponentAreaId')}));$tabContent.append($('<div/>',{'class':"tab-pane fade in",'id':this.getOption('componentPropertyAreaId')}));$tabContent.append($('<div/>',{'class':"tab-pane fade in",'id':this.getOption('fieldsetPropertyAreaId')}));$tabContainer.html(null).append($nav,$tabContent);return $nav.tab();}
ToolPalette.prototype.createComponentSettingArea=function(){var $wrapper=$('<div/>',{id:'component-setting','class':'component-setting clearfix'});var $h5=$('<h5/>').html(this.getOption('componentSettingLabel'));var $table=$('<table/>',{'class':'settings'});var $tr1=$('<tr/>');var $td11=$('<td/>').html('Location added');var $before=$('<input/>',{type:'radio',id:'setting-position-before',name:'setting-position-to-add',value:'before'})
var $beforeLabel=$('<label/>',{'for':'setting-position-before'}).html('Above');var $after=$('<input/>',{type:'radio',id:'setting-position-after',name:'setting-position-to-add',value:'after',checked:true});var $afterLabel=$('<label/>',{'for':'setting-position-after'}).html('Below&nbsp;&nbsp;');var $td12=$('<td/>').append($after,$afterLabel,$before,$beforeLabel);$tr1.append($td11,$td12);var $tr2=$('<tr/>');var $td21=$('<td/>').html('Type to add');var $prepend=$('<input/>',{type:'radio',id:'setting-type-prepend',name:'setting-type-to-add',value:'prepend'})
var $prependLabel=$('<label/>',{'for':'setting-type-prepend'}).html('Prepend');var $append=$('<input/>',{type:'radio',id:'setting-type-append',name:'setting-type-to-add',value:'append',checked:true});var $appendLabel=$('<label/>',{'for':'setting-type-append'}).html('Append&nbsp;&nbsp;');var $td22=$('<td/>').append($append,$appendLabel,$prepend,$prependLabel);$tr2.append($td21,$td22).hide();return $wrapper.append($h5,$table.append($tr1,$tr2));}
ToolPalette.prototype.getComponentSetting=function(){var $settingTable=this.getContainer().find('#component-setting table');return{positionToAdd:$settingTable.find('input[name=setting-position-to-add]:checked').val(),typeToAdd:$settingTable.find('input[name=setting-type-to-add]:checked').val()}}
ToolPalette.prototype.loadComponentProperty=function(component,tabIndex){if(!(component instanceof Nth.FormBuilder.Component)){throw"The argument was passed must be an instance of Nth.FormBuilder.Component class";}
var $table=$('<table/>',{'class':'element-property'});var $thead=$('<thead/>');var $tr=$('<tr/>');var $th=$('<th/>',{'colspan':2}).html(component.getOption('creatorLabel')+' property');var $tbody=$('<tbody/>');$table.append($thead.append($tr.append($th)),$tbody);$.each(component.getPropertySetters(),function(i,options){var $tr=$('<tr/>');var $div=$('<div/>',{'class':'property-name'}).html(options.name);var $td1=$('<td/>').html($div);var $td2=$('<td/>').html(options.setter);$tbody.append($tr.append($td1,$td2));});if(tabIndex===undefined||tabIndex===1){this.setOption('currentComponentProperty',component);this.getComponentPropertyArea().html($table);this.activeTabByIndex(1);}else if(tabIndex===2){this.setOption('currentFieldsetProperty',component);this.getFieldsetPropertyArea().html($table);this.activeTabByIndex(2);}
return this;}
ToolPalette.prototype.activeTabByIndex=function(index){this.getTab().find('li').eq(index).find('a').tab('show');return this;}
ToolPalette.prototype.deleteComponent=function(component){var currentComponent=this.getOption('currentComponentProperty');if(currentComponent instanceof Nth.FormBuilder.Component&&currentComponent.getName()==component.getName()){this.getComponentPropertyArea().html(null);this.activeTabByIndex(0);}
return this;}
Nth.FormBuilder.ToolPalette=ToolPalette;return ToolPalette;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Options','Nth/FormBuilder/Fieldset'],factory);}else{factory(Nth);}})(function(Nth){var DrawingBoard=function(options){var nth=new Nth.Nth();if(typeof $.ui==='undefined'||nth.versionCompare($.ui.version,'1.11.4')===-1){console.warn('FormBuider DrawingBoard class required jquery ui version equal to 1.11.4 or higher');return;}
Nth.Options.call(this,{xmlConstruction:null,htmlConstruction:null,container:'',toolPalette:null});this.mergeOptions(options);}
DrawingBoard.prototype=Object.create(Nth.Options.prototype);DrawingBoard.prototype.constructor=DrawingBoard;DrawingBoard.prototype.__CLASS__='Nth.FormBuilder.DrawingBoard';DrawingBoard.prototype.init=function(){var fieldset=null;if(this.getOption('xmlConstruction')){fieldset=Nth.FormBuilder.Fieldset.__fromXml(this.getOption('xmlConstruction'),{drawingBoard:this,toolPalette:this.getToolPalette()});}else if(this.getOption('htmlConstruction')){var convertor=new Nth.FormBuilder.Convertor(this.getOption('htmlConstruction'));fieldset=convertor.toFieldset({drawingBoard:this,toolPalette:this.getToolPalette()});}else{fieldset=new Nth.FormBuilder.Fieldset(true,{drawingBoard:this,toolPalette:this.getToolPalette()});var row=new Nth.FormBuilder.Row(true,{drawingBoard:this,toolPalette:this.getToolPalette(),parentComponent:fieldset});var column=new Nth.FormBuilder.Column(true,{drawingBoard:this,toolPalette:this.getToolPalette(),parentComponent:row,active:true});fieldset.addComponent(row).addComponent(column);}
this.setFieldset(fieldset);this.getContainer().html(fieldset.getDomNode());return this;}
DrawingBoard.prototype.getToolPalette=function(){return this.getOption('toolPalette');}
DrawingBoard.prototype.setToolPalette=function(toolPalette){if(!(toolPalette instanceof Nth.FormBuilder.ToolPalette)){console.warn('The argument was passed must be an instance of FormBuilder.ToolPalette');return this;}
this.setOption('toolPalette',toolPalette);return this;}
DrawingBoard.prototype.hasToolPalette=function(){return this.getToolPalette()instanceof Nth.FormBuilder.ToolPalette;}
DrawingBoard.prototype.getFieldset=function(){return this.fieldset;}
DrawingBoard.prototype.setFieldset=function(fieldset){if(!(fieldset instanceof Nth.FormBuilder.Fieldset)){console.warn('The argument was passed must be an instance of FormBuilder.Fieldset');return this;}
this.fieldset=fieldset;return this;}
DrawingBoard.prototype.getContainer=function(){return $.getElement(this.getOption('container'));}
DrawingBoard.prototype.getDragging=function(){return this.getContainer().find('.ui-draggable-dragging');}
DrawingBoard.prototype.removeDragging=function(){this.getDragging().remove();return this;}
DrawingBoard.prototype.removeActiveComponents=function(){var fieldset=this.getFieldset();var components=fieldset.getActiveComponents();if(components.length){Nth.Confirm('Xóa '+components.length+' phần tử và con của '+(components.length>1?'chúng':'nó')+' ra khỏi biểu mẫu?',function(choosed){if(Nth.Confirm.OK===choosed){fieldset.removeComponent(components);}});return this;}
Nth.Alert('Không có phần tử nào được chọn!');return this;}
Nth.FormBuilder.DrawingBoard=DrawingBoard;return DrawingBoard;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/FormBuilder/Component'],factory);}else{factory(Nth);}})(function(Nth){var Column=function(name,options){Nth.FormBuilder.Component.call(this,name,$.extend(true,{idPrefix:'_col_',creatorIconClass:'icon column',creatorLabel:'Column',active:false},options));var wrapperAttributes=this.getOption('wrapperAttributes',{});if(!wrapperAttributes['class']||!wrapperAttributes['class'].match(/col\-(xs|sm|md|lg)\-[1-9]{1,2}/)){this.getWrapper().getNode().addClass(this.getConfigParam('defaultColumnSizeClass'));}
this.getWrapper().getNode().addClass(this.getConfigParam('componentColumnClass'));if(this.hasDrawingBoard()){var inst=this;var $wrapper=this.getWrapper().getNode();this.setToolbox(this.createToolbox());$wrapper.prepend(this.getToolbox()).sortable({items:'.'+this.getConfigParam('elementWrapperClass'),greedy:false,connectWith:'.'+this.getConfigParam('componentColumnClass'),placeholder:'fb-placeholder',stop:function(e,ui){var fieldset=inst.getDrawingBoard().getFieldset();var element=fieldset.findElement(ui.item);if(element){var parentComponent=element.findParentColumn();if(parentComponent){element.setParentComponent(parentComponent);}}}}).on('click',function(e){e.preventDefault();e.stopPropagation();var actived=inst.actived();if(!e.ctrlKey){inst.getDrawingBoard().getFieldset().inactiveColumns();}
if(!actived){inst.active();}});if(this.getOption('active')){this.active();}}}
Column.prototype=Object.create(Nth.FormBuilder.Component.prototype);Column.prototype.constructor=Column;Column.prototype.__CLASS__='Nth.FormBuilder.Column';Column.prototype.setName=function(name){if(this.hasDrawingBoard()){this.getToolbox().attr({id:'_prop_of_'+name,title:'Edit property of '+name}).find('span').html('#'+name);}
return Nth.FormBuilder.Component.prototype.setName.call(this,name);}
Column.prototype.actived=function(){return this.getWrapper().getNode().hasClass(this.getConfigParam('activeColumnClass'));}
Column.prototype.active=function(){return this.getWrapper().getNode().addClass(this.getConfigParam('activeColumnClass'));}
Column.prototype.inactiveOthers=function(){if(this.hasDrawingBoard()){this.getDrawingBoard().getFieldset().inactiveColumns();this.active();}
return this;}
Column.prototype.reset=function(cb){$.each(this.queryElements(),function(i,element){if($.isFunction(cb)&&false===cb.call(element)){return;}
element.reset();});return this;}
Column.prototype.queryElements=function(){var elements=[]
$.each(this.getChilds(),function(i,child){if(child instanceof Nth.FormBuilder.Element){elements.push(child);}});return elements;}
Column.prototype.getCreatorDraggableOptions=function(){var options=Nth.FormBuilder.Component.prototype.getCreatorDraggableOptions.call(this);if(this.hasDrawingBoard()){var id=this.getDrawingBoard().getContainer().attr('id');var wrapperNodeName=this.getDrawingBoard().getFieldset().getOption('wrapperNodeName')
options.connectToSortable='#'+id+' '+wrapperNodeName+' .'+this.getConfigParam('componentRowClass');}
return options;}
Column.prototype.createToolbox=function(){var inst=this;var id=this.getWrapper().getAttribute('id');var $wrapper=$('<div/>',{id:'_prop_of_'+id,'class':'col-property',title:'Edit property of '+id});var $label=$('<span/>').html('#'+id);$wrapper.on('click',function(e){e.preventDefault();if(inst.actived()){e.stopPropagation();}
inst.loadProperty();}).draggable({axis:'x',containment:this.getWrapper().getNode(),create:function(){$(this).css({position:'absolute'});},start:function(){$(this).css({right:'auto'});}});return $wrapper.append($label);}
Column.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add Column component to DrawingBoard');return;}
var options=$.extend({},{active:true},this.getOptionsCopy());var column=new Column(true,options);this.getDrawingBoard().getFieldset().addComponent(column);column.inactiveOthers();return this;}
Column.prototype.getOptionsCopy=function(){var options=Nth.FormBuilder.Component.prototype.getOptionsCopy.call(this);if(this.hasDrawingBoard()){var drawingBoard=this.getDrawingBoard();var $dragging=drawingBoard.getDragging();if($dragging.length){options.addingRelative=$dragging;options.addingMethod='replaceWith';options.parentComponent=this.getParentComponentByNode($dragging);}else{if(!options.parentComponent){var rows=drawingBoard.getFieldset().queryRows();var activeRow=null;$.each(rows,function(i,row){if(row.actived()){activeRow=row;}});options.parentComponent=activeRow?activeRow:rows[rows.length-1];options.addingRelative=options.parentComponent.getDomNode();}
var sibling=options.parentComponent.getLastActivedChild();if(sibling){var setting=this.getToolPalette().getComponentSetting();options.addingRelative=sibling.getDomNode();options.addingMethod=setting.positionToAdd;}}}
return options;}
Column.prototype.getParentComponentByNode=function($node){if(!this.hasDrawingBoard()||!$node.length){return null;}
var drawingBoard=this.getDrawingBoard();var name=$node.closest('.'+this.getConfigParam('componentRowClass')).attr('id');return drawingBoard.getFieldset().getComponent(name);}
Column.prototype.findParentRow=function(){var fieldset=this.getFieldsetContainer();if(fieldset){var name=this.getWrapper().getNode().closest('.'+this.getConfigParam('componentRowClass')).attr('id');return fieldset.getComponent(name);}
return null;}
Column.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null},options);var fb=Nth.FormBuilder.__getInstance();var $column=fb.getXmlObject(xml,'component');var name=$column.attr('name');$column.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});var column=new Column(name,options);var childrens=[];var $childrens=$column.children('childrens');$childrens.children('component').each(function(){var rc=new Nth.ReflectionClass($(this).attr('class'));var component=rc.getClass().__fromXml(this,{drawingBoard:options.drawingBoard,toolPalette:options.toolPalette,parentComponent:column,autoInit:false});childrens.push(component);});var fieldset=column.getFieldsetContainer();if(fieldset){$.each(childrens.sort(function(a,b){return a.getOption('orderIndex')-b.getOption('orderIndex');}),function(i,component){fieldset.addComponent(component);});}
return column;}
Nth.FormBuilder.Column=Column;return Column;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/FormBuilder/Fieldset'],factory);}else{factory(Nth);}})(function(Nth){var Convertor=function(html,data){this.html=html;this.data=data;}
Convertor.prototype.getHtml=function(){return this.html;}
Convertor.prototype.setHtml=function(html){this.html=html;return this;}
Convertor.prototype.getData=function(){return this.data;}
Convertor.prototype.setData=function(data){this.data=data;return this;}
Convertor.prototype.getValidatorOptionByDataType=function(dataType){var role={CHAR:null,NUMBER:{name:'Nth.Validator.Number'},UNITDOT:{name:'Nth.Validator.Unit',options:{separator:'.'}},UNITCOM:{name:'Nth.Validator.Unit',options:{separator:','}},PHONE:{name:'Nth.Validator.PhoneNumber'},EMAIL:{name:'Nth.Validator.EmailAddress'},CMND:{name:'Nth.Validator.Cmnd'},DDMMYYYY:{name:'Nth.Validator.Date',options:{format:'d/m/Y'}},MMYYYY:{name:'Nth.Validator.Date',options:{format:'m/Y'}},YYYY:{name:'Nth.Validator.Date',options:{format:'Y'}},DATE:{name:'Nth.Validator.Date',options:{format:['Y','m/Y','d/m/Y']}}}
return role[dataType];}
Convertor.prototype.toData=function(){var data=this.getData();var fb=Nth.FormBuilder.__getInstance();if(data.indexOf('[{')!==0){return data;}
var result={name:'auto_convert',data:[]}
$.each(JSON.parse(data),function(i,row){var item={name:fb.getOption('componentNamePrefix')+'name_of_'+row['id'],value:row['value'],columnRefer:row['data-column-id']}
if(null!==row['checked']){item['checked']=row['checked'];}
if(null!==row['optiontext']){item['selectedText']=row['optiontext'];}
result.data.push(item);});return result;}
Convertor.prototype.getElementClassByDom=function($eform){if(!$eform.length){return null;}
var clsMap={checkbox:'Checkbox',date:'Date',file:'File',label:'Label',list:'List',radio:'Radio',combobox:'Select',table:'Table',textbox:'Text',textarea:'Textarea'}
var clsName=null;$.each(clsMap,function(type,cls){if($eform.hasClass(type)){clsName=cls;return false;}});return clsName;}
Convertor.prototype.createCheckbox=function($eform,options){if(!$eform.length){return null;}
var $label=$eform.find('label').clone();$label.find('.mandatory').remove();var $control=$eform.find('input[type=checkbox]');var id=$control.attr('id');var name='name_of_'+id;options=$.extend(true,{parentComponent:null,label:$label.html(),controlAttributes:{id:id,value:$control.val()}},options);if($control.attr('valid-required')){options.required=Number($control.attr('valid-required'));}
if($control.is(':checked')){options.controlAttributes.checked=true;}
if($control.attr('data-column-id')){options.columnRefer=Number($control.attr('data-column-id'));}
return new Nth.FormBuilder.Element.Checkbox(name,options);}
Convertor.prototype.createDate=function($eform,options){if(!$eform.length){return null;}
var $label=$eform.find('label').clone();$label.find('.mandatory').remove();var $control=$eform.find('input[type=text]');var id=$control.attr('id');var name='name_of_'+id;options=$.extend(true,{parentComponent:null,label:$label.html(),controlAttributes:{id:id}},options);if($control.val()){options.defaultValue=$control.val();}
var dataType=$control.attr('valid-datatype');var validatorOption=this.getValidatorOptionByDataType(dataType);if(validatorOption){options.validators=[validatorOption];}
if($control.attr('valid-required')){options.required=Number($control.attr('valid-required'));}
if($control.attr('data-column-id')){options.columnRefer=Number($control.attr('data-column-id'));}
return new Nth.FormBuilder.Element.Date(name,options);}
Convertor.prototype.createLabel=function($eform,options){if(!$eform.length){return null;}
var $label=$eform.find('h3');var name=$label.attr('id');options=$.extend(true,{parentComponent:null,label:$label.html(),labelAttributes:{style:$label.attr('style')}},options);return new Nth.FormBuilder.Element.Label(name,options);}
Convertor.prototype.createList=function($eform,options){if(!$eform.length){return null;}
var $label=$eform.find('label').clone();$label.find('.mandatory').remove();var $control=$eform.find('ul');var id=$control.attr('id');var name='name_of_'+id;options=$.extend(true,{parentComponent:null,label:$label.html(),minRows:Number($control.attr('min-rows')),maxRows:Number($control.attr('max-rows'))},options);if($control.attr('data-column-id')){options.columnRefer=Number($control.attr('data-column-id'));}
return new Nth.FormBuilder.Element.List(name,options);}
Convertor.prototype.createRadio=function($eform,options){if(!$eform.length){return null;}
var $label=$eform.find('label').clone();$label.find('.mandatory').remove();var $control=$eform.find('input[type=radio]');var id=$control.attr('id');var name='name_of_'+id;options=$.extend(true,{parentComponent:null,label:$label.html(),controlAttributes:{id:id,value:$control.val(),name:$control.attr('name'),},labelAttributes:{'for':id},controlIdPrefix:''},options);if($control.attr('valid-required')){options.required=Number($control.attr('valid-required'));}
if($control.is(':checked')){options.controlAttributes.checked=true;}
if($control.attr('data-column-id')){options.columnRefer=Number($control.attr('data-column-id'));}
return new Nth.FormBuilder.Element.Radio(name,options);}
Convertor.prototype.createSelect=function($eform,options){if(!$eform.length){return null;}
var $label=$eform.find('label').clone();$label.find('.mandatory').remove();var $control=$eform.find('select');var id=$control.attr('id');var name='name_of_'+id;options=$.extend(true,{parentComponent:null,label:$label.html(),controlAttributes:{id:id},bindName:$control.attr('name')},options);if($control.val()){options.defaultValue=$control.val();}
if($control.attr('valid-required')){options.required=Number($control.attr('valid-required'));}
if($control.attr('data-cname')){options.bindName=$control.attr('data-cname');}
if($control.attr('ajax-collection')){options.selectItemUrl=$control.attr('ajax-collection');}
if($control.attr('data-collection')){options.selectItemData=JSON.parse(decodeURIComponent($control.attr('data-collection')));}
if($control.attr('data-column-id')){options.columnRefer=Number($control.attr('data-column-id'));}
if($control.attr('bindby')){options.bindBy=$control.attr('bindby');}
return new Nth.FormBuilder.Element.Select(name,options);}
Convertor.prototype.createTable=function($eform,options){if(!$eform.length){return null;}
var $label=$eform.find('label').clone();$label.find('.mandatory').remove();var $control=$eform.find('table');var id=$control.attr('id');var name='name_of_'+id;options=$.extend(true,{parentComponent:null,label:$label.html(),minRows:$control.attr('min-rows'),maxRows:$control.attr('max-rows')},options);if($control.attr('data-column-id')){options.columnRefer=Number($control.attr('data-column-id'));}
var columnHeaders=[];$control.find('thead > tr > td').each(function(i){var col=[$(this).html()];var $col=$control.find('colgroup col').eq(i);if($col.length){col.push($col.attr('width'));}
columnHeaders.push(col);});if(columnHeaders.length){options.columnHeaders=columnHeaders;}
return new Nth.FormBuilder.Element.Table(name,options);}
Convertor.prototype.createText=function($eform,options){if(!$eform.length){return null;}
var $label=$eform.find('label').clone();$label.find('.mandatory').remove();var $control=$eform.find('input');var id=$control.attr('id');var name='name_of_'+id;options=$.extend(true,{parentComponent:null,label:$label.html(),controlAttributes:{id:id,type:$control.attr('type')}},options);if($control.val()){options.defaultValue=$control.val();}
var dataType=$control.attr('valid-datatype');var validatorOption=this.getValidatorOptionByDataType(dataType);if(validatorOption){options.validators=[validatorOption];}
if($control.attr('valid-required')){options.required=Number($control.attr('valid-required'));}
if($control.attr('data-column-id')){options.columnRefer=Number($control.attr('data-column-id'));}
if($control.attr('data-cname')){options.bindName=$control.attr('data-cname');}
if($control.attr('placeholder')){options.controlAttributes.placeholder=$control.attr('placeholder');}
return new Nth.FormBuilder.Element.Text(name,options);}
Convertor.prototype.createTextarea=function($eform,options){if(!$eform.length){return null;}
var $label=$eform.find('label').clone();$label.find('.mandatory').remove();var $control=$eform.find('textarea');var id=$control.attr('id');var name='name_of_'+id;options=$.extend(true,{parentComponent:null,label:$label.html(),controlAttributes:{id:id}},options);if($control.val()){options.defaultValue=$control.val();}
if($control.attr('valid-required')){options.required=Number($control.attr('valid-required'));}
if($control.attr('data-column-id')){options.columnRefer=Number($control.attr('data-column-id'));}
if($control.attr('placeholder')){options.controlAttributes.placeholder=$control.attr('placeholder');}
return new Nth.FormBuilder.Element.Textarea(name,options);}
Convertor.prototype.toFieldset=function(options){var $fieldset=$();var html=this.getHtml();if(typeof html==='string'){$fieldset=$($.parseHTML(html));}else if(typeof html==='object'&&!(html instanceof $)){$fieldset=$(html);}
if(!$fieldset.length){return null;}
var inst=this;var name=$fieldset.attr('id');options=$.extend(true,{drawingBoard:null,toolPalette:null,data:{MA_THU_TUC:$fieldset.attr('data-MA_THU_TUC'),MA_GIAY_TO:$fieldset.attr('data-MA_THU_TUC'),LOAI_BIEU_MAU:$fieldset.attr('data-LOAI_BIEU_MAU'),MA_BIEU_MAU:$fieldset.attr('data-MA_BIEU_MAU')},wrapperAttributes:{style:$fieldset.attr('style')}},options);var fieldset=new Nth.FormBuilder.Fieldset(name,options);if(options.drawingBoard instanceof Nth.FormBuilder.DrawingBoard){options.drawingBoard.setFieldset(fieldset);}
$fieldset.children('.row').each(function(){var name=$(this).attr('id');var row=new Nth.FormBuilder.Row(name,{parentComponent:fieldset,drawingBoard:options.drawingBoard,toolPalette:options.toolPalette,autoInit:false})
fieldset.addComponent(row);$(this).children('.col').each(function(){var name=$(this).attr('id');var cls=$(this).attr('class');var column=new Nth.FormBuilder.Column(name,{parentComponent:row,drawingBoard:options.drawingBoard,toolPalette:options.toolPalette,wrapperAttributes:{'class':cls.match(/col\-(xs|sm|md|lg)\-[1-9]{1,2}/)?cls:cls+' '+fieldset.getConfigParam('defaultColumnSizeClass')},autoInit:false});fieldset.addComponent(column);$(this).children('.eform').each(function(){var $eform=$(this);var elementClass=inst.getElementClassByDom($eform);if(!elementClass||typeof inst['create'+elementClass]!=='function'){console.warn('Element '+elementClass+' class is undefined');return;}
var element=inst['create'+elementClass]($eform,{parentComponent:column,drawingBoard:options.drawingBoard,toolPalette:options.toolPalette,autoInit:false});if(element instanceof Nth.FormBuilder.Element){fieldset.addComponent(element);}});});});$.each(fieldset.getComponents(),function(i,component){component.init();});return fieldset;}
Nth.FormBuilder.Convertor=Convertor;return Convertor;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Confirm','Nth/Validator','Nth/Dom/Node','Nth/Helper/String','Nth/FormBuilder/FormBuilder','Nth/FormBuilder/Component','Nth/FormBuilder/Fieldset'],factory);}else{factory(Nth);}})(function(Nth){var Element=function(name,options){var inst=this;Nth.FormBuilder.Component.call(this,name,$.extend(true,{showLabel:true,controlOnly:false,idPrefix:'_element_',marksMandatory:1,bindIndex:0,bindConstraint:1},options));name=this.getName();var $label=$('<label/>',$.extend({},{id:'_lbl_'+name,'class':this.getConfigParam('elementLabelClass')},this.getOption('labelAttributes')));var label=this.getOption('label');if(label===null){label=this.getOption('creatorLabel')+' '+this.getCurrentIndex();}else if(label===false){$label.hide();}
var $labelContent=$('<span/>',{'class':this.getConfigParam('elementLabelContentClass')}).html(label);this.label=new Nth.Dom.Node($label.append($labelContent));this.checkForMarkingMandatory();this.getWrapper().getNode().addClass(this.getConfigParam('elementWrapperClass')).append(this.getLabel().getNode());if(this.hasDrawingBoard()){var $toolbox=this.createToolbox();this.getWrapper().getNode().append($toolbox).on('click',function(e){e.preventDefault();e.stopPropagation();var actived=inst.actived();if(!e.ctrlKey){inst.getDrawingBoard().getFieldset().inactiveElements();}
if(!actived){inst.active();}});if(this.getOption('active')){this.active();}}}
Element.prototype=Object.create(Nth.FormBuilder.Component.prototype);Element.prototype.constructor=Element;Element.prototype.__CLASS__='Nth.FormBuilder.Element';Element.prototype.bound=function(args){this.trigger('nth.fb.bound',args);return this;}
Element.prototype.setName=function(name){Nth.FormBuilder.Component.prototype.setName.call(this,name);this.getLabel().getNode().attr('id','_lbl_'+name);return this;}
Element.prototype.getLabel=function(){return this.label;}
Element.prototype.getDefaultValue=function(){return this.getOption('defaultValue');}
Element.prototype.setDefaultValue=function(defaultValue){this.setOption('defaultValue',defaultValue);return this;}
Element.prototype.hasDefaultValue=function(){return this.existsOption('defaultValue');}
Element.prototype.getValue=function(){return null;}
Element.prototype.getData=function(){var item={name:this.getName(),value:this.getValue()}
this.getWrapper().getNode().trigger('nth.fb.export-data',[item,this]);return item;}
Element.prototype.setValue=function(){return this;}
Element.prototype.reset=function(){if(this.getOption('disabled')){this.disable();}else{this.enable();}
this.setValue(this.getDefaultValue());return this;}
Element.prototype.getLabelContent=function(){return this.getLabel().getNode().find('.'+this.getConfigParam('elementLabelContentClass'));}
Element.prototype.getLabelOption=function(){return this.getLabelContent().html();}
Element.prototype.setLabelOption=function(label){this.getLabelContent().html(label);this.setOption('label',label);return this;}
Element.prototype.getLabelMandatory=function(){return this.getLabel().getNode().find('.'+this.getConfigParam('elementRequiredLabelClass'));}
Element.prototype.checkForMarkingMandatory=function(){if(this.getOption('required')&&this.getOption('marksMandatory')){var $mandatory=this.getLabel().getNode().find('.'+this.getConfigParam('elementRequiredLabelClass'));if(!$mandatory.length){var $mandatory=$('<span/>',{'class':this.getConfigParam('elementRequiredLabelClass'),title:this.getConfigParam('mandatoryTitle')}).html(this.getConfigParam('elementRequiredLabelContent'));this.getLabel().getNode().append($mandatory);}}else if(!this.getOption('required')||!this.getOption('marksMandatory')){this.getLabel().getNode().find('.'+this.getConfigParam('elementRequiredLabelClass')).remove();}
return this;}
Element.prototype.getBindName=function(){if(this.getOption('bindName')){return this.getOption('bindName');}
return this.getName();}
Element.prototype.getValidName=function(){if(this.getOption('validName')){return this.getOption('validName');}
return this.getLabel().getNode().find('.'+this.getConfigParam('elementLabelContentClass')).html();}
Element.prototype.setRequired=function(required){this.setOption('required',required).checkForMarkingMandatory();return this;}
Element.prototype.getDependentElements=function(){var bindBy=this.getOption('bindBy');return this.query(bindBy);}
Element.prototype.query=function(cond){var inst=this;var elements=[];if($.isArray(cond)){$.each(cond,function(i,item){if($.type(item)==='string'){elements.push.apply(elements,inst.queryBySelector(item));}else if(item instanceof Element){elements.push(item);}});}else if($.type(cond)==='string'){elements.push.apply(elements,this.queryBySelector(cond));}else if(cond instanceof Element){elements.push(cond);}
return elements.sort(function(a,b){return a.getOption('bindIndex')-b.getOption('bindIndex');});}
Element.prototype.queryBySelector=function(selector){var elements=[];var fieldset=this.getFieldsetContainer();if(!fieldset){return elements;}
try{var elementWrapperClass=this.getConfigParam('elementWrapperClass');fieldset.getDomNode().find(selector).each(function(){var $wrapper=$(this);if(!$wrapper.hasClass(elementWrapperClass)){$wrapper=$wrapper.closest('.'+elementWrapperClass);}
var name=$wrapper.attr('id');var element=fieldset.getComponent(name);if(element instanceof Element){elements.push(element);}});return elements.sort(function(a,b){return a.getOption('bindIndex')-b.getOption('bindIndex');});}catch(e){console.warn(e);return elements;}}
Element.prototype.isEmpty=function(){return!this.getValue();}
Element.prototype.isDependent=function(){return this.getDependentElements().length>0;}
Element.prototype.getDependentBindData=function(){var data={};$.each(this.getDependentElements(),function(i,element){data[element.getBindName()]=element.getValue();});return data;}
Element.prototype.actived=function(){return this.getWrapper().getNode().hasClass(this.getConfigParam('activeElementClass'));}
Element.prototype.active=function(){return this.getWrapper().getNode().addClass(this.getConfigParam('activeElementClass'));}
Element.prototype.inactiveOthers=function(){if(this.hasDrawingBoard()){this.getDrawingBoard().getFieldset().inactiveElements();this.active();}
return this;}
Element.prototype.getCreatorDraggableOptions=function(){var options=Nth.FormBuilder.Component.prototype.getCreatorDraggableOptions.call(this);if(this.hasDrawingBoard()){var id=this.getDrawingBoard().getContainer().attr('id');var wrapperNodeName=this.getDrawingBoard().getFieldset().getOption('wrapperNodeName')
options.connectToSortable='#'+id+' '+wrapperNodeName+' .'+this.getConfigParam('componentRowClass')+' .'+this.getConfigParam('componentColumnClass');}
return options;}
Element.prototype.getOptionsCopy=function(){var options=Nth.FormBuilder.Component.prototype.getOptionsCopy.call(this);if(this.hasDrawingBoard()){var drawingBoard=this.getDrawingBoard();var $dragging=drawingBoard.getDragging();if($dragging.length){options.addingRelative=$dragging;options.addingMethod='replaceWith';options.parentComponent=this.getParentColumnByNode($dragging);}else{if(!options.parentComponent){var columns=drawingBoard.getFieldset().queryColumns();var activeColumn=null;$.each(columns,function(i,column){if(column.actived()){activeColumn=column;}});options.parentComponent=activeColumn?activeColumn:columns[columns.length-1];options.addingRelative=options.parentComponent.getDomNode();}
var sibling=options.parentComponent.getLastActivedChild();if(sibling){var setting=this.getToolPalette().getComponentSetting();options.addingRelative=sibling.getDomNode();options.addingMethod=setting.positionToAdd;}}}
return options;}
Element.prototype.getOptionsClone=function(){var options=$.extend(true,{wrapperAttributes:{},labelAttributes:{},controlAttributes:{}},this.getOptionsCopy());delete options.wrapperAttributes.id;delete options.wrapperAttributes.name;delete options.labelAttributes.id;delete options.labelAttributes['for'];delete options.controlAttributes.id;delete options.controlAttributes.name;delete options.columnRefer;options.label=this.getLabelOption();return options;}
Element.prototype.getParentColumnByNode=function($node){var fieldset=this.getFieldsetContainer();if(!fieldset||!$node.length){return null;}
var name=$node.closest('.'+this.getConfigParam('componentColumnClass')).attr('id');return fieldset.getComponent(name);}
Element.prototype.findParentColumn=function(){var fieldset=this.getFieldsetContainer();if(fieldset){var name=this.getWrapper().getNode().closest('.'+this.getConfigParam('componentColumnClass')).attr('id');return fieldset.getComponent(name);}
return null;}
Element.prototype.createToolbox=function(){var inst=this;var name=this.getName();var $wrapper=$('<div/>',{'class':'control-toolpalette'});var $duplicate=$('<span/>',{'class':'duplicate',title:'Duplicate'});$duplicate.on('click',function(e){e.preventDefault();e.stopPropagation();inst.cloneToDrawingBoard();});var $edit=$('<span/>',{'class':'edit',title:'Property of '+name});$edit.on('click',function(e){e.preventDefault();if(inst.actived()){e.stopPropagation();}
inst.loadProperty();});var $delete=$('<span/>',{'class':'delete',title:'Remove '+name});$delete.on('click',function(e){e.preventDefault();if(inst.actived()){e.stopPropagation();}
Nth.Confirm('Có chắc bạn muốn xóa?',function(choosed){if(choosed===Nth.Confirm.OK){if(inst.hasToolPalette()){inst.getToolPalette().deleteComponent(inst);}
inst.getDrawingBoard().getFieldset().removeComponent(name);}});});return $wrapper.append($duplicate,$edit,$delete);}
Element.prototype.getPropertySetters=function(){if(!this.hasDrawingBoard()){return[];}
var options=Nth.FormBuilder.Component.prototype.getPropertySetters.call(this);var propertySetter=new Nth.FormBuilder.PropertySetter(this);options.push.apply(options,[propertySetter.getElementLabelSetter()]);return options;}
Element.prototype.getFilters=function(){if(!$.isArray(this.getOption('filters'))){this.setOption('filters',[]);}
return this.getOption('filters');}
Element.prototype.setFilters=function(filters){if(!$.isArray(filters)){throw'filters must be an array';}
this.setOption('filters',filters);return this;}
Element.prototype.getFiltersJson=function(){var filters=[];$.each(this.getFilters(),function(i,filter){filters.push(filter.toJson());});return filters;}
Element.prototype.initFilters=function(){var inst=this;var filters=[];$.each(this.getFilters(),function(i,filter){if($.isPlainObject(filter)){var cls=new Nth.ReflectionClass(filter.name).getClass();filter=new cls(filter.options);}
filters.push(filter.setElement(inst));});this.setFilters(filters);return this;}
Element.prototype.hookFilters=function(){var inst=this;$.each(this.getSupportFilters().filters,function(i,options){options.filter.setElement(inst).onUnhook();});$.each(this.getFilters(),function(i,filter){filter.onHook();});return this;}
Element.prototype.getFilter=function(name){var rs=this.getFilters().filter(function(a){return a.__CLASS__===name;});return rs.length===1?rs[0]:null;}
Element.prototype.hasFilter=function(name){return!!this.getFilter(name);}
Element.prototype.removeFilters=function(){$.each(this.getFilters(),function(i,filter){filter.onUnhook();});this.removeOption('filters');return this;}
Element.prototype.removeFilter=function(name){var inst=this;$.each(this.getFilters(),function(i,filter){if(filter.__CLASS__===name){filter.onUnhook();inst.getFilters().splice(i,1);return false;}});return this;}
Element.prototype.setFilter=function(name,options){var obj=null;if(typeof name==='string'){var cls=new Nth.ReflectionClass(name).getClass();obj=new cls(options);}else if(name instanceof Nth.Filter){obj=name;}else if($.isPlainObject(name)){var cls=new Nth.ReflectionClass(name.name).getClass();obj=new cls(name.options);}
if(obj instanceof Nth.Filter){this.removeFilter(obj.__CLASS__);this.getFilters().push(obj);obj.setElement(this).onHook();}
return this;}
Element.prototype.getValidators=function(){if(!$.isArray(this.getOption('validators'))){this.setOption('validators',[]);}
return this.getOption('validators');}
Element.prototype.setValidators=function(validators){if(!$.isArray(validators)){throw'validators must be an array';}
this.setOption('validators',validators);return this;}
Element.prototype.getValidatorsJson=function(){var validators=[];$.each(this.getValidators(),function(i,validator){validators.push(validator.toJson());});return validators;}
Element.prototype.initValidators=function(){var inst=this;var validators=[];$.each(this.getValidators(),function(i,validator){if($.isPlainObject(validator)){var cls=new Nth.ReflectionClass(validator.name).getClass();validator=new cls(validator.options);}
validators.push(validator.setElement(inst));});this.setValidators(validators);return this;}
Element.prototype.hookValidators=function(){var inst=this;$.each(this.getSupportValidators().validators,function(i,options){options.validator.setElement(inst).onUnhook();});$.each(this.getValidators(),function(i,validator){validator.onHook();});return this;}
Element.prototype.getValidator=function(name){var rs=this.getValidators().filter(function(a){return a.__CLASS__===name;});return rs.length===1?rs[0]:null;}
Element.prototype.hasValidator=function(name){return!!this.getValidator(name);}
Element.prototype.removeValidators=function(){$.each(this.getValidators(),function(i,validator){validator.onUnhook();});this.removeOption('validators');return this;}
Element.prototype.removeValidator=function(name){var inst=this;$.each(this.getValidators(),function(i,validator){if(validator.__CLASS__===name){validator.onUnhook();inst.getValidators().splice(i,1);return false;}});return this;}
Element.prototype.setValidator=function(name,options){var obj=null;if(typeof name==='string'){var cls=new Nth.ReflectionClass(name).getClass();obj=new cls(options);}else if(name instanceof Nth.Validator){obj=name;}else if($.isPlainObject(name)){var cls=new Nth.ReflectionClass(name.name).getClass();obj=new cls(name.options);}
if(obj instanceof Nth.Validator){this.removeValidator(obj.__CLASS__);this.getValidators().push(obj);obj.setElement(this).onHook();}
return this;}
Element.prototype.getSupportValidators=function(){return{removable:true,validators:[{validator:new Nth.Validator.Cmnd()},{validator:new Nth.Validator.Date()},{validator:new Nth.Validator.EmailAddress()},{validator:new Nth.Validator.Number()},{validator:new Nth.Validator.PhoneNumber()},{validator:new Nth.Validator.Unit()}]}}
Element.prototype.getSupportFilters=function(){return{removable:true,filters:[]}}
Element.prototype.isValid=function(options){if(typeof options==='function'){options={done:options}}
options=new Nth.Options($.extend({},{start:function(){},done:function(){}},options));this.hideMessage().setMessage(null);var inst=this;var done=function(){options.getOption('done').call(inst);return inst;}
if(false===options.getOption('start').call(this)){return done();}
var value=this.getValue();var strHelper=new Nth.Helper.String();var validator=Nth.Validator.__getInstance();var validName=this.getValidName();if(this.getOption('required')&&this.isEmpty()){var requiredText=validator.getOption('retypeText');strHelper.setString(requiredText);this.setMessage(strHelper.sprintf(validName));return done();}
var authElement=this.getOption('authElement');if(authElement){var elements=this.query(authElement);if(elements.length===1){var element=elements[elements.length-1];if(!element.isEmpty()&&this.isEmpty()){strHelper.setString(validator.getOption('retypeText'));this.setMessage(strHelper.sprintf(validName));return done();}
var authValue=element.getValue();if(value!==authValue){strHelper.setString(validator.getOption('notRight'));this.setMessage(strHelper.sprintf(validName));return done();}}}
if(this.isEmpty()){return done();}
$.each(this.getValidators(),function(i,validator){if(!validator.isValid(value)){inst.setMessage(validator.getMessage());return false;}});return done();}
Element.prototype.is=function(cls){return this instanceof Element[cls];}
Element.prototype.toJson=function(){var json=Nth.FormBuilder.Component.prototype.toJson.call(this);json.options.label=this.getLabelContent().html();json.options.labelAttributes=this.getLabel().getAttributes();json.options.validators=this.getValidatorsJson();json.options.filters=this.getFiltersJson();return json;}
Nth.FormBuilder.Element=Element;return Element;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Helper/Array','Nth/FormBuilder/Row','Nth/FormBuilder/Column','Nth/FormBuilder/Element/Captcha','Nth/FormBuilder/Element/Checkbox','Nth/FormBuilder/Element/Date','Nth/FormBuilder/Element/DateTime','Nth/FormBuilder/Element/File','Nth/FormBuilder/Element/Label','Nth/FormBuilder/Element/List','Nth/FormBuilder/Element/Radio','Nth/FormBuilder/Element/Select','Nth/FormBuilder/Element/Table','Nth/FormBuilder/Element/Text','Nth/FormBuilder/Element/Textarea','Nth/FormBuilder/Element/Hidden'],factory);}else{factory(Nth);}})(function(Nth){var Fieldset=function(name,options){this.components=[];this.usedIds=new Nth.Helper.Array();Nth.FormBuilder.Component.call(this,name,$.extend(true,{idPrefix:'_fieldset_',wrapperNodeName:'fieldset',creatorLabel:'Fieldset'},options));this.getWrapper().getNode().data(this.__CLASS__,this).addClass(this.getConfigParam('formWrapperClass'));if(this.hasDrawingBoard()){this.getWrapper().getNode().addClass(this.getConfigParam('edittingFormClass')).sortable({items:'.'+this.getConfigParam('componentRowClass'),greedy:false,placeholder:'fb-placeholder'});}}
Fieldset.prototype=Object.create(Nth.FormBuilder.Component.prototype);Fieldset.prototype.constructor=Fieldset;Fieldset.prototype.__CLASS__='Nth.FormBuilder.Fieldset';Fieldset.prototype.getUsedIds=function(){return this.usedIds;}
Fieldset.prototype.getFieldsetContainer=function(){return this;}
Fieldset.prototype.getComponents=function(){return this.components;}
Fieldset.prototype.addComponent=function(){var inst=this;$.each(arguments,function(i,component){if($.isArray(component)){Fieldset.prototype.addComponent.apply(inst,component);}else if(component instanceof Nth.FormBuilder.Component){var name=component.getName();if(inst.existsComponent(name)){console.warn('Component '+name+' has exists');return;}
if(!component.hasParentComponent()){console.warn('Can\'t add '+name+' component');return;}
var method=component.getOption('addingMethod','append');var relative=component.getOption('addingRelative',component.getParentComponent().getDomNode());$.getElement(relative)[method](component.getDomNode());inst.components.push(component);}else{throw'The argument was passed must be an instance of Nth.FormBuilder.Component';}});return this;}
Fieldset.prototype.getComponent=function(name){var rs=this.getComponents().filter(function(c){return c.getName()===name;});if(rs.length===1){return rs[0];}
return null;}
Fieldset.prototype.existsComponent=function(name){return this.getComponent(name)instanceof Nth.FormBuilder.Component;}
Fieldset.prototype.removeComponent=function(name){var inst=this;if($.isArray(name)){$.each(name,function(i,n){inst.removeComponent(n);});}else{if(name instanceof Nth.FormBuilder.Component){name=name.getName();}
if($.type(name)==='string'){$.each(this.getComponents(),function(i,c){if(c.getName()===name){c.getDomNode().remove();inst.getComponents().splice(i,1);$.each(c.getChilds(),function(j,k){inst.removeComponent(k.getName());});return false;}});}}
return this;}
Fieldset.prototype.getActiveComponents=function(){var components=[];$.each(this.getComponents(),function(i,component){if(component.actived()){components.push(component);}});return components;}
Fieldset.prototype.queryRows=function(){var rows=[]
$.each(this.getComponents(),function(i,component){if(component instanceof Nth.FormBuilder.Row){rows.push(component);}});return rows;}
Fieldset.prototype.queryColumns=function(){var columns=[]
$.each(this.getComponents(),function(i,component){if(component instanceof Nth.FormBuilder.Column){columns.push(component);}});return columns;}
Fieldset.prototype.queryElements=function(){var elements=[]
$.each(this.getComponents(),function(i,component){if(component instanceof Nth.FormBuilder.Element){elements.push(component);}});return elements;}
Fieldset.prototype.countElements=function(){return this.queryElements().length;}
Fieldset.prototype.findRow=function(name){if(name instanceof $){if(!name.hasClass(this.getConfigParam('componentRowClass'))){name=name.closest('.'+this.getConfigParam('componentRowClass'));}
name=name.attr('id');}
var row=name?this.getComponent(name):null;return row instanceof Nth.FormBuilder.Row?row:null;}
Fieldset.prototype.findColumn=function(name){if(name instanceof $){if(!name.hasClass(this.getConfigParam('componentColumnClass'))){name=name.closest('.'+this.getConfigParam('componentColumnClass'));}
name=name.attr('id');}
var column=name?this.getComponent(name):null;return column instanceof Nth.FormBuilder.Column?column:null;}
Fieldset.prototype.findElement=function(name){if(name instanceof window.Element){name=$(name);}
if(name instanceof $){if(!name.hasClass(this.getConfigParam('elementWrapperClass'))){name=name.closest('.'+this.getConfigParam('elementWrapperClass'));}
name=name.attr('id');}
var element=name?this.getComponent(name):null;return element instanceof Nth.FormBuilder.Element?element:null;}
Fieldset.prototype.findComponentsByOption=function(name,value){var components=[];$.each(this.getComponents(),function(i,component){if(component.getOption(name)===value){components.push(component);}});return components;}
Fieldset.prototype.inactiveComponents=function(){return this.inactiveRows().inactiveColumns().inactiveElements();}
Fieldset.prototype.inactiveRows=function(){this.getDomNode().find('.'+this.getConfigParam('componentRowClass')).removeClass(this.getConfigParam('activeRowClass'));return this;}
Fieldset.prototype.inactiveColumns=function(){this.getDomNode().find('.'+this.getConfigParam('componentColumnClass')).removeClass(this.getConfigParam('activeColumnClass'));return this;}
Fieldset.prototype.inactiveElements=function(){this.getDomNode().find('.'+this.getConfigParam('elementWrapperClass')).removeClass(this.getConfigParam('activeElementClass'));return this;}
Fieldset.prototype.activeComponent=function(component){if($.isArray(component)){var inst=this;$.each(component,function(i,c){inst.activeComponent(c);});}
if($.type(component)==='string'){component=this.getComponent(component);}
if(component instanceof Nth.FormBuilder.Component){component.active();}
return this;}
Fieldset.prototype.loadProperty=function(){if(this.hasToolPalette()){this.getToolPalette().loadComponentProperty(this,2);}
return this;}
Fieldset.prototype.getData=function(){var data={name:this.getName(),data:[]}
$.each(this.queryElements(),function(i,element){if(element.is('Label')){return;}
data.data.push(element.getData());});this.getWrapper().getNode().trigger('nth.fb.export-data',[data,this]);return data;}
Fieldset.prototype.setData=function(data,options){if(!$.isPlainObject(data)||!$.isArray(data.data)){console.warn('Data format is incorrect');return this;}
if($.isFunction(options)){options={findElement:options}}
options=$.extend({},{findElement:function(item){return this.findElement(item.name);},beforeSet:function(){}},options);var inst=this;this.getWrapper().getNode().trigger('nth.fb.import-data',[data,this]);$.each(data.data,function(i,item){var element=options.findElement.call(inst,item);if(element instanceof Nth.FormBuilder.Element){if(false===options.beforeSet.call(element,inst)){return;}
element.getWrapper().getNode().trigger('nth.fb.import-data',[item,element]);element.setValue(item.value);if(element.is('Checkbox')||element.is('Radio')){if(item.checked){element.check();}else{element.uncheck();}}}});return this;}
Fieldset.prototype.getEncodingData=function(){return Nth.FormBuilder.__getInstance().encodeXmlData(this.getData());}
Fieldset.prototype.setEncodingData=function(data,options){if(typeof data==='string'){data=Nth.FormBuilder.__getInstance().decodeXmlData(data);}
if(!$.isPlainObject(data)){console.warn('Form data format is invalid!');return this;}
return this.setData(data,options);}
Fieldset.prototype.isValid=function(options){if(typeof options==='function'){options={done:options}}
options=new Nth.Options($.extend({},{debug:false,start:function(){},done:function(){}},options));var atm=new Nth.AsyncTaskManager({debug:options.getOption('debug'),auto:false});var opts={start:options.getOption('start'),done:function(){atm.done();if(!this.getMessage()&&atm.count()){atm.next();return;}
options.getOption('done').call(this);}}
this.hideMessage().setMessage(null);var elements=this.queryElements();if(elements.length){$.each(elements,function(i,element){atm.add(element,element.isValid,[opts],'VALIDATE_ELEMENT_'+element.getName());});atm.execute();}else{options.getOption('done').call(this);}
return this;}
Fieldset.prototype.reset=function(cb){$.each(this.queryElements(),function(i,element){if($.isFunction(cb)&&false===cb.call(element)){return;}
element.reset();});return this;}
Fieldset.prototype.updateOrderIndex=function(){var inst=this;var $wrapper=this.getDomNode();$.each($wrapper.find('.'+this.getConfigParam('componentRowClass')),function(i,e){var row=inst.findRow($(e));if(row){row.setOption('orderIndex',i);}
$.each($(this).find('.'+inst.getConfigParam('componentColumnClass')),function(j,e){var column=inst.findColumn($(e));if(column){column.setOption('orderIndex',j);}
$.each($(this).find('.'+inst.getConfigParam('elementWrapperClass')),function(k,e){var element=inst.findElement($(e));if(element){element.setOption('orderIndex',k);}});});});return this;}
Fieldset.prototype.getPropertySetters=function(){if(!this.hasDrawingBoard()){return[];}
var propertySetter=new Nth.FormBuilder.PropertySetter(this);return[propertySetter.getNameSetter(),propertySetter.getWrapperClassSetter(),propertySetter.getWrapperStyleSetter(),propertySetter.getMessageNotifierSetter()]}
Fieldset.prototype.checkControlId=function(){var duplicate=[];var elements=this.queryElements();$.each(elements,function(i,e1){if(e1.is('Label')){return true;}else if(duplicate.length){return false;}
$.each(elements,function(i,e2){if(!e2.notMe(e1)||e2.is('Label')){return true;}else if(e1.getControl().getNode().attr('id')===e2.getControl().getNode().attr('id')){duplicate.push.apply([e1,e2]);}});});return duplicate;}
Fieldset.prototype.checkColumnRefer=function(){var duplicate=[];var elements=this.queryElements();$.each(this.queryElements(),function(i,e1){if(e1.is('Label')){return true;}else if(duplicate.length){return false;}
$.each(elements,function(i,e2){if(!e2.notMe(e1)||e2.is('Label')){return true;}else if(e1.getOption('columnRefer')===e2.getOption('columnRefer')){duplicate.push.apply([e1,e2]);}});});return duplicate;}
Fieldset.prototype.toXml=function(){var $form=$('<form-builder/>');this.updateOrderIndex();this.getWrapper().getNode().removeClass(this.getConfigParam('edittingFormClass'));$form.append(Nth.FormBuilder.Component.prototype.toXml.call(this));return $form.prop('outerHTML');}
Fieldset.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null},options);var fb=Nth.FormBuilder.__getInstance();var $xmlDoc=fb.getXmlObject(xml).children('form-builder');$xmlDoc.children('form-config').children('parameter').each(function(){fb.setOption($(this).attr('name'),fb.decodeXmlData($(this).text()));});var $fieldset=$xmlDoc.children('component');var name=$fieldset.attr('name');$fieldset.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});var fieldset=new Fieldset(name,options);if(options.drawingBoard instanceof Nth.FormBuilder.DrawingBoard){options.drawingBoard.setFieldset(fieldset);}
var childrens=[];var $childrens=$fieldset.children('childrens');$childrens.children('component').each(function(){var rc=new Nth.ReflectionClass($(this).attr('class'));var component=rc.getClass().__fromXml(this,{drawingBoard:options.drawingBoard,toolPalette:options.toolPalette,parentComponent:fieldset,autoInit:false});childrens.push(component);});$.each(childrens.sort(function(a,b){return a.getOption('orderIndex')-b.getOption('orderIndex');}),function(i,component){fieldset.addComponent(component);});$.each(fieldset.getComponents(),function(i,component){component.init();});return fieldset;}
Nth.FormBuilder.Fieldset=Fieldset;return Fieldset;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Alert','Nth/Confirm','Nth/ReflectionClass','Nth/FormBuilder/Component','editTable'],factory);}else{factory(Nth);}})(function(Nth){var PropertySetter=function(component){this.setComponent(component);}
PropertySetter.prototype.__CLASS__='Nth.FormBuilder.PropertySetter';PropertySetter.prototype.getComponent=function(){return this.component;}
PropertySetter.prototype.setComponent=function(component){if(!(component instanceof Nth.FormBuilder.Component)){throw'The argument was passed must be an instance of Nth.FormBuilder.Component';}
this.component=component;}
PropertySetter.prototype.getNameSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getName()}).on('blur',function(){var name=component.getName();if(this.value===name){return;}
var self=this;if(component.hasNameExists(this.value)){return Nth.Confirm('Name đã tồn tại! Khôi phục lại giá trị cũ?',function(choosed){if(choosed===Nth.Confirm.OK){$(self).val(name);}
$(self).focus();});}
component.setName(this.value);});return{name:'Name',setter:setter}}
PropertySetter.prototype.getWrapperClassSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getWrapper().getNode().attr('class')}).on('blur',function(){component.getWrapper().getNode().attr('class',this.value)});return{name:'Wrapper class',setter:setter};}
PropertySetter.prototype.getWrapperStyleSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getWrapper().getNode().attr('style')}).on('blur',function(){component.getWrapper().getNode().attr('style',this.value)});return{name:'Wrapper style',setter:setter};}
PropertySetter.prototype.getMarksMandatorySetter=function(){var component=this.getComponent();var setter=$('<select/>');var $yes=$('<option/>',{value:1}).html('Yes');var $no=$('<option/>',{value:0}).html('No');var val=component.getOption('marksMandatory');setter.append($yes,$no).val(val).on('change',function(){component.setOption('marksMandatory',parseInt(this.value)).checkForMarkingMandatory();});return{name:'Marks mandatory',setter:setter};}
PropertySetter.prototype.getRequiredSetter=function(){var component=this.getComponent();var setter=$('<select/>');var $yes=$('<option/>',{value:1}).html('Yes');var $no=$('<option/>',{value:0}).html('No');var val=component.getOption('required',0);setter.append($yes,$no).val(val).on('change',function(){component.setOption('required',parseInt(this.value)).checkForMarkingMandatory();});return{name:'Required',setter:setter};}
PropertySetter.prototype.getElementLabelSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getLabelContent().html()}).on('blur',function(){component.getLabelContent().html(this.value);});return{name:'Label',setter:setter};}
PropertySetter.prototype.getElementIdSetter=function(){var component=this.getComponent();var elementId=component.getControl().getNode().attr('id');var setter=$('<input/>',{type:'text',value:elementId}).on('blur',function(){if(this.value===elementId){return;}
var self=this;if(component.hasElementIdExists(this.value)){return Nth.Confirm('Element id đã tồn tại! Khôi phục lại giá trị cũ?',function(choosed){if(choosed===Nth.Confirm.OK){$(self).val(elementId);}
$(self).focus();});}
component.getControl().getNode().attr('id',this.value);component.getLabel().getNode().attr('for',this.value);});return{name:'Element ID',setter:setter};}
PropertySetter.prototype.getElementNameSetter=function(){var component=this.getComponent();var elementName=component.getControl().getNode().attr('name');var setter=$('<input/>',{type:'text',value:elementName}).on('blur',function(){if(this.value===elementName){return;}
var self=this;if(component.hasElementNameExists(this.value)&&!component.is('Radio')){return Nth.Confirm('Element name has existed! Do you want to recover the lastest value?',function(choosed){if(choosed===Nth.Confirm.OK){$(self).val(elementName);}
$(self).focus();});}
component.getControl().getNode().attr('name',this.value);});return{name:'Element Name',setter:setter};}
PropertySetter.prototype.getDefaultValueSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getOption('defaultValue')}).on('blur',function(){component.setDefaultValue(this.value).setValue(this.value);});return{name:'Default value',setter:setter};}
PropertySetter.prototype.getValueSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getValue()}).on('blur',function(){component.setValue(this.value);});return{name:'Value',setter:setter};}
PropertySetter.prototype.getValidNameSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getOption('validName')}).on('blur',function(){component.setOption('validName',this.value);});return{name:'Valid name',setter:setter};}
PropertySetter.prototype.getValidUrlSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getOption('validUrl')}).on('blur',function(){component.setOption('validUrl',this.value);});return{name:'Valid URL',setter:setter};}
PropertySetter.prototype.getInitUrlSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getOption('initUrl')}).on('blur',function(){component.setOption('initUrl',this.value);});return{name:'Init URL',setter:setter};}
PropertySetter.prototype.getImageContainerSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getOption('imageContainer')}).on('blur',function(){component.setOption('imageContainer',this.value);});return{name:'Image container',setter:setter};}
PropertySetter.prototype.getCheckedSetter=function(){var component=this.getComponent();var setter=$('<select/>');var $yes=$('<option/>',{value:1}).html('Yes');var $no=$('<option/>',{value:0}).html('No');var val=Number(component.getControl().getNode().is(':checked'));setter.append($yes,$no).val(val).on('change',function(){if(parseInt(this.value)){component.check();}else{component.uncheck();}});return{name:'Checked',setter:setter};}
PropertySetter.prototype.getDisabledSetter=function(){var component=this.getComponent();var setter=$('<select/>');var $yes=$('<option/>',{value:1}).html('Yes');var $no=$('<option/>',{value:0}).html('No');var val=Number(component.getControl().getNode().is(':disabled'));setter.append($yes,$no).val(val).on('change',function(){if(parseInt(this.value)){component.getControl().getNode().prop('disabled',true).attr('disabled',true);}else{component.getControl().getNode().prop('disabled',false).removeAttr('disabled');}});return{name:'Disabled',setter:setter};}
PropertySetter.prototype.getReadonlySetter=function(){var component=this.getComponent();var setter=$('<select/>');var $yes=$('<option/>',{value:1}).html('Yes');var $no=$('<option/>',{value:0}).html('No');var val=Number(component.getControl().getNode().prop('readonly'));setter.append($yes,$no).val(val).on('change',function(){if(parseInt(this.value)){component.getControl().getNode().prop('readonly',true).attr('readonly',true);}else{component.getControl().getNode().prop('readonly',false).removeAttr('readonly');}});return{name:'Readonly',setter:setter};}
PropertySetter.prototype.getAutocompleteSetter=function(){var component=this.getComponent();var setter=$('<select/>');var $default=$('<option/>',{value:'default'}).html('Default');var $on=$('<option/>',{value:'on'}).html('On');var $off=$('<option/>',{value:'off'}).html('Off');var val=component.getControl().getNode().attr('autocomplete');setter.append($default,$on,$off).val(val?val.toLowerCase():'default').on('change',function(){component.getControl().getNode().attr('autocomplete',this.value);});return{name:'Autocomplete',setter:setter};}
PropertySetter.prototype.getBindNameSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getOption('bindName')}).on('blur',function(){component.setOption('bindName',this.value);});return{name:'Bind name',setter:setter};}
PropertySetter.prototype.getValidElementRequiredSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getOption('validElementRequired')}).on('blur',function(){component.setOption('validElementRequired',this.value);});return{name:'Valid element required',setter:setter};}
PropertySetter.prototype.getBindBySetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getOption('bindBy')}).on('blur',function(){component.setOption('bindBy',this.value);});return{name:'Bindby',setter:setter};}
PropertySetter.prototype.getAuthElementSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getOption('authElement')}).on('blur',function(){component.setOption('authElement',this.value);});return{name:'Auth element',setter:setter};}
PropertySetter.prototype.getMaxRowSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getOption('maxRow')}).on('blur',function(){var val=parseInt(this.value);if(isNaN(val)){var self=this;return Nth.Alert('Number is required',function(){$(self).focus();});}
component.setMaxRow(val);});return{name:'Max row',setter:setter};}
PropertySetter.prototype.getMinRowSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getOption('minRow')}).on('blur',function(){var val=parseInt(this.value);if(isNaN(val)){var self=this;return Nth.Alert('Number is required',function(){$(self).focus();});}
component.setMinRow(val);});return{name:'Min row',setter:setter};}
PropertySetter.prototype.getPlaceholderSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getControl().getNode().attr('placeholder')}).on('blur',function(){component.getControl().getNode().attr('placeholder',this.value);});return{name:'Placeholder',setter:setter};}
PropertySetter.prototype.getElementTitleSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getControl().getNode().attr('title')}).on('blur',function(){component.getControl().getNode().attr('title',this.value);});return{name:'Element title',setter:setter};}
PropertySetter.prototype.getElementClassSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getControl().getNode().attr('class')}).on('blur',function(){component.getControl().getNode().attr('class',this.value);});return{name:'Element class',setter:setter};}
PropertySetter.prototype.getElementStyleSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getControl().getNode().attr('style')}).on('blur',function(){component.getControl().getNode().attr('style',this.value);});return{name:'Element style',setter:setter};}
PropertySetter.prototype.getColumnReferSetter=function(){var component=this.getComponent();var selectItems=component.getConfigParam('columnReferPropertySelectItems');var setter=$('<select/>');if(typeof selectItems==='function'){selectItems.call(component,setter);}else if(typeof selectItems==='string'){setter.html(selectItems).val(component.getOption('columnRefer'));}
setter.on('change',function(){var columnRefer=component.getOption('columnRefer');if(this.value===columnRefer){return;}
var self=this;if(component.hasColumnReferExists(this.value)){return Nth.Confirm('Column refer đã tồn tại! Hiển thị phần tử bị trùng?',function(choosed){if(choosed===Nth.Confirm.OK){var fieldset=component.getDrawingBoard().getFieldset();var duplicate=fieldset.findComponentsByOption('columnRefer',self.value);fieldset.inactiveComponents().activeComponent(duplicate);}
$(self).val(columnRefer).focus();});}
component.setOption('columnRefer',this.value);});return{name:'Column refer',setter:setter}}
PropertySetter.prototype.getTypeSetter=function(){var component=this.getComponent();var setter=$('<select/>');var $text=$('<option/>',{value:'text'}).html('text');var $password=$('<option/>',{value:'password'}).html('password');var val=component.getControl().getNode().attr('type').toLowerCase();setter.append($text,$password).val(val).on('change',function(){component.getControl().getNode().attr('type',this.value);});return{name:'Type',setter:setter}}
PropertySetter.prototype.getColumnHeadersSetter=function(){var component=this.getComponent();var getValueLabel=function(val){if(val.length>1){return val.length+' columns'}
return val.length+' column';}
var val=component.getOption('columnHeaders');var setter=$('<div/>',{'class':'column-headers-setter'});var $group=$('<div/>',{'class':'input-group'});var $input=$('<input/>',{type:'text',value:getValueLabel(val),readonly:true});var $trigger=$('<span/>',{'class':"input-group-addon",'data-toggle':"modal",'data-target':"#columnHeaders"}).html('...');$group.append($input,$trigger);var $modal=$('<div/>',{'class':"modal fade",id:"columnHeaders",tabindex:"-1",role:"dialog",'aria-labelledby':"columnHeadersLabel"});var $dialog=$('<div/>',{'class':"modal-dialog",role:"document"});var $content=$('<div/>',{'class':'modal-content'});var $header=$('<div/>',{'class':'modal-header'});var $close=$('<button/>',{type:"button",'class':"close",'data-dismiss':"modal",'aria-label':"Close"}).html('<span aria-hidden="true">&times;</span>');var $title=$('<h4/>',{'class':"modal-title",id:"columnHeadersLabel"}).html('Column Headers');$header.append($close,$title);var $body=$('<div/>',{'class':'modal-body'});var editTable=$body.editTable({headerCols:['Name','Width']});editTable.loadData(val);var $footer=$('<div/>',{'class':'modal-footer'});var $exit=$('<button/>',{type:"button",'class':"btn btn-default",'data-dismiss':"modal"}).html('Close');var $save=$('<button/>',{type:"button",'class':"btn btn-primary"}).html('Save changes');$footer.append($exit,$save);$modal.html($dialog.html($content.append($header,$body,$footer)));setter.append($group,$modal);$save.on('click',function(){val=editTable.getData();component.setOption('columnHeaders',val).createColumnHeaders();$input.val(getValueLabel(val));});return{name:'Column headers',setter:setter}}
PropertySetter.prototype.getValidatorsSetter=function(){var component=this.getComponent();var setter=$('<div/>',{'class':'validators-setter'});var $group=$('<div/>',{'class':'input-group'});var $input=$('<input/>',{type:'text',readonly:true});var displayValue=function(){var rs='no validator';var val=component.getValidators();if(val.length>1){rs=val.length+' validators'}else if(val.length===1){if($.isPlainObject(val[0])){rs=val[0].name;}else if(val[0]instanceof Nth.Validator){rs=val[0].__CLASS__;}}
$input.val(rs);}
displayValue();var $trigger=$('<span/>',{'class':"input-group-addon",'data-toggle':"modal",'data-target':"#validators"}).html('...');$group.append($input,$trigger);var $modal=$('<div/>',{'class':"modal fade",id:"validators",tabindex:"-1",role:"dialog",'aria-labelledby':"validatorsLabel"}).on('hidden.bs.modal',function(){component.initValidators().hookValidators();displayValue();});var $dialog=$('<div/>',{'class':"modal-dialog",role:"document"});var $content=$('<div/>',{'class':'modal-content'});var $header=$('<div/>',{'class':'modal-header'});var $close=$('<button/>',{type:"button",'class':"close",'data-dismiss':"modal",'aria-label':"Close"}).html('<span aria-hidden="true">&times;</span>');var $title=$('<h4/>',{'class':"modal-title",id:"validatorsLabel"}).html('Validator');$header.append($close,$title);var $body=$('<div/>',{'class':'modal-body'});var $footer=$('<div/>',{'class':'modal-footer'});var $panelGroup=$('<div/>',{'class':"panel-group",id:"validators-accordion",role:"tablist",'aria-multiselectable':"true"});var supportValidators=component.getSupportValidators();if(supportValidators.removable&&supportValidators.validators.length){var $labelWrapper=$('<div/>',{'class':'pull-left'}).css('position','relative');var $radNoneValidator=$('<input>',{type:'checkbox',id:'none-validator-setter'}).css({position:'relative',top:'2px'}).on('change',function(){if($(this).is(':checked')){$panelGroup.find('input[name=validator-for-element]:checked').each(function(){if($(this).data('iCheck')){$(this).iCheck('uncheck');}else{$(this).removeAttr('checked').prop('checked',false);}});}});var $lblNoneValidator=$('<span/>').css('margin-left','5px').html('Không sử dụng validator');var $label=$('<label/>').append($radNoneValidator,$lblNoneValidator);if(typeof $().iCheck==='function'){$radNoneValidator.iCheck({checkboxClass:'icheckbox_minimal',radioClass:'iradio_minimal'}).on('ifChanged',function(){$(this).trigger('change');});}
$footer.append($labelWrapper.append($label));}
$.each(supportValidators.validators,function(i,options){var vclass=options.validator.__CLASS__;var validator=component.getValidator(vclass);if(validator){options.checked=true;}else{validator=options.validator.setElement(component);}
var so=$.extend({},{beforeSave:function(){},onClose:function(){}},validator.getSetterOptions());var unique=vclass.split('.').join('_')+'_'+i;var $panel=$('<div/>',{'class':"panel panel-default"});var $panelHeading=$('<div/>',{'class':"panel-heading",role:"tab",id:"heading-"+unique});var $panelTitle=$('<a/>',{role:"button",href:'javascript:;'});var $radioInput=$('<input/>',{id:'rad-'+unique,type:'radio',name:'validator-for-element',checked:options.checked}).on('change',function(){if($(this).is(':checked')){if($radNoneValidator.data('iCheck')){$radNoneValidator.iCheck('uncheck');}else{$radNoneValidator.removeAttr('checked').prop('checked',false);}}}).data({validator:validator,setterOptions:so});if(so.fieldset){var $inputWrapper=$('<span/>',{'class':'input-wrapper'}).append($radioInput);var $toggleIcon=$('<span/>',{'class':'pull-right'}).html('<i class="fa fa-toggle-down"></i>');$panelHeading.append($inputWrapper,$panelTitle.html(so.subject),$toggleIcon);$panelTitle.attr({href:"#collapse-"+unique,'data-toggle':"collapse",'data-parent':"#validators-accordion",'aria-expanded':"true",'aria-controls':"collapse-"+unique}).css({'display':'inline-block','font-weight':'bold'});var $collapseContent=$('<div/>',{id:"collapse-"+unique,'class':"panel-collapse collapse"+($radioInput.is(':checked')?" in":""),role:"tabpanel",'aria-labelledby':"heading-"+unique});var $panelBody=$('<div/>',{'class':"panel-body"});$panel.append($collapseContent.append($panelBody.append(so.fieldset.getDomNode())));$panelTitle.collapse();$collapseContent.on('show.bs.collapse',function(){$toggleIcon.html('<i class="fa fa-toggle-up"></i>');}).on('hide.bs.collapse',function(){$toggleIcon.html('<i class="fa fa-toggle-down"></i>');});$radioInput.on('change',function(){if($(this).is(':checked')){$collapseContent.collapse('show');}else{$collapseContent.collapse('hide');}});}else{var $radioLabel=$('<label/>',{'for':'rad-'+unique}).html(so.subject);$panelHeading.append($panelTitle.append($radioInput,$radioLabel));}
$panel.prepend($panelHeading);if(typeof $().iCheck==='function'){$radioInput.iCheck({checkboxClass:'icheckbox_minimal',radioClass:'iradio_minimal'}).on('ifChanged',function(){$(this).trigger('change');});}
$panelGroup.append($panel);})
$body.append($panelGroup);var $exit=$('<button/>',{type:"button",'class':"btn btn-default",'data-dismiss':"modal"}).html('Close');var $save=$('<button/>',{type:"button",'class':"btn btn-primary"}).html('Save changes');$footer.append($exit,$save);$modal.html($dialog.html($content.append($header,$body,$footer)));setter.append($group,$modal);$save.on('click',function(){component.removeValidators();var $noneValidator=$panelGroup.find('input#none-validator-setter');if($noneValidator.is(':checked')){$modal.modal('hide');return;}
var $checked=$panelGroup.find('input[name=validator-for-element]:checked');if($checked.length){var validator=$checked.data('validator');var so=$checked.data('setterOptions');if(false!==so.beforeSave.call(component)){component.setValidator(validator);$modal.modal('hide');}
return;}
$modal.modal('hide');});return{name:'Validator',setter:setter}}
PropertySetter.prototype.getFiltersSetter=function(){var component=this.getComponent();var setter=$('<div/>',{'class':'filters-setter'});var $group=$('<div/>',{'class':'input-group'});var $input=$('<input/>',{type:'text',readonly:true});var $trigger=$('<span/>',{'class':"input-group-addon",'data-toggle':"modal",'data-target':"#filters"}).html('...');var displayValue=function(){var rs='no filter';var val=component.getFilters();if(val.length>1){rs=val.length+' filters'}else if(val.length===1){if($.isPlainObject(val[0])){rs=val[0].name;}else if(val[0]instanceof Nth.Filter){rs=val[0].__CLASS__;}}
$input.val(rs);}
displayValue();$group.append($input,$trigger);var $modal=$('<div/>',{'class':"modal fade",id:"filters",tabindex:"-1",role:"dialog",'aria-labelledby':"filtersLabel"}).on('hidden.bs.modal',function(){component.initFilters().hookFilters();displayValue();});var $dialog=$('<div/>',{'class':"modal-dialog",role:"document"});var $content=$('<div/>',{'class':'modal-content'});var $header=$('<div/>',{'class':'modal-header'});var $close=$('<button/>',{type:"button",'class':"close",'data-dismiss':"modal",'aria-label':"Close"}).html('<span aria-hidden="true">&times;</span>');var $title=$('<h4/>',{'class':"modal-title",id:"filtersLabel"}).html('Filters');$header.append($close,$title);var $body=$('<div/>',{'class':'modal-body'});var $footer=$('<div/>',{'class':'modal-footer'});var $panelGroup=$('<div/>',{'class':"panel-group",id:"filters-accordion",role:"tablist",'aria-multiselectable':"true"});var supportFilters=component.getSupportFilters();$.each(supportFilters.filters,function(i,options){var vclass=options.filter.__CLASS__;var filter=component.getFilter(vclass);if(filter){options.checked=true;}else{filter=options.filter.setElement(component);}
var so=$.extend({},{beforeSave:function(){},onClose:function(){}},filter.getSetterOptions());var unique=vclass.split('.').join('_')+'_'+i;var $panel=$('<div/>',{'class':"panel panel-default"});var $panelHeading=$('<div/>',{'class':"panel-heading",role:"tab",id:"heading-"+unique});var $panelTitle=$('<a/>',{role:"button",href:'javascript:;'});var $radioInput=$('<input/>',{id:'rad-'+unique,type:'checkbox',name:'filter-for-element',value:unique,checked:options.checked}).data({filter:filter,setterOptions:so});if(so.fieldset){var $inputWrapper=$('<span/>',{'class':'input-wrapper'}).append($radioInput);var $toggleIcon=$('<span/>',{'class':'pull-right'}).html('<i class="fa fa-toggle-down"></i>');$panelHeading.append($inputWrapper,$panelTitle.html(so.subject),$toggleIcon);$panelTitle.attr({href:"#collapse-"+unique,'data-toggle':"collapse",'data-parent':"#filters-accordion",'aria-expanded':"true",'aria-controls':"collapse-"+unique}).css({'display':'inline-block','font-weight':'bold'});var $collapseContent=$('<div/>',{id:"collapse-"+unique,'class':"panel-collapse collapse"+($radioInput.is(':checked')?" in":""),role:"tabpanel",'aria-labelledby':"heading-"+unique});var $panelBody=$('<div/>',{'class':"panel-body"});$panel.append($collapseContent.append($panelBody.append(so.fieldset.getDomNode())));$panelTitle.collapse();$collapseContent.on('show.bs.collapse',function(){$toggleIcon.html('<i class="fa fa-toggle-up"></i>');}).on('hide.bs.collapse',function(){$toggleIcon.html('<i class="fa fa-toggle-down"></i>');});$radioInput.on('change',function(){if($(this).is(':checked')){$collapseContent.collapse('show');}else{$collapseContent.collapse('hide');}});}else{var $radioLabel=$('<label/>',{'for':'rad-'+unique}).html(so.subject);$panelHeading.append($panelTitle.append($radioInput,$radioLabel));}
$panel.prepend($panelHeading);if(typeof $().iCheck==='function'){$radioInput.iCheck({checkboxClass:'icheckbox_minimal',radioClass:'iradio_minimal'}).on('ifChanged',function(){$(this).trigger('change');});}
$panelGroup.append($panel);})
$body.append($panelGroup);var $exit=$('<button/>',{type:"button",'class':"btn btn-default",'data-dismiss':"modal"}).html('Close');var $save=$('<button/>',{type:"button",'class':"btn btn-primary"}).html('Save changes');$footer.append($exit,$save);$modal.html($dialog.html($content.append($header,$body,$footer)));setter.append($group,$modal);$save.on('click',function(){component.removeFilters();var $checked=$panelGroup.find('input[name=filter-for-element]:checked');if($checked.length){var filter=$checked.data('filter');var so=$checked.data('setterOptions');if(false!==so.beforeSave.call(component)){component.setFilter(filter);$modal.modal('hide');}
return;}
$modal.modal('hide');return;});return{name:'Filters',setter:setter}}
PropertySetter.prototype.getSelectItemDataSetter=function(){var component=this.getComponent();var getValueLabel=function(val){if(val.length>1){return val.length+' items'}
return val.length+' item';}
var val=component.getOption('selectItemData');var setter=$('<div/>',{'class':'select-item-data-setter'});var $group=$('<div/>',{'class':'input-group'});var $input=$('<input/>',{type:'text',value:getValueLabel(val),readonly:true});var $trigger=$('<span/>',{'class':"input-group-addon",'data-toggle':"modal",'data-target':"#selectItemData"}).html('...');$group.append($input,$trigger);var $modal=$('<div/>',{'class':"modal fade",id:"selectItemData",tabindex:"-1",role:"dialog",'aria-labelledby':"selectItemDataLabel"});var $dialog=$('<div/>',{'class':"modal-dialog",role:"document"});var $content=$('<div/>',{'class':'modal-content'});var $header=$('<div/>',{'class':'modal-header'});var $close=$('<button/>',{type:"button",'class':"close",'data-dismiss':"modal",'aria-label':"Close"}).html('<span aria-hidden="true">&times;</span>');var $title=$('<h4/>',{'class':"modal-title",id:"selectItemDataLabel"}).html('Select item data');$header.append($close,$title);var $body=$('<div/>',{'class':'modal-body'});var editTable=$body.editTable({headerCols:['Value','Name','Selected'],cellType:{2:{type:'radio',name:'selected'}}});editTable.loadData(val);var $footer=$('<div/>',{'class':'modal-footer'});var $exit=$('<button/>',{type:"button",'class':"btn btn-default",'data-dismiss':"modal"}).html('Close');var $save=$('<button/>',{type:"button",'class':"btn btn-primary"}).html('Save changes');$footer.append($exit,$save);$modal.html($dialog.html($content.append($header,$body,$footer)));setter.append($group,$modal);$save.on('click',function(){val=editTable.getData();component.setOption('selectItemData',val).createSelectItems();$input.val(getValueLabel(val));});return{name:'Select item data',setter:setter}}
PropertySetter.prototype.getSelectItemUrlSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getOption('selectItemUrl'),placeholder:'ex: model/htmloption/DM_TINH_THANH'}).on('blur',function(){component.setOption('selectItemUrl',this.value).createSelectItems();});return{name:'Select item URL',setter:setter};}
PropertySetter.prototype.getBindConstraintSetter=function(){var component=this.getComponent();var setter=$('<select/>');var $pvine=$('<option/>',{value:1}).html('Sequence');var $freedom=$('<option/>',{value:0}).html('Random');var val=component.getOption('bindConstraint');setter.append($pvine,$freedom).val(val).on('change',function(){component.setOption('bindConstraint',Number(this.value));});return{name:'Bind constraint',setter:setter};}
PropertySetter.prototype.getBindIndexSetter=function(){var component=this.getComponent();var setter=$('<input/>',{type:'text',value:component.getOption('bindIndex')}).on('blur',function(){component.setOption('bindIndex',this.value);});return{name:'Bind index',setter:setter};}
PropertySetter.prototype.getMessageNotifierSetter=function(){var component=this.getComponent();var setter=$('<select/>');var $yes=$('<option/>',{value:1}).html('Popup');var $no=$('<option/>',{value:2}).html('Highlight with message');var val=component.getOption('required',0);setter.append($yes,$no).val(val).on('change',function(){component.setOption('messageNotifier',parseInt(this.value));});return{name:'Message notifier',setter:setter};}
Nth.FormBuilder.PropertySetter=PropertySetter;return PropertySetter;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/FormBuilder/Component'],factory);}else{factory(Nth);}})(function(Nth){var Row=function(name,options){Nth.FormBuilder.Component.call(this,name,$.extend(true,{idPrefix:'_row_',creatorIconClass:'icon row',creatorLabel:'Row',active:false},options));this.getWrapper().getNode().addClass(this.getConfigParam('componentRowClass'));if(this.hasDrawingBoard()){var inst=this;var $wrapper=this.getWrapper().getNode();this.setToolbox(this.createToolbox());$wrapper.prepend(this.getToolbox()).sortable({items:'.col',greedy:false,connectWith:'.'+this.getConfigParam('componentRowClass'),placeholder:'fb-placeholder',stop:function(e,ui){var fieldset=inst.getDrawingBoard().getFieldset();var column=fieldset.findColumn(ui.item);if(column){var parentComponent=column.findParentRow();if(parentComponent){column.setParentComponent(parentComponent);}}}}).on('click',function(e){e.preventDefault();e.stopPropagation();var actived=inst.actived();if(!e.ctrlKey){inst.getDrawingBoard().getFieldset().inactiveRows();}
if(!actived){inst.active();}});if(this.getOption('active')){this.active();}}}
Row.prototype=Object.create(Nth.FormBuilder.Component.prototype);Row.prototype.constructor=Row;Row.prototype.__CLASS__='Nth.FormBuilder.Row';Row.prototype.setName=function(name){if(this.hasDrawingBoard()){this.getToolbox().attr({id:'_prop_of_'+name,title:'Edit property of '+name});}
return Nth.FormBuilder.Component.prototype.setName(this,name);}
Row.prototype.actived=function(){return this.getWrapper().getNode().hasClass(this.getConfigParam('activeRowClass'));}
Row.prototype.active=function(){this.getWrapper().getNode().addClass(this.getConfigParam('activeRowClass'));return this;}
Row.prototype.inactiveOthers=function(){if(this.hasDrawingBoard()){this.getDrawingBoard().getFieldset().inactiveRows();this.active();}
return this;}
Row.prototype.reset=function(cb){$.each(this.queryElements(),function(i,element){if($.isFunction(cb)&&false===cb.call(element)){return;}
element.reset();});return this;}
Row.prototype.queryElements=function(){var elements=[];$.each(this.getChilds(),function(i,child){if(child instanceof Nth.FormBuilder.Element){elements.push(child);}else if(child instanceof Nth.FormBuilder.Column){elements.push.apply(elements,child.queryElements());}});return elements;}
Row.prototype.getCreatorDraggableOptions=function(){var options=Nth.FormBuilder.Component.prototype.getCreatorDraggableOptions.call(this);if(this.hasDrawingBoard()){var id=this.getDrawingBoard().getContainer().attr('id');var wrapperNodeName=this.getDrawingBoard().getFieldset().getOption('wrapperNodeName')
options.connectToSortable='#'+id+' '+wrapperNodeName;}
return options;}
Row.prototype.getOptionsCopy=function(){var options=Nth.FormBuilder.Component.prototype.getOptionsCopy.call(this);if(this.hasDrawingBoard()){var drawingBoard=this.getDrawingBoard();options.parentComponent=drawingBoard.getFieldset();options.addingRelative=drawingBoard.getFieldset().getDomNode();var $dragging=drawingBoard.getDragging();if($dragging.length){options.addingRelative=$dragging;options.addingMethod='replaceWith';}else{var sibling=options.parentComponent.getLastActivedChild();if(sibling){var setting=this.getToolPalette().getComponentSetting();options.addingRelative=sibling.getDomNode();options.addingMethod=setting.positionToAdd;}}}
return options;}
Row.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add row to DrawingBoard');return;}
var options=$.extend({},{active:true},this.getOptionsCopy());var row=new Row(true,options);this.getDrawingBoard().getFieldset().addComponent(row);row.inactiveOthers();return this;}
Row.prototype.createToolbox=function(){var inst=this;var id=this.getWrapper().getAttribute('id');var $wrapper=$('<div/>',{id:'_prop_of_'+id,'class':'row-property',title:'Edit property of '+id});var $label=$('<span/>').html('#'+id);$wrapper.on('click',function(e){e.preventDefault();if(inst.actived()){e.stopPropagation();}
inst.loadProperty();}).draggable({axis:'x',containment:this.getWrapper().getNode(),create:function(){$(this).css({position:'absolute'});},start:function(){$(this).css({right:'auto'});}});return $wrapper.append($label);}
Row.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null,parentComponent:null},options);var fb=Nth.FormBuilder.__getInstance();var $row=fb.getXmlObject(xml,'component');var name=$row.attr('name');$row.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});var row=new Row(name,options);var childrens=[];var $childrens=$row.children('childrens');$childrens.children('component').each(function(){var rc=new Nth.ReflectionClass($(this).attr('class'));var component=rc.getClass().__fromXml(this,{drawingBoard:options.drawingBoard,toolPalette:options.toolPalette,parentComponent:row,autoInit:false});childrens.push(component);});var fieldset=row.getFieldsetContainer();$.each(childrens.sort(function(a,b){return a.getOption('orderIndex')-b.getOption('orderIndex');}),function(i,component){fieldset.addComponent(component);});return row;}
Nth.FormBuilder.Row=Row;return Row;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/FormBuilder/Element','Nth/Validator/Captcha'],factory);}else{factory(Nth);}})(function(Nth){var Captcha=function(name,options){Nth.FormBuilder.Element.call(this,name,$.extend(true,{idPrefix:'_captcha_',creatorIconClass:'icon captcha',creatorLabel:'Captcha',changeText:'Đổi mã xác nhận khác',imageContainerClass:'captcha-image-container',controlAttributes:{type:'text'}},options));name=this.getName();var inst=this;var rc=new Nth.ReflectionClass(this.__CLASS__);var controlId=this.getConfigParam('controlIdPrefix')+name;var $control=$('<input/>',$.extend({},{id:controlId,name:name,'class':this.getConfigParam('elementClass')},this.getOption('controlAttributes')));$control.attr('autocomplete','off');this.control=new Nth.Dom.Node($control);var labelAttributes=this.getOption('labelAttributes',{});if(labelAttributes['for']===undefined){this.getLabel().getNode().attr('for',controlId);}
var $imageContainer=$('<div/>',{'class':this.getOption('imageContainerClass')});this.getWrapper().getNode().addClass(rc.getShortName().toLowerCase()).append($imageContainer,$control);var initUrl=this.getInitUrl();if(initUrl){var $div=$('<div/>').html('<i class="fa "></i> Loading...');var $img=$('<img/>',{'class':'captcha-image',alt:'capt_'+name,src:initUrl});var $change=$('<a/>',{href:'javascript:;'}).on('click',function(){inst.changeValue();}).html(inst.getOption('changeText'));this.getImageContainer().append($div.html($img),$change);}
if(this.getOption('disabled')){this.disable();}}
Captcha.prototype=Object.create(Nth.FormBuilder.Element.prototype);Captcha.prototype.constructor=Captcha;Captcha.prototype.__CLASS__='Nth.FormBuilder.Element.Captcha';Captcha.prototype.getControl=function(){return this.control;}
Captcha.prototype.setValue=function(value){this.getControl().getNode().val(value);this.getWrapper().getNode().trigger('nth.fb.set-value',[value,this]);return this;}
Captcha.prototype.getValue=function(){return this.getControl().getNode().val();}
Captcha.prototype.enable=function(){this.getControl().getNode().removeAttr('disabled');return Nth.FormBuilder.Element.prototype.enable.call(this);}
Captcha.prototype.disable=function(){this.getControl().getNode().attr('disabled','disabled');return Nth.FormBuilder.Element.prototype.disable.call(this);}
Captcha.prototype.focus=function(){Nth.FormBuilder.Element.prototype.focus.call(this);this.getControl().getNode().focus();return this;}
Captcha.prototype.blur=function(){Nth.FormBuilder.Element.prototype.blur.call(this);this.getControl().getNode().blur();return this;}
Captcha.prototype.getInitUrl=function(){var initUrl=this.getOption('initUrl');if(typeof initUrl==='function'){return initUrl.apply(this);}else if(typeof initUrl==='string'){if(!$.trim(initUrl).match(/^https?:\/\//)){initUrl=this.getConfigParam('siteRoot')+initUrl;}
var queryParams='t='+new Date().getTime()+'&captcha_name='+this.getName();return(initUrl&&~initUrl.indexOf('?')?'&':'?')+queryParams;}
return null;}
Captcha.prototype.getImageContainer=function(){if(this.getOption('imageContainer')){var $wrapper=$.getElement(this.getOption('imageContainer'));if(!$wrapper.find('.'+this.getOption('imageContainerClass')).length){$wrapper.append($('<div/>',{'class':this.getOption('imageContainerClass')}));}
return $wrapper.find('.'+this.getOption('imageContainerClass'));}
return this.getWrapper().getNode().find('.'+this.getOption('imageContainerClass'));}
Captcha.prototype.changeValue=function(){var $container=this.getImageContainer();var $img=$container.find('img');$img.attr('src',this.getInitUrl());return this;}
Captcha.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add Captcha element to DrawingBoard');return;}
var captcha=new Captcha(true,this.getOptionsCopy());this.getDrawingBoard().getFieldset().addComponent(captcha);captcha.inactiveOthers();return this;}
Captcha.prototype.cloneToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t clone Captcha element to DrawingBoard');return;}
var captcha=new Captcha(true,this.getOptionsClone());this.getDrawingBoard().getFieldset().addComponent(captcha);captcha.inactiveOthers();return this;}
Captcha.prototype.getPropertySetters=function(){if(!this.hasDrawingBoard()){return[];}
var options=Nth.FormBuilder.Element.prototype.getPropertySetters.call(this);var propertySetter=new Nth.FormBuilder.PropertySetter(this);options.push.apply(options,[propertySetter.getMarksMandatorySetter(),propertySetter.getValidNameSetter(),propertySetter.getValidUrlSetter(),propertySetter.getInitUrlSetter(),propertySetter.getImageContainerSetter(),propertySetter.getElementIdSetter(),propertySetter.getElementNameSetter(),propertySetter.getElementClassSetter(),propertySetter.getElementStyleSetter(),propertySetter.getPlaceholderSetter(),propertySetter.getElementTitleSetter(),propertySetter.getRequiredSetter(),propertySetter.getBindIndexSetter()]);return options;}
Captcha.prototype.getValidUrl=function(){var validUrl=this.getOption('validUrl');if(typeof validUrl==='function'){return validUrl.apply(this);}else if(typeof validUrl==='string'){if(!$.trim(validUrl).match(/^https?:\/\//)){validUrl=this.getConfigParam('siteRoot')+validUrl;}
return validUrl+=(~validUrl.indexOf('?')?'&':'?')+'captcha_name='+this.getName();}
return null;}
Captcha.prototype.isValid=function(options){if(typeof options==='function'){options={done:options}}
options=new Nth.Options($.extend({},{start:function(){},done:function(){}},options));var inst=this;var done=function(){options.getOption('done').call(inst);return inst;}
this.hideMessage().setMessage(null);if(false===options.getOption('start').call(this)){return done();}
var strHelper=new Nth.Helper.String();var validator=Nth.Validator.__getInstance();var validName=this.getValidName();if(this.getOption('required')&&this.isEmpty()){strHelper.setString(validator.getOption('retypeText'));this.setMessage(strHelper.sprintf(validName));return done();}
var validator=new Nth.Validator.Captcha({url:this.getValidUrl()});validator.isValid(function(success){if(!success){inst.setMessage(this.getMessage());}
return done();});return this;}
Captcha.prototype.toJson=function(){var json=Nth.FormBuilder.Element.prototype.toJson.call(this);json.options.controlAttributes=this.getControl().getAttributes();return json;}
Captcha.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null,parentComponent:null},options);var fb=Nth.FormBuilder.__getInstance();var $xml=fb.getXmlObject(xml,'component');var name=$xml.attr('name');$xml.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});return new Captcha(name,options);}
Nth.FormBuilder.Element.Captcha=Captcha;return Captcha;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/FormBuilder/Element'],factory);}else{factory(Nth);}})(function(Nth){var Checkbox=function(name,options){Nth.FormBuilder.Element.call(this,name,$.extend(true,{bindName:'',columnRefer:null,idPrefix:'_checkbox_',creatorIconClass:'icon checkbox',creatorLabel:'Checkbox',controlAttributes:{type:'checkbox'}},options));name=this.getName();var inst=this;var rc=new Nth.ReflectionClass(this.__CLASS__);var controlAttributes=this.getOption('controlAttributes',{});var controlId=this.getConfigParam('controlIdPrefix')+name;var $control=$('<input/>',$.extend({},{id:controlId,name:name},controlAttributes));$control.addClass(this.getConfigParam('elementClass')+' simple');this.control=new Nth.Dom.Node($control);var labelAttributes=this.getOption('labelAttributes',{});if(labelAttributes['for']===undefined){this.getLabel().getNode().attr('for',controlId);}
this.getWrapper().getNode().addClass(rc.getShortName().toLowerCase()).prepend($control);if(this.existsOption('value')){this.setValue(this.getOption('value'));}
if(typeof $().iCheck==='function'){$control.iCheck(inst.getiCheckOptions());$control.on('ifChanged',function(){$(this).trigger('change');});}
if(this.getOption('checked')){this.check();}
if(this.getOption('disabled')){this.disable();}}
Checkbox.prototype=Object.create(Nth.FormBuilder.Element.prototype);Checkbox.prototype.constructor=Checkbox;Checkbox.prototype.__CLASS__='Nth.FormBuilder.Element.Checkbox';Checkbox.prototype.getControl=function(){return this.control;}
Checkbox.prototype.getValue=function(){return this.getControl().getNode().val();}
Checkbox.prototype.getData=function(){var item={name:this.getName(),value:this.getValue(),columnRefer:this.getOption('columnRefer'),checked:this.checked()}
this.getWrapper().getNode().trigger('nth.fb.export-data',[item,this]);return item;}
Checkbox.prototype.setValue=function(value){this.getControl().getNode().val(value);this.getWrapper().getNode().trigger('nth.fb.set-value',[value,this]);return this;}
Checkbox.prototype.enable=function(){this.getControl().getNode().removeAttr('disabled');return Nth.FormBuilder.Element.prototype.enable.call(this);}
Checkbox.prototype.disable=function(){this.getControl().getNode().attr('disabled','disabled');return Nth.FormBuilder.Element.prototype.disable.call(this);}
Checkbox.prototype.isEmpty=function(){return!this.checked();}
Checkbox.prototype.checked=function(){return this.getControl().getNode().prop('checked');}
Checkbox.prototype.check=function(){var $control=this.getControl().getNode();if($control.data('iCheck')){$control.iCheck('check');}else{$control.prop('checked',true).attr('checked',true);}
return this;}
Checkbox.prototype.uncheck=function(){var $control=this.getControl().getNode();if($control.data('iCheck')){$control.iCheck('uncheck');}else{$control.prop('checked',false).removeAttr('checked');}
return this;}
Checkbox.prototype.getiCheckOptions=function(){return this.getOption('iCheckOptions',{checkboxClass:'icheckbox_minimal',radioClass:'iradio_minimal'});}
Checkbox.prototype.reset=function(){if(this.getOption('checked')){this.check();}else{this.uncheck();}
return this;}
Checkbox.prototype.focus=function(){Nth.FormBuilder.Element.prototype.focus.call(this);this.getControl().getNode().focus();return this;}
Checkbox.prototype.blur=function(){Nth.FormBuilder.Element.prototype.blur.call(this);this.getControl().getNode().blur();return this;}
Checkbox.prototype.isValid=function(options){if(typeof options==='function'){options={done:options}}
options=new Nth.Options($.extend({},{start:function(){},done:function(){}},options));this.hideMessage().setMessage(null);var inst=this;var done=function(){options.getOption('done').call(inst);return inst;}
if(false===options.getOption('start').call(this)){return done();}
var strHelper=new Nth.Helper.String();var validator=Nth.Validator.__getInstance();var validName=this.getValidName();if(this.getOption('required')&&this.isEmpty()){var requiredText=validator.getOption('reselectText');strHelper.setString(requiredText);this.setMessage(strHelper.sprintf(validName));return done();}
return done();}
Checkbox.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add Checkbox element to DrawingBoard');return;}
var checkbox=new Checkbox(true,this.getOptionsCopy());this.getDrawingBoard().getFieldset().addComponent(checkbox);checkbox.inactiveOthers();return this;}
Checkbox.prototype.cloneToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t clone Checkbox element to DrawingBoard');return;}
var checkbox=new Checkbox(true,this.getOptionsClone());this.getDrawingBoard().getFieldset().addComponent(checkbox);checkbox.inactiveOthers();return this;}
Checkbox.prototype.getPropertySetters=function(){if(!this.hasDrawingBoard()){return[];}
var options=Nth.FormBuilder.Element.prototype.getPropertySetters.call(this);var propertySetter=new Nth.FormBuilder.PropertySetter(this);options.push.apply(options,[propertySetter.getValueSetter(),propertySetter.getCheckedSetter(),propertySetter.getRequiredSetter(),propertySetter.getMarksMandatorySetter(),propertySetter.getValidNameSetter(),propertySetter.getColumnReferSetter(),propertySetter.getElementIdSetter(),propertySetter.getElementNameSetter(),propertySetter.getElementClassSetter(),propertySetter.getElementStyleSetter(),propertySetter.getElementTitleSetter(),propertySetter.getBindNameSetter(),propertySetter.getBindIndexSetter()]);return options;}
Checkbox.prototype.toJson=function(){var json=Nth.FormBuilder.Element.prototype.toJson.call(this);var controlAttributes=this.getControl().getAttributes();if(this.checked()){controlAttributes.checked=true;}else{delete controlAttributes.checked;}
json.options.controlAttributes=controlAttributes;return json;}
Checkbox.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null,parentComponent:null},options);var fb=Nth.FormBuilder.__getInstance();var $xml=fb.getXmlObject(xml,'component');var name=$xml.attr('name');$xml.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});return new Checkbox(name,options);}
Nth.FormBuilder.Element.Checkbox=Checkbox;return Checkbox;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/DateTime','Nth/Validator/Date','Nth/FormBuilder/Element','bootstrap-datetimepicker'],factory);}else{factory(Nth);}})(function(Nth){var Date=function(name,options){Nth.FormBuilder.Element.call(this,name,$.extend(true,{idPrefix:'_date_',creatorIconClass:'icon date',creatorLabel:'Date',triggerHtml:'<i class="fa fa-calendar"></i>',controlAttributes:{type:'text'},validators:[new Nth.Validator.Date()]},options));name=this.getName();var rc=new Nth.ReflectionClass(this.__CLASS__);var controlAttributes=this.getOption('controlAttributes',{});var controlId=this.getConfigParam('controlIdPrefix')+name;var $inputGroup=$('<div/>',{'class':'input-group'});this.inputGroup=new Nth.Dom.Node($inputGroup);var $control=$('<input/>',$.extend({},{id:controlId,name:name},controlAttributes));$control.addClass(this.getConfigParam('elementClass')).removeClass('hasDatepicker');this.control=new Nth.Dom.Node($control);var $inputGroupAddon=$('<span/>',{'class':'input-group-addon'}).html(this.getOption('triggerHtml'));this.inputGroupAddon=new Nth.Dom.Node($inputGroupAddon);$inputGroup.append($control,$inputGroupAddon);this.getWrapper().getNode().addClass(rc.getShortName().toLowerCase()).append($inputGroup);var labelAttributes=this.getOption('labelAttributes',{});if(typeof labelAttributes['for']==='undefined'){this.getLabel().getNode().attr('for',controlId);}
if(this.getOption('autoInit',true)){this.init();}}
Date.prototype=Object.create(Nth.FormBuilder.Element.prototype);Date.prototype.constructor=Date;Date.prototype.__CLASS__='Nth.FormBuilder.Element.Date';Date.prototype.init=function(){this.initFilters().hookFilters();this.initValidators().hookValidators();var dpOptions=this.getDefaultDpOptions();if(dpOptions.format){this.getInputGroup().getNode().datetimepicker(dpOptions);this.dateTimePicker=this.getInputGroup().getNode().data('DateTimePicker');}
if(this.existsOption('value')){this.setValue(this.getOption('value'));}else if(this.hasDefaultValue()){this.setValue(this.getDefaultValue());}
if(this.getOption('disabled')){this.disable();}else{this.enableTrigger();}
this.getWrapper().getNode().trigger('nth.fb.bound',[this]);return this;}
Date.prototype.getControl=function(){return this.control;}
Date.prototype.getInputGroup=function(){return this.inputGroup;}
Date.prototype.getInputGroupAddon=function(){return this.inputGroupAddon;}
Date.prototype.getDateTimePicker=function(){return this.dateTimePicker;}
Date.prototype.getDefaultDpOptions=function(){var options=$.extend(true,{format:'DD/MM/YYYY',showTodayButton:true,showClear:true,showClose:true,focusOnShow:false,locale:'vi',allowInputToggle:false,useCurrent:false},this.getOption('dateTimePickerOptions'));var datev=this.getValidator('Nth.Validator.Date');if(datev){options.format=datev.getOption('format');}
return options;}
Date.prototype.enableTrigger=function(){var datepicker=this.getDateTimePicker();if(datepicker){this.disableTrigger();this.getInputGroupAddon().getNode().on('click.datepicker',function(){datepicker.show();});}
return this;}
Date.prototype.disableTrigger=function(){var datepicker=this.getDateTimePicker();if(datepicker){datepicker.hide();this.getInputGroupAddon().getNode().off('click.datepicker');}
return this;}
Date.prototype.focus=function(){Nth.FormBuilder.Element.prototype.focus.call(this);this.getControl().getNode().focus();return this;}
Date.prototype.blur=function(){Nth.FormBuilder.Element.prototype.blur.call(this);this.getControl().getNode().blur();return this;}
Date.prototype.enable=function(){this.enableTrigger();this.getControl().getNode().removeAttr('disabled');return Nth.FormBuilder.Element.prototype.enable.call(this);}
Date.prototype.disable=function(){this.disableTrigger();this.getControl().getNode().attr('disabled','disabled');return Nth.FormBuilder.Element.prototype.disable.call(this);}
Date.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add Date element to DrawingBoard');return;}
var date=new Date(true,this.getOptionsCopy());this.getDrawingBoard().getFieldset().addComponent(date);date.inactiveOthers();return this;}
Date.prototype.cloneToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t clone Date element to DrawingBoard');return;}
var date=new Date(true,this.getOptionsClone());this.getDrawingBoard().getFieldset().addComponent(date);date.inactiveOthers();return this;}
Date.prototype.getFormat=function(){var datev=this.getValidator('Nth.Validator.Date');if(datev){return datev.getOption('format');}
var dp=this.getDateTimePicker();if(dp){return dp.options().format;}
return null;}
Date.prototype.setFormat=function(format){var datev=this.getValidator('Nth.Validator.Date');if(datev){datev.setOption('format',format);}
var dp=this.getDateTimePicker();if(dp){dp.options({format:format});}
return this;}
Date.prototype.diagnoseFormatByValue=function(value){if(typeof value==='string'&&value){if(value.length===4){return'YYYY';}
if(value.length>4&&value.length<8){return'MM/YYYY';}
if(value.length>7&&value.length<11){return'DD/MM/YYYY';}}
return null;}
Date.prototype.setValue=function(value,format){format=format||this.getFormat();value=value?Nth.DateTime.parseInputDate(value,format):null;var datepicker=this.getDateTimePicker();if(datepicker){datepicker.date(value);}else{this.getControl().getNode().val(value?value.format(format):null);}
this.getWrapper().getNode().trigger('nth.fb.set-value',[value,this]);return this;}
Date.prototype.getValue=function(){return this.getControl().getNode().val();}
Date.prototype.getData=function(){var item={name:this.getName(),value:this.getValue(),columnRefer:this.getOption('columnRefer')}
this.getWrapper().getNode().trigger('nth.fb.export-data',[item,this]);return item;}
Date.prototype.isValid=function(options){if(typeof options==='function'){options={done:options}}
options=new Nth.Options($.extend({},{start:function(){},done:function(){}},options));this.hideMessage().setMessage(null);var inst=this;var done=function(){options.getOption('done').call(inst);return inst;}
if(false===options.getOption('start').call(this)){return done();}
var value=this.getValue();var strHelper=new Nth.Helper.String();var validator=Nth.Validator.__getInstance();var validName=this.getValidName();if(this.getOption('required')&&this.isEmpty()){var requiredText=validator.getOption('retypeText');strHelper.setString(requiredText);this.setMessage(strHelper.sprintf(validName));return done();}
if(this.isEmpty()){return done();}
$.each(this.getValidators(),function(i,validator){if(!validator.isValid(value)){inst.setMessage(validator.getMessage());return false;}});return done();}
Date.prototype.getSupportValidators=function(){return{removable:false,validators:[{validator:new Nth.Validator.Date(),checked:true}]}}
Date.prototype.getPropertySetters=function(){if(!this.hasDrawingBoard()){return[];}
var options=Nth.FormBuilder.Element.prototype.getPropertySetters.call(this);var propertySetter=new Nth.FormBuilder.PropertySetter(this);options.push.apply(options,[propertySetter.getRequiredSetter(),propertySetter.getMarksMandatorySetter(),propertySetter.getValidatorsSetter(),propertySetter.getValidNameSetter(),propertySetter.getColumnReferSetter(),propertySetter.getElementIdSetter(),propertySetter.getElementNameSetter(),propertySetter.getElementClassSetter(),propertySetter.getElementStyleSetter(),propertySetter.getReadonlySetter(),propertySetter.getAutocompleteSetter(),propertySetter.getPlaceholderSetter(),propertySetter.getElementTitleSetter(),propertySetter.getBindBySetter(),propertySetter.getBindNameSetter(),propertySetter.getValidElementRequiredSetter(),propertySetter.getBindConstraintSetter(),propertySetter.getBindIndexSetter()]);return options;}
Date.prototype.toJson=function(){var json=Nth.FormBuilder.Element.prototype.toJson.call(this);var controlAttributes=this.getControl().getAttributes();if(this.isEmpty()||this.getDefaultValue()){delete controlAttributes.value;}else{controlAttributes.value=this.getValue();delete json.options.defaultValue;}
json.options.controlAttributes=controlAttributes;return json;}
Date.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null,parentComponent:null},options);var fb=Nth.FormBuilder.__getInstance();var $xml=fb.getXmlObject(xml,'component');var name=$xml.attr('name');$xml.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});options['validators']=[new Nth.Validator.DateTime({formats:[{name:'Ngày/Tháng/Năm',format:'DD/MM/YYYY',isCurrent:true},{name:'Tháng/Năm',format:'MM/YYYY'},{name:'Năm',format:'YYYY'}]})];return new Nth.FormBuilder.Element.DateTime(name,options);}
Nth.FormBuilder.Element.Date=Date;return Date;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/DateTime','Nth/Validator/DateTime','Nth/FormBuilder/Element','bootstrap-datetimepicker'],factory);}else{factory(Nth);}})(function(Nth){var DateTime=function(name,options){Nth.FormBuilder.Element.call(this,name,$.extend(true,{idPrefix:'_datetime_',creatorIconClass:'icon date',creatorLabel:'DateTime',triggerHtml:'<i class="fa fa-calendar"></i>',controlAttributes:{type:'text'}},options));name=this.getName();var rc=new Nth.ReflectionClass(this.__CLASS__);var controlAttributes=this.getOption('controlAttributes',{});var controlId=this.getConfigParam('controlIdPrefix')+name;var $inputGroup=$('<div/>',{'class':'input-group'});this.inputGroup=new Nth.Dom.Node($inputGroup);var $control=$('<input/>',$.extend({},{id:controlId,name:name},controlAttributes));$control.addClass(this.getConfigParam('elementClass'));this.control=new Nth.Dom.Node($control);var $inputGroupAddon=$('<span/>',{'class':'input-group-addon'}).html(this.getOption('triggerHtml'));this.inputGroupAddon=new Nth.Dom.Node($inputGroupAddon);$inputGroup.append($control,$inputGroupAddon);this.getWrapper().getNode().addClass(rc.getShortName().toLowerCase()).append($inputGroup);var labelAttributes=this.getOption('labelAttributes',{});if(typeof labelAttributes['for']==='undefined'){this.getLabel().getNode().attr('for',controlId);}
if(this.getOption('autoInit',true)){this.init();}}
DateTime.prototype=Object.create(Nth.FormBuilder.Element.prototype);DateTime.prototype.constructor=DateTime;DateTime.prototype.__CLASS__='Nth.FormBuilder.Element.DateTime';DateTime.prototype.init=function(){var inst=this;this.initFilters().hookFilters();this.initValidators();if(!this.hasValidator('Nth.Validator.DateTime')){this.setValidator(new Nth.Validator.DateTime({formats:this.getOption('formats')}));}
this.getInputGroup().getNode().datetimepicker(this.getDefaultDpOptions());this.dateTimePicker=this.getInputGroup().getNode().data('DateTimePicker');this.hookValidators();this.createFormatDropdown();if(this.existsOption('value')){this.setValue(this.getOption('value'));}else if(this.hasDefaultValue()){this.setValue(this.getDefaultValue());}
if(this.getOption('disabled')){this.disable();}
this.getWrapper().getNode().trigger('nth.fb.bound',[this]);this.getWrapper().getNode().on('nth.fb.import-data.myself',function(e,item){if(!item.format||typeof item.format!=='string'){if(item.value.length===4){item.format='YYYY';}else if(item.value.length===7){item.format='MM/YYYY';}else{item.format='DD/MM/YYYY';}}
inst.setCurrentFormat(item.format);});return this;}
DateTime.prototype.getControl=function(){return this.control;}
DateTime.prototype.getInputGroup=function(){return this.inputGroup;}
DateTime.prototype.getInputGroupAddon=function(){return this.inputGroupAddon;}
DateTime.prototype.getDateTimePicker=function(){return this.dateTimePicker;}
DateTime.prototype.getFormatDropdown=function(){return this.formatDropdown;}
DateTime.prototype.createFormatDropdown=function(){var inst=this;var $ipgrp=$('<div/>',{'class':'input-group-btn'});var $button=$('<button/>',{type:"button",'class':"btn btn-default dropdown-toggle",'data-toggle':"dropdown",'aria-haspopup':true,'aria-expanded':false}).html('<span class="caret"></span>');var $dropdown=$('<ul/>',{'class':"dropdown-menu"});var formats=this.getFormats();var cf=this.getCurrentFormat();$.each(formats,function(i,options){var $li=$('<li/>').data('options',options);var $a=$('<a/>',{href:'#'}).on('click.dateTimePicker',function(e){e.preventDefault();inst.setDefaultValue(options.defaultValue);inst.setCurrentFormat(options.format);}).html(options.name);if(options.format===cf.format){inst.setDefaultValue(options.defaultValue);}
$dropdown.append($li.append($a));});$ipgrp.on('shown.bs.dropdown',function(){var cf=inst.getCurrentFormat();$dropdown.children('li').each(function(){var options=$(this).data('options');if(cf.format===options.format){$(this).addClass('active');}else{$(this).removeClass('active');}});});if(formats.length<2){$ipgrp.hide();}
this.formatDropdown=new Nth.Dom.Node($ipgrp);this.getInputGroup().getNode().prepend($ipgrp.append($button,$dropdown));return this;}
DateTime.prototype.getDefaultDpOptions=function(){var options=$.extend(true,{format:this.getCurrentFormat().format,showTodayButton:true,showClear:true,showClose:true,focusOnShow:false,locale:'vi',allowInputToggle:false,useCurrent:false},this.getOption('dateTimePickerOptions'));return options;}
DateTime.prototype.focus=function(){Nth.FormBuilder.Element.prototype.focus.call(this);this.getControl().getNode().focus();return this;}
DateTime.prototype.blur=function(){Nth.FormBuilder.Element.prototype.blur.call(this);this.getControl().getNode().blur();return this;}
DateTime.prototype.enable=function(){this.getControl().getNode().removeAttr('disabled');return Nth.FormBuilder.Element.prototype.enable.call(this);}
DateTime.prototype.disable=function(){this.getDateTimePicker().hide();this.getControl().getNode().attr('disabled','disabled');return Nth.FormBuilder.Element.prototype.disable.call(this);}
DateTime.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add DateTime element to DrawingBoard');return;}
var date=new DateTime(true,this.getOptionsCopy());this.getDrawingBoard().getFieldset().addComponent(date);date.inactiveOthers();return this;}
DateTime.prototype.cloneToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t clone DateTime element to DrawingBoard');return;}
var date=new DateTime(true,this.getOptionsClone());this.getDrawingBoard().getFieldset().addComponent(date);date.inactiveOthers();return this;}
DateTime.prototype.getCurrentFormat=function(){return this.getValidator('Nth.Validator.DateTime').getCurrentFormat();}
DateTime.prototype.setCurrentFormat=function(format){this.getValidator('Nth.Validator.DateTime').setCurrentFormat(format);this.getDateTimePicker().hide().options({format:format});return this;}
DateTime.prototype.setFormats=function(formats){if(!$.isArray(formats)){throw"formats must be an array";}
this.getValidator('Nth.Validator.DateTime').setFormats(formats);this.createFormatDropdown();return this;}
DateTime.prototype.getFormats=function(){return this.getValidator('Nth.Validator.DateTime').getFormats();}
DateTime.prototype.getFormat=function(format){return this.getValidator('Nth.Validator.DateTime').getFormat(format);}
DateTime.prototype.setValue=function(value){if(value){var options=this.getCurrentFormat();value=Nth.DateTime.parseInputDate(value,options.format);}
this.getDateTimePicker().date(value);this.getWrapper().getNode().trigger('nth.fb.set-value',[value,this]);return this;}
DateTime.prototype.getValue=function(){return this.getControl().getNode().val();}
DateTime.prototype.getData=function(){var item={name:this.getName(),value:this.getValue(),columnRefer:this.getOption('columnRefer')}
this.getWrapper().getNode().trigger('nth.fb.export-data',[item,this]);return item;}
DateTime.prototype.isValid=function(options){if(typeof options==='function'){options={done:options}}
options=new Nth.Options($.extend({},{start:function(){},done:function(){}},options));this.hideMessage().setMessage(null);var inst=this;var done=function(){options.getOption('done').call(inst);return inst;}
if(false===options.getOption('start').call(this)){return done();}
var value=this.getValue();var strHelper=new Nth.Helper.String();var validator=this.getValidator('Nth.Validator.DateTime');var validName=this.getValidName();if(this.getOption('required')&&this.isEmpty()){var requiredText=validator.getOption('retypeText');strHelper.setString(requiredText);this.setMessage(strHelper.sprintf(validName));return done();}
if(this.isEmpty()){return done();}
if(!validator.isValid(value)){inst.setMessage(validator.getMessage());return false;}
return done();}
DateTime.prototype.getSupportValidators=function(){return{removable:false,validators:[{validator:new Nth.Validator.DateTime(),checked:true}]}}
DateTime.prototype.getPropertySetters=function(){if(!this.hasDrawingBoard()){return[];}
var options=Nth.FormBuilder.Element.prototype.getPropertySetters.call(this);var propertySetter=new Nth.FormBuilder.PropertySetter(this);options.push.apply(options,[propertySetter.getRequiredSetter(),propertySetter.getMarksMandatorySetter(),propertySetter.getValidatorsSetter(),propertySetter.getValidNameSetter(),propertySetter.getColumnReferSetter(),propertySetter.getElementIdSetter(),propertySetter.getElementNameSetter(),propertySetter.getElementClassSetter(),propertySetter.getElementStyleSetter(),propertySetter.getReadonlySetter(),propertySetter.getAutocompleteSetter(),propertySetter.getPlaceholderSetter(),propertySetter.getElementTitleSetter(),propertySetter.getBindBySetter(),propertySetter.getBindNameSetter(),propertySetter.getValidElementRequiredSetter(),propertySetter.getBindConstraintSetter(),propertySetter.getBindIndexSetter()]);return options;}
DateTime.prototype.toJson=function(){var json=Nth.FormBuilder.Element.prototype.toJson.call(this);var controlAttributes=this.getControl().getAttributes();if(this.isEmpty()||this.getDefaultValue()){delete controlAttributes.value;}else{controlAttributes.value=this.getValue();delete json.options.defaultValue;}
json.options.controlAttributes=controlAttributes;return json;}
DateTime.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null,parentComponent:null},options);var fb=Nth.FormBuilder.__getInstance();var $xml=fb.getXmlObject(xml,'component');var name=$xml.attr('name');$xml.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});return new DateTime(name,options);}
Nth.FormBuilder.Element.DateTime=DateTime;return DateTime;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Browser','Nth/FormBuilder/Element','Nth/File/FileIcon','Nth/Validator/File'],factory);}else{factory(Nth);}})(function(Nth){var File=function(name,options){Nth.FormBuilder.Element.call(this,name,$.extend(true,{idPrefix:'_file_',creatorIconClass:'icon file',creatorLabel:'File',pathSeparator:':',rmofcn:'',rmafcn:'',rmofcnPrefix:'_remove_files_',rmafcnPrefix:'_remain_files_',fileListShow:true,fileListRemovable:true,fileListAAttributes:{},fileListEmptyText:'',uploadDirectory:'',validators:[{name:'Nth.Validator.File',options:{maxLength:5,validExtension:'doc|docx|xls|xlsx|pdf|rar|zip|dxf|jpe?g|png|gif|odt'}}],customInput:true,ipgrpAttributes:{},ipgrpAddonAfter:false,chooseText:'Chọn tệp tin'},options));name=this.getName();var inst=this;var rc=new Nth.ReflectionClass(this.__CLASS__);var controlId=this.getConfigParam('controlIdPrefix')+name;var controlAttributes=this.getOption('controlAttributes',{});if(this.getOption('multiple')){controlAttributes.multiple=true;}
var $control=$('<input/>',$.extend({},{type:'file',id:controlId,name:controlAttributes.multiple?name+'[]':name,'class':this.getConfigParam('elementClass')},controlAttributes));if(false===this.getOption('control',true)){$control.hide();}
this.control=new Nth.Dom.Node($control);var labelAttributes=this.getOption('labelAttributes',{});if(typeof labelAttributes['for']==='undefined'){this.getLabel().getNode().attr('for',controlId);}
this.getWrapper().getNode().addClass(rc.getShortName().toLowerCase());if(this.getOption('customInput')){var $ipgrp=$('<div/>',$.extend({},{'class':'input-group'},this.getOption('ipgrpAttributes')));if(false===this.getOption('control',true)){$ipgrp.hide();}
var $ipgrpControl=$('<input/>',{type:"text",'class':"form-control",readonly:true}).on('blur.Nth.FormBuilder.Element.File',function(){inst.getControl().getNode().trigger('blur');}).on('keydown.Nth.FormBuilder.Element.File',function(e){if(e.which===13){var browser=new Nth.Browser();if(!browser.isIE()){inst.getControl().getNode().trigger('click');}}else if(e.which===8||e.which===46){if($control.val()){$ipgrpControl.val('');$control=$control.val('').clone(true);inst.getControl().getNode().replaceWith($control);inst.control=new Nth.Dom.Node($control);}
return false;}else if(e.which===9){return;}else{return false;}});var $ipgrpButton=$('<span/>',{'class':'input-group-btn'});var $ipgrpButtonButton=$('<button/>',{type:'button','class':'btn btn-default',tabIndex:-1}).html(this.getOption('chooseText'));$control.on('change.Nth.FormBuilder.Element.File',function(){if(this.files){var filenames=[];for(var i=0;i<this.files.length;i++){filenames.push(this.files[i].name);}
var chosen=filenames.join(inst.getOption('pathSeparator'));$ipgrpControl.val(chosen).attr('title',chosen);}else{var fakepath=$(this).val();var file=new Nth.File.File(fakepath);$ipgrpControl.val(file.getBasename()).attr('title',fakepath);}}).addClass('custom-file').attr('tabIndex',-1);$ipgrpButton.append($ipgrpButtonButton,$control);if(this.getOption('ipgrpAddonAfter',true)){$ipgrp.append($ipgrpControl,$ipgrpButton);}else{$ipgrp.append($ipgrpButton,$ipgrpControl);}
this.getWrapper().getNode().append($ipgrp);}else{this.getWrapper().getNode().append($control);}
if(this.existsOption('value')){this.setValue(this.getOption('value'));}else if(this.hasDefaultValue()){this.setValue(this.getDefaultValue());}
if(this.getOption('disabled')){this.disable();}}
File.prototype=Object.create(Nth.FormBuilder.Element.prototype);File.prototype.constructor=File;File.prototype.__CLASS__='Nth.FormBuilder.Element.File';File.prototype.getControl=function(){return this.control;}
File.prototype.enable=function(){this.getControl().getNode().removeAttr('disabled');return Nth.FormBuilder.Element.prototype.enable.call(this);}
File.prototype.disable=function(){this.getControl().getNode().attr('disabled','disabled');return Nth.FormBuilder.Element.prototype.disable.call(this);}
File.prototype.setMultiple=function(multiple){var $control=this.getControl().getNode();var name=$control.attr('name');if(multiple){if(!name.match(/\[\]$/)){name+='[]';}
$control.attr('multiple',multiple);}else{name=name.replace(/\[\]$/,'');$control.removeAttr('multiple');}
$control.attr('name',name).prop('multiple',multiple);return name;}
File.prototype.setValue=function(value){this.setOption('value',value);this.createFileList();this.getWrapper().getNode().trigger('nth.fb.set-value',[value,this]);return this;}
File.prototype.getValue=function(){return this.getOption('value','');}
File.prototype.getArrayValue=function(){var val=this.getValue()||'';if(typeof val==='string'){val=val.split(this.getOption('pathSeparator'));}
return val.filter(function(a){return!!a;});}
File.prototype.getChosen=function(){return this.getControl().getNode()[0].files;}
File.prototype.isEmpty=function(){return!this.getArrayValue().length&&!this.getChosen().length;}
File.prototype.getRmofcn=function(){var name=this.getName();var rmofcn=this.getOption('rmofcn');var rmofcnPrefix=this.getOption('rmofcnPrefix','');if(rmofcn){return rmofcnPrefix+rmofcn;}
return rmofcnPrefix+name;}
File.prototype.getRmafcn=function(){var name=this.getName();var rmafcn=this.getOption('rmafcn');var rmafcnPrefix=this.getOption('rmafcnPrefix','');if(rmafcn){return rmafcnPrefix+rmafcn;}
return rmafcnPrefix+name;}
File.prototype.createFileList=function(){var inst=this;var pathSeparator=this.getOption('pathSeparator');var $wrapper=this.getWrapper().getNode().children('.file-list');if(!$wrapper.length){$wrapper=$('<div/>',{'class':'file-list'});this.getWrapper().getNode().append($wrapper);}
var rmofcn=this.getRmofcn();var rmafcn=this.getRmafcn();var $removeFiles=$('<input/>',{type:'hidden',id:rmofcn,name:rmofcn});var $remainFiles=$('<input/>',{type:'hidden',id:rmafcn,name:rmafcn,value:this.getValue()});$wrapper.html(null).append($removeFiles,$remainFiles);if(!this.getOption('fileListShow')){return $wrapper;}
var $ul=$('<ul/>');$.each(this.getArrayValue(),function(i,path){var file=new Nth.File.File(path);var $li=$('<li/>');var $a=$('<a/>',$.extend({},{'class':'file-info',href:inst.getOption('uploadDirectory')+path},inst.getOption('fileListAAttributes'))).data('fb-file-path',path);var $icon=new Nth.File.FileIcon(new Nth.File.File(path)).getDomNode();var $path=$('<span/>').html(file.getBasename());$a.append($icon,$path);if(inst.getOption('fileListRemovable')){var $trash=$('<a/>',{href:'javascript:;','class':'trash-file',title:'Remove this file'}).html('<i class="fa fa-trash-o"></i>').on('click',function(){$li.addClass('removed');var val=$removeFiles.val().split(pathSeparator);val.push(path);$removeFiles.val(val.filter(function(v){return!!v}).join(pathSeparator));var remainFiles=[];$ul.find('li:not(.removed) a.file-info').each(function(){remainFiles.push($(this).data('fb-file-path'));});$remainFiles.val(remainFiles.join(pathSeparator));});$li.prepend($trash);}
$ul.append($li.append($a));});return $wrapper.append($ul);}
File.prototype.focus=function(){Nth.FormBuilder.Element.prototype.focus.call(this);this.getControl().getNode().focus();return this;}
File.prototype.blur=function(){Nth.FormBuilder.Element.prototype.blur.call(this);this.getControl().getNode().blur();return this;}
File.prototype.reset=function(){return this;}
File.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add File element to DrawingBoard');return;}
var file=new File(true,this.getOptionsCopy());this.getDrawingBoard().getFieldset().addComponent(file);file.inactiveOthers();return this;}
File.prototype.cloneToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t clone File element to DrawingBoard');return;}
var file=new File(true,this.getOptionsClone());this.getDrawingBoard().getFieldset().addComponent(file);file.inactiveOthers();return this;}
File.prototype.getPropertySetters=function(){if(!this.hasDrawingBoard()){return[];}
var options=Nth.FormBuilder.Element.prototype.getPropertySetters.call(this);var propertySetter=new Nth.FormBuilder.PropertySetter(this);options.push.apply(options,[propertySetter.getRequiredSetter(),propertySetter.getMarksMandatorySetter(),propertySetter.getValidNameSetter(),propertySetter.getColumnReferSetter(),propertySetter.getElementIdSetter(),propertySetter.getElementClassSetter(),propertySetter.getElementStyleSetter(),propertySetter.getElementTitleSetter(),propertySetter.getBindIndexSetter()]);return options;}
File.prototype.isValid=function(options){if(typeof options==='function'){options={done:options}}
options=new Nth.Options($.extend({},{start:function(){},done:function(){}},options));var inst=this;var done=function(){options.getOption('done').call(inst);return inst;}
this.hideMessage().setMessage(null);if(false===options.getOption('start').call(this)){return done();}
var strHelper=new Nth.Helper.String();var validator=Nth.Validator.__getInstance();var validName=this.getValidName();if(this.getOption('required')&&this.isEmpty()){strHelper.setString(validator.getOption('reselectText'));this.setMessage(strHelper.sprintf(validName));return done();}
var validator=this.getValidator('Nth.Validator.File');if(validator&&!validator.isValid(this.getControl().getNode())){this.setMessage(validator.getMessage());return done();}
return done();}
File.prototype.toJson=function(){var json=Nth.FormBuilder.Element.prototype.toJson.call(this);if(this.isEmpty()){delete json.options.value;}else{json.options.value=this.getValue();}
json.options.controlAttributes=this.getControl().getAttributes();return json;}
File.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null,parentComponent:null},options);var fb=Nth.FormBuilder.__getInstance();var $xml=fb.getXmlObject(xml,'component');var name=$xml.attr('name');$xml.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});return new File(name,options);}
Nth.FormBuilder.Element.File=File;return File;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/FormBuilder/Element'],factory);}else{factory(Nth);}})(function(Nth){var Label=function(name,options){Nth.FormBuilder.Element.call(this,name,$.extend(true,{idPrefix:'_label_',creatorIconClass:'icon label',creatorLabel:'Label'},options));var rc=new Nth.ReflectionClass(this.__CLASS__);this.getWrapper().getNode().addClass(rc.getShortName().toLowerCase());}
Label.prototype=Object.create(Nth.FormBuilder.Element.prototype);Label.prototype.constructor=Label;Label.prototype.__CLASS__='Nth.FormBuilder.Element.Label';Label.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add Label element to DrawingBoard');return;}
var label=new Label(true,this.getOptionsCopy());this.getDrawingBoard().getFieldset().addComponent(label);label.inactiveOthers();return this;}
Label.prototype.cloneToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t clone Label element to DrawingBoard');return;}
var label=new Label(true,this.getOptionsClone());this.getDrawingBoard().getFieldset().addComponent(label);label.inactiveOthers();return this;}
Label.prototype.isValid=function(options){if(typeof options==='function'){options={done:options}}
options=new Nth.Options($.extend({},{start:function(){},done:function(){}},options));var inst=this;var done=function(){options.getOption('done').call(inst);return inst;}
this.hideMessage().setMessage(null);return done();}
Label.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null,parentComponent:null},options);var fb=Nth.FormBuilder.__getInstance();var $xml=fb.getXmlObject(xml,'component');var name=$xml.attr('name');$xml.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});return new Label(name,options);}
Nth.FormBuilder.Element.Label=Label;return Label;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/FormBuilder/Element'],factory);}else{factory(Nth);}})(function(Nth){var List=function(name,options){Nth.FormBuilder.Element.call(this,name,$.extend(true,{idPrefix:'_list_',creatorIconClass:'icon list',creatorLabel:'List',minRow:3,maxRow:10},options));var rc=new Nth.ReflectionClass(this.__CLASS__);this.control=this.createControl();this.createRowBody();this.getWrapper().getNode().addClass(rc.getShortName().toLowerCase()).append(this.getControl().getNode());if(this.existsOption('value')){this.setValue(this.getOption('value'));}else if(this.hasDefaultValue()){this.setValue(this.getDefaultValue());}
if(this.getOption('disabled')){this.disable();}}
List.prototype=Object.create(Nth.FormBuilder.Element.prototype);List.prototype.constructor=List;List.prototype.__CLASS__='Nth.FormBuilder.Element.List';List.prototype.enable=function(){this.getControl().getNode().find('.'+this.getConfigParam('elementClass')).removeAttr('disabled');return Nth.FormBuilder.Element.prototype.enable.call(this);}
List.prototype.disable=function(){this.getControl().getNode().find('.'+this.getConfigParam('elementClass')).attr('disabled','disabled');return Nth.FormBuilder.Element.prototype.disable.call(this);}
List.prototype.createRowBody=function(){this.getControl().getNode().html(null);var minRow=this.getOption('minRow',3);while(minRow>0){this.addRow();minRow--;}
return this;}
List.prototype.getControl=function(){return this.control;}
List.prototype.isEmpty=function(){return!this.getValue().length;}
List.prototype.getDefaultValue=function(){var defaultValue=Nth.FormBuilder.Element.prototype.getDefaultValue.call(this);return $.isArray(defaultValue)?defaultValue:[];}
List.prototype.setDefaultValue=function(defaultValue){if(!$.isArray(defaultValue)){console.warn('Default value must be array type');return this;}
return this.getOption('defaultValue',defaultValue);}
List.prototype.getValue=function(){var inst=this;var value=[];this.getRows().each(function(){var _value=$(this).find('.'+inst.getConfigParam('elementClass')).val();if(_value!==''){value.push(_value);}});return value;}
List.prototype.getData=function(){var item={name:this.getName(),value:this.getValue(),columnRefer:this.getOption('columnRefer')}
this.getWrapper().getNode().trigger('nth.fb.export-data',[item,this]);return item;}
List.prototype.setValue=function(value){if(!$.isArray(value)){console.warn('Value must be array type');return this;}
this.cleanValue();if(!value.length){return this;}
var numberRows=this.getNumberRows();if(value.length>numberRows){var rowIncreased=value.length-numberRows;if(value.length>this.getOption('maxRow')){console.warn('The length of value greater than the number of rows accept');rowIncreased=this.getOption('maxRow')-numberRows;}
for(var i=0;i<rowIncreased;i++){this.addRow();}}
var inst=this;this.getRows().each(function(index){$(this).find('.'+inst.getConfigParam('elementClass')).val(value[index]);});this.getWrapper().getNode().trigger('nth.fb.set-value',[value,this]);return this;}
List.prototype.cleanValue=function(){this.getRows().find('.'+this.getConfigParam('elementClass')).val(null);return this;}
List.prototype.setMinRow=function(minRow){var value=this.getValue();this.setOption('minRow',minRow);this.createRowBody();this.setValue(value);return this;}
List.prototype.setMaxRow=function(maxRow){var value=this.getValue();this.setOption('maxRow',maxRow);this.createRowBody();this.setValue(value);return this;}
List.prototype.createControl=function(){var name=this.getName();var $ul=$('<ul/>',$.extend(true,{id:this.getConfigParam('controlIdPrefix')+name},this.getOption('controlAttributes')));return new Nth.Dom.Node($ul);}
List.prototype.getNumberRows=function(){return this.getRows().length;}
List.prototype.getRowByIndex=function(index){return this.getControl().getNode().find('#'+this.getName()+'_lr_'+index);}
List.prototype.addRow=function($relative){var index=this.getMaxRowIndex()+1;var numberRows=this.getNumberRows();if(this.getOption('maxRow')<numberRows){console.warn('The number of rows added exceed the max row setting');return this;}
var $row=this.createRow(index);if($relative){$relative.after($row);}else{this.getControl().getNode().append($row);}
if(this.getOption('maxRow')===numberRows+1){this.disableAddRowAction();}
if(numberRows+1>this.getOption('minRow')){this.enableRemoveRowAction();}else{this.disableRemoveRowAction();}
return this;}
List.prototype.disableAddRowAction=function(){this.getRows().find('.act.add').attr('disabled',true).prop('disabled',true);}
List.prototype.enableAddRowAction=function(){this.getRows().find('.act.add').removeAttr('disabled').prop('disabled',false);}
List.prototype.disableRemoveRowAction=function(){this.getRows().find('.act.remove').attr('disabled',true).prop('disabled',true);}
List.prototype.enableRemoveRowAction=function(){this.getRows().find('.act.remove').removeAttr('disabled').prop('disabled',false);}
List.prototype.createRow=function(index){var name=this.getName();var $li=$('<li/>',{id:name+'_lr_'+index,'data-index':index});var $wrapper=$('<div/>',{id:name+'_iglr_'+index,'class':'lr-ctrl'});var $input=$('<input/>',{id:name+'_lc_'+index,name:name+'_lc_'+index,type:'text','class':this.getConfigParam('elementClass')});var $rowAction=this.createRowAction(index);return $li.append($wrapper.append($input,$rowAction));}
List.prototype.removeRow=function(index){var numberRows=this.getNumberRows();if(numberRows>this.getOption('minRow')){this.getRowByIndex(index).remove();if(this.getOption('minRow')===numberRows-1){this.disableRemoveRowAction();}
if(this.getOption('maxRow')>numberRows-1){this.enableAddRowAction();}}else{console.warn('Can\'t remove row. The list must have least '+this.getOption('minRow')+' row(s)');}
return this;}
List.prototype.getMaxRowIndex=function(){var maxRowIndex=0;this.getRows().each(function(){var rowIndex=$(this).attr('data-index');if(Number(rowIndex)>maxRowIndex){maxRowIndex=Number(rowIndex);}});return maxRowIndex;}
List.prototype.getRows=function(){return this.getControl().getNode().find('li');}
List.prototype.createRowAction=function(index){var inst=this;var name=this.getName();var $wrapper=$('<div/>',{id:name+'_actwrp_'+index,'class':'act-wrapper'});var $add=$('<input/>',{id:name+'_actadd_'+index,type:'button','class':'act add',value:'+',title:'Thêm dòng'}).on('click',function(){inst.addRow(inst.getRowByIndex(index));});var $sub=$('<input/>',{id:name+'_actrm_'+index,type:'button','class':'act remove',value:'-',title:'Xóa dòng này'}).on('click',function(){inst.removeRow(index);});return $wrapper.append($add,$sub);}
List.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add List element to DrawingBoard');return;}
var list=new List(true,this.getOptionsCopy());this.getDrawingBoard().getFieldset().addComponent(list);list.inactiveOthers();return this;}
List.prototype.cloneToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t clone List element to DrawingBoard');return;}
var list=new List(true,this.getOptionsClone());this.getDrawingBoard().getFieldset().addComponent(list);list.inactiveOthers();return this;}
List.prototype.getPropertySetters=function(){if(!this.hasDrawingBoard()){return[];}
var options=Nth.FormBuilder.Element.prototype.getPropertySetters.call(this);var propertySetter=new Nth.FormBuilder.PropertySetter(this);options.push.apply(options,[propertySetter.getRequiredSetter(),propertySetter.getMarksMandatorySetter(),propertySetter.getValidNameSetter(),propertySetter.getColumnReferSetter(),propertySetter.getMaxRowSetter(),propertySetter.getMinRowSetter(),propertySetter.getElementIdSetter(),propertySetter.getElementClassSetter(),propertySetter.getElementStyleSetter(),propertySetter.getElementTitleSetter(),propertySetter.getBindIndexSetter()]);return options;}
List.prototype.toJson=function(){var json=Nth.FormBuilder.Element.prototype.toJson.call(this);if(this.isEmpty()){delete json.options.value;}else{json.options.value=this.getValue();}
json.options.controlAttributes=this.getControl().getAttributes();return json;}
List.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null,parentComponent:null},options);var fb=Nth.FormBuilder.__getInstance();var $xml=fb.getXmlObject(xml,'component');var name=$xml.attr('name');$xml.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});return new List(name,options);}
Nth.FormBuilder.Element.List=List;return List;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/FormBuilder/Element'],factory);}else{factory(Nth);}})(function(Nth){var Radio=function(name,options){Nth.FormBuilder.Element.call(this,name,$.extend(true,{idPrefix:'_radio_',creatorIconClass:'icon radio',creatorLabel:'Radio',controlAttributes:{type:'radio'}},options));name=this.getName();var rc=new Nth.ReflectionClass(this.__CLASS__);var controlAttributes=this.getOption('controlAttributes',{});var controlId=this.getConfigParam('controlIdPrefix')+name;var $control=$('<input/>',$.extend({},{id:controlId,name:name},controlAttributes));$control.addClass(this.getConfigParam('elementClass')+' simple');this.control=new Nth.Dom.Node($control);var labelAttributes=this.getOption('labelAttributes',{});if(labelAttributes['for']===undefined){this.getLabel().getNode().attr('for',controlId);}
this.getWrapper().getNode().addClass(rc.getShortName().toLowerCase()).prepend($control);if(typeof $().iCheck==='function'){$control.iCheck(this.getiCheckOptions());$control.on('ifChanged',function(){$(this).trigger('change');});}
if(this.existsOption('value')){this.setValue(this.getOption('value'));}
if(this.getOption('checked')){this.check();}
if(this.getOption('disabled')){this.disable();}}
Radio.prototype=Object.create(Nth.FormBuilder.Element.prototype);Radio.prototype.constructor=Radio;Radio.prototype.__CLASS__='Nth.FormBuilder.Element.Radio';Radio.prototype.getValue=function(){return this.getControl().getNode().val();}
Radio.prototype.getData=function(){var item={name:this.getName(),value:this.getValue(),columnRefer:this.getOption('columnRefer'),checked:this.checked()}
this.getWrapper().getNode().trigger('nth.fb.export-data',[item,this]);return item;}
Radio.prototype.setValue=function(value){this.getControl().getNode().val(value);this.getWrapper().getNode().trigger('nth.fb.set-value',[value,this]);return this;}
Radio.prototype.enable=function(){this.getControl().getNode().removeAttr('disabled');return Nth.FormBuilder.Element.prototype.enable.call(this);}
Radio.prototype.disable=function(){this.getControl().getNode().attr('disabled','disabled');return Nth.FormBuilder.Element.prototype.disable.call(this);}
Radio.prototype.isEmpty=function(){return!this.checked();}
Radio.prototype.checked=function(){return this.getControl().getNode().prop('checked');}
Radio.prototype.check=function(){var $control=this.getControl().getNode();if($control.data('iCheck')){$control.iCheck('check');}else{$control.prop('checked',true).attr('checked',true);}
return this;}
Radio.prototype.uncheck=function(){var $control=this.getControl().getNode();if($control.data('iCheck')){$control.iCheck('uncheck');}else{$control.prop('checked',false).removeAttr('checked');}
return this;}
Radio.prototype.getiCheckOptions=function(){return this.getOption('iCheckOptions',{checkboxClass:'icheckbox_minimal',radioClass:'iradio_minimal'});}
Radio.prototype.reset=function(){if(this.getOption('checked')){this.check();}else{this.uncheck();}
return this;}
Radio.prototype.getControl=function(){return this.control;}
Radio.prototype.focus=function(){Nth.FormBuilder.Element.prototype.focus.call(this);this.getControl().getNode().focus();return this;}
Radio.prototype.blur=function(){Nth.FormBuilder.Element.prototype.blur.call(this);this.getControl().getNode().blur();return this;}
Radio.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add Radio element to DrawingBoard');return;}
var radio=new Radio(true,this.getOptionsCopy());this.getDrawingBoard().getFieldset().addComponent(radio);radio.inactiveOthers();return this;}
Radio.prototype.cloneToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t clone Radio element to DrawingBoard');return;}
var radio=new Radio(true,this.getOptionsClone());this.getDrawingBoard().getFieldset().addComponent(radio);radio.inactiveOthers();return this;}
Radio.prototype.getPropertySetters=function(){if(!this.hasDrawingBoard()){return[];}
var options=Nth.FormBuilder.Element.prototype.getPropertySetters.call(this);var propertySetter=new Nth.FormBuilder.PropertySetter(this);options.push.apply(options,[propertySetter.getValueSetter(),propertySetter.getCheckedSetter(),propertySetter.getRequiredSetter(),propertySetter.getMarksMandatorySetter(),propertySetter.getValidNameSetter(),propertySetter.getColumnReferSetter(),propertySetter.getElementIdSetter(),propertySetter.getElementNameSetter(),propertySetter.getElementClassSetter(),propertySetter.getElementStyleSetter(),propertySetter.getElementTitleSetter(),propertySetter.getBindNameSetter(),propertySetter.getBindIndexSetter()]);return options;}
Radio.prototype.toJson=function(){var json=Nth.FormBuilder.Element.prototype.toJson.call(this);var controlAttributes=this.getControl().getAttributes();if(this.checked()){controlAttributes.checked=true;}else{delete controlAttributes.checked;}
json.options.controlAttributes=controlAttributes;return json;}
Radio.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null,parentComponent:null},options);var fb=Nth.FormBuilder.__getInstance();var $xml=fb.getXmlObject(xml,'component');var name=$xml.attr('name');$xml.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});return new Radio(name,options);}
Nth.FormBuilder.Element.Radio=Radio;return Radio;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Helper/Json','Nth/FormBuilder/Element'],factory);}else{factory(Nth);}})(function(Nth){var Select=function(name,options){Nth.FormBuilder.Element.call(this,name,$.extend(true,{idPrefix:'_select_',creatorIconClass:'icon select',creatorLabel:'Select',waitingText:'Loading..',emptyText:'-- Chưa chọn --',selectItemData:[['','-- Nothing selected --']]},options));name=this.getName();var controlId=this.getConfigParam('controlIdPrefix')+name;var rc=new Nth.ReflectionClass(this.__CLASS__);var $control=$('<select/>',$.extend({},{id:controlId,name:name,'class':this.getConfigParam('elementClass')},this.getOption('controlAttributes')));this.control=new Nth.Dom.Node($control);var labelAttributes=this.getOption('labelAttributes',{});if(labelAttributes['for']===undefined){this.getLabel().getNode().attr('for',controlId);}
this.getWrapper().getNode().addClass(rc.getShortName().toLowerCase()).append($control);if(this.getOption('autoInit',true)){this.init();}
if(this.getOption('disabled')){this.disable();}}
Select.prototype=Object.create(Nth.FormBuilder.Element.prototype);Select.prototype.constructor=Select;Select.prototype.__CLASS__='Nth.FormBuilder.Element.Select';Select.prototype.init=function(){this.startBinding();if(!this.isDependent()){this.createSelectItems();}
this.handleBindByEvent();return this;}
Select.prototype.getControl=function(){return this.control;}
Select.prototype.setValue=function(value){this.setOption('value',value);this.getControl().getNode().val(value);this.getWrapper().getNode().trigger('nth.fb.set-value',[value,this]);return this;}
Select.prototype.getValue=function(){return this.getControl().getNode().val();}
Select.prototype.getData=function(){var item={name:this.getName(),value:this.getValue(),columnRefer:this.getOption('columnRefer'),selectedText:this.getSelectedText()}
this.getWrapper().getNode().trigger('nth.fb.export-data',[item,this]);return item;}
Select.prototype.getSelectedText=function(){return this.getControl().getNode().find('option:selected').text();}
Select.prototype.enable=function(){this.getControl().getNode().removeAttr('disabled');return Nth.FormBuilder.Element.prototype.enable.call(this);}
Select.prototype.disable=function(){this.getControl().getNode().attr('disabled','disabled');return Nth.FormBuilder.Element.prototype.disable.call(this);}
Select.prototype.focus=function(){Nth.FormBuilder.Element.prototype.focus.call(this);this.getControl().getNode().focus();return this;}
Select.prototype.blur=function(){Nth.FormBuilder.Element.prototype.blur.call(this);this.getControl().getNode().blur();return this;}
Select.prototype.handleBindByEvent=function(){var inst=this;var deps=this.getDependentElements();var bindConstraint=this.getOption('bindConstraint');if(deps.length&&bindConstraint===1){deps=[deps[deps.length-1]];}
$.each(deps,function(i,element){var evtName='nth.fb.bound.'+inst.getName();element.getWrapper().getNode().off(evtName).on(evtName,function(){inst.createSelectItems();});});var evtName='change.nth.fb.'+inst.getName();this.getControl().getNode().off(evtName).on(evtName,function(){inst.bound([inst,$(this).find('option').html()]);});}
Select.prototype.startBinding=function(){var $waitingOption=$('<option/>',{value:''}).html(this.getOption('waitingText'));this.getControl().getNode().html($waitingOption);return this;}
Select.prototype.ajaxLoadSelectItems=function(){var fb=Nth.FormBuilder.__getInstance();var url=this.getOption('selectItemUrl');if(!$.trim(url).match(/^https?:\/\//)){url=this.getConfigParam('siteRoot')+url;}
fb.getAsyncTaskManager().add(this,function(){this.startBinding();var inst=this;var data=$.extend({},{'selected':this.getValue()},this.getOption('selectItemRequestData'));var bindConstraint=this.getOption('bindConstraint');var dependentBindData=this.getDependentBindData();var jsonHelper=new Nth.Helper.Json(dependentBindData);if(bindConstraint===1&&!$.isEmptyObject(dependentBindData)&&jsonHelper.existsEmptyElement()){var option='<option value="">'+this.getOption('emptyText')+'</option>';this.getControl().getNode().html(option);this.bound([this,option]);fb.getAsyncTaskManager().done(url);return this;}
data=$.extend({},data,dependentBindData);$.ajax({type:'POST',url:url,data:data,success:function(option){inst.getControl().getNode().html(option);if(inst.existsOption('value')){inst.setValue(inst.getOption('value'));}else if(inst.hasDefaultValue()){inst.setValue(inst.getDefaultValue());}
inst.bound([inst,option]);fb.getAsyncTaskManager().done(url);},error:function(e){fb.getAsyncTaskManager().done(e);}});},[],url,this.getOption('debug'));return this;}
Select.prototype.createSelectItems=function(){var selectItemData=this.getOption('selectItemData');if(this.getOption('selectItemUrl')){this.ajaxLoadSelectItems();}else if(selectItemData){var inst=this;var option='';if(typeof selectItemData==='string'){option=selectItemData;}else if($.isArray(selectItemData)){$.each(selectItemData,function(i,item){var value=item[0];var name=item[1];var selected=item[2]?' selected':'';option+='<option value="'+value+'"'+selected+'>'+name+'</option>';});}
this.getControl().getNode().html(option);if(this.existsOption('value')){this.setValue(this.getOption('value'));}else if(this.hasDefaultValue()){this.setValue(this.getDefaultValue());}
this.bound([inst,option]);}
return this;}
Select.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add Select element to DrawingBoard');return;}
var select=new Select(true,this.getOptionsCopy());this.getDrawingBoard().getFieldset().addComponent(select);select.inactiveOthers();return this;}
Select.prototype.cloneToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t clone Select element to DrawingBoard');return;}
var select=new Select(true,this.getOptionsClone());this.getDrawingBoard().getFieldset().addComponent(select);select.inactiveOthers();return this;}
Select.prototype.getPropertySetters=function(){if(!this.hasDrawingBoard()){return[];}
var options=Nth.FormBuilder.Element.prototype.getPropertySetters.call(this);var propertySetter=new Nth.FormBuilder.PropertySetter(this);options.push.apply(options,[propertySetter.getDefaultValueSetter(),propertySetter.getRequiredSetter(),propertySetter.getMarksMandatorySetter(),propertySetter.getValidNameSetter(),propertySetter.getBindNameSetter(),propertySetter.getColumnReferSetter(),propertySetter.getSelectItemDataSetter(),propertySetter.getSelectItemUrlSetter(),propertySetter.getBindBySetter(),propertySetter.getBindConstraintSetter(),propertySetter.getValidElementRequiredSetter(),propertySetter.getBindIndexSetter(),propertySetter.getElementIdSetter(),propertySetter.getElementNameSetter(),propertySetter.getElementClassSetter(),propertySetter.getElementStyleSetter(),propertySetter.getDisabledSetter(),propertySetter.getElementTitleSetter()]);return options;}
Select.prototype.isValid=function(options){if(typeof options==='function'){options={done:options}}
options=new Nth.Options($.extend({},{start:function(){},done:function(){}},options));var inst=this;var done=function(){options.getOption('done').call(inst);return inst;}
this.hideMessage().setMessage(null);if(false===options.getOption('start').call(this)){return done();}
var value=this.getValue();var strHelper=new Nth.Helper.String();var validator=Nth.Validator.__getInstance();var validName=this.getValidName();if(this.getOption('required')&&this.isEmpty()){var requiredText=validator.getOption('reselectText');strHelper.setString(requiredText);this.setMessage(strHelper.sprintf(validName));return done();}
$.each(this.getValidators(),function(i,validator){if(!validator.isValid(value)){inst.setMessage(validator.getMessage());return false;}});return done();}
Select.prototype.toJson=function(){var json=Nth.FormBuilder.Element.prototype.toJson.call(this);if(this.isEmpty()&&this.hasDefaultValue()){delete json.options.value;}else{json.options.value=this.getValue();delete json.options.defaultValue;}
json.options.controlAttributes=this.getControl().getAttributes();return json;}
Select.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null,parentComponent:null},options);var fb=Nth.FormBuilder.__getInstance();var $xml=fb.getXmlObject(xml,'component');var name=$xml.attr('name');$xml.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});return new Select(name,options);}
Nth.FormBuilder.Element.Select=Select;return Select;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/FormBuilder/Element','autogrow'],factory);}else{factory(Nth);}})(function(Nth){var Table=function(name,options){Nth.FormBuilder.Element.call(this,name,$.extend(true,{idPrefix:'_table_',creatorIconClass:'icon table',creatorLabel:'Table',columnHeaders:[['Column 1','auto'],['Column 2','auto']],minRow:3,maxRow:10},options));var rc=new Nth.ReflectionClass(this.__CLASS__);this.control=this.createControl();this.createColumnHeaders();var $wrapper=$('<div/>',{'class':'table-responsive'});this.getWrapper().getNode().addClass(rc.getShortName().toLowerCase()).append($wrapper.append(this.getControl().getNode()));if(this.existsOption('value')){this.setValue(this.getOption('value'));}else if(this.hasDefaultValue()){this.setValue(this.getDefaultValue());}
if(this.getOption('disabled')){this.disable();}}
Table.prototype=Object.create(Nth.FormBuilder.Element.prototype);Table.prototype.constructor=Table;Table.prototype.__CLASS__='Nth.FormBuilder.Element.Table';Table.prototype.enable=function(){this.getControl().getNode().find('.'+this.getConfigParam('elementClass')).removeAttr('disabled');return Nth.FormBuilder.Element.prototype.enable.call(this);}
Table.prototype.disable=function(){this.getControl().getNode().find('.'+this.getConfigParam('elementClass')).attr('disabled','disabled');return Nth.FormBuilder.Element.prototype.disable.call(this);}
Table.prototype.getControl=function(){return this.control;}
Table.prototype.isEmpty=function(){return!this.getValue().length;}
Table.prototype.getDefaultValue=function(){var defaultValue=Nth.FormBuilder.Element.prototype.getDefaultValue.call(this);return $.isArray(defaultValue)?defaultValue:[];}
Table.prototype.setDefaultValue=function(defaultValue){if(!$.isArray(defaultValue)){console.warn('Default value must be an two demension array');return this;}
return this.getOption('defaultValue',defaultValue);}
Table.prototype.getValue=function(){var value=[];var inst=this;this.getRows().each(function(){var arr=[];$(this).find('.'+inst.getConfigParam('elementClass')).each(function(){arr.push($(this).val());});var filtered=arr.filter(function(v){return v!=='';});if(filtered.length){value.push(arr);}});return value;}
Table.prototype.getData=function(){var item={name:this.getName(),value:this.getValue(),columnRefer:this.getOption('columnRefer')}
this.getWrapper().getNode().trigger('nth.fb.export-data',[item,this]);return item;}
Table.prototype.setValue=function(value){if(!$.isArray(value)){console.warn('Value must be an two demension array');return this;}
this.cleanValue();if(!value.length){return this;}
var inst=this;var numberRows=this.getNumberRows();if(value.length>numberRows){var rowIncreased=value.length-numberRows;if(value.length>this.getOption('maxRow')){console.warn('The length of value greater than the number of rows accept');rowIncreased=this.getOption('maxRow')-numberRows;}
for(var i=0;i<rowIncreased;i++){this.addRow();}}
$.each(value,function(i,arr){var $row=inst.getRowByIndex(i+1);$.each(arr,function(j,_value){$row.find('.'+inst.getConfigParam('elementClass')).eq(j).val(_value).autogrow('resize');});});this.getWrapper().getNode().trigger('nth.fb.set-value',[value,this]);return this;}
Table.prototype.setMinRow=function(minRow){var value=this.getValue();this.setOption('minRow',minRow);this.createRowBody();this.setValue(value);return this;}
Table.prototype.setMaxRow=function(maxRow){var value=this.getValue();this.setOption('maxRow',maxRow);this.createRowBody();this.setValue(value);return this;}
Table.prototype.createControl=function(){var name=this.getName();var $ul=$('<table/>',$.extend(true,{id:this.getConfigParam('controlIdPrefix')+name},this.getOption('controlAttributes')));return new Nth.Dom.Node($ul);}
Table.prototype.createColumnHeaders=function(){this.getControl().getNode().html(null);var columnHeaders=this.getOption('columnHeaders');var $colgroup=$('<colgroup/>');var $thead=$('<thead/>');var $tr=$('<tr/>');$.each(columnHeaders,function(i,option){var $th=$('<th/>').html(option[0]);if(option[1]){var $col=$('<col/>').attr('width',option[1]);$colgroup.append($col);}
$tr.append($th);})
var $act=$('<th/>',{'class':'act'}).html('&nbsp;');this.getControl().getNode().html(null).append($colgroup,$thead.html($tr.append($act)));this.createRowBody();return this;}
Table.prototype.createRowBody=function(){this.getControl().getNode().find('tbody').remove();this.getControl().getNode().append($('<tbody/>'));var minRow=this.getOption('minRow',3);while(minRow>0){this.addRow();minRow--;}
return this;}
Table.prototype.cleanValue=function(){this.getRows().find('.'+this.getConfigParam('elementClass')).val(null);return this;}
Table.prototype.getRowByIndex=function(index){return this.getControl().getNode().find('tbody #'+this.getName()+'_tr_'+index);}
Table.prototype.addRow=function($relative){var index=this.getMaxRowIndex()+1;var numberRows=this.getNumberRows();if(this.getOption('maxRow')<numberRows){console.warn('The number of rows added exceed the max row setting');return this;}
var $row=this.createRow(index);if($relative){$relative.after($row);}else{this.getControl().getNode().find('tbody').append($row);}
if(this.getOption('maxRow')===numberRows+1){this.disableAddRowAction();}
if(numberRows+1>this.getOption('minRow')){this.enableRemoveRowAction();}else{this.disableRemoveRowAction();}
return this;}
Table.prototype.createRow=function(index){var inst=this;var name=this.getName();var columnHeaders=this.getOption('columnHeaders');var $tr=$('<tr/>',{id:name+'_tr_'+index,'data-index':index});$.each(columnHeaders,function(n){var $td=$('<td/>');var $textarea=$('<textarea/>',{id:name+'_cell_'+index+n,name:name+'_cell_'+index+n,'class':inst.getConfigParam('elementClass')}).autogrow({context:inst.getControl().getNode(),animate:false,fixMinHeight:true});$tr.append($td.append($textarea));});var $rowAction=this.createRowAction(index);return $tr.append($('<td/>').append($rowAction));}
Table.prototype.createRowAction=function(index){var inst=this;var name=this.getName();var $wrapper=$('<div/>',{id:name+'_actwrp_'+index,'class':'act-wrapper'});var $add=$('<input/>',{id:name+'_actadd_'+index,type:'button','class':'act add',value:'+',title:'Thêm dòng'}).on('click',function(){inst.addRow(inst.getRowByIndex(index));});var $sub=$('<input/>',{id:name+'_actrm_'+index,type:'button','class':'act remove',value:'-',title:'Xóa dòng này'}).on('click',function(){inst.removeRow(index);});return $wrapper.append($add,$sub);}
Table.prototype.disableAddRowAction=function(){this.getRows().find('.act.add').attr('disabled',true).prop('disabled',true);}
Table.prototype.enableAddRowAction=function(){this.getRows().find('.act.add').removeAttr('disabled').prop('disabled',false);}
Table.prototype.disableRemoveRowAction=function(){this.getRows().find('.act.remove').attr('disabled',true).prop('disabled',true);}
Table.prototype.enableRemoveRowAction=function(){this.getRows().find('.act.remove').removeAttr('disabled').prop('disabled',false);}
Table.prototype.getNumberRows=function(){return this.getRows().length;}
Table.prototype.getNumberColumns=function(){return this.getOption('columnHeaders',[]).length;}
Table.prototype.getMaxRowIndex=function(){var maxRowIndex=0;this.getRows().each(function(){var rowIndex=$(this).attr('data-index');if(Number(rowIndex)>maxRowIndex){maxRowIndex=Number(rowIndex);}});return maxRowIndex;}
Table.prototype.getRows=function(){return this.getControl().getNode().find('tbody tr');}
Table.prototype.removeRow=function(index){var numberRows=this.getNumberRows();if(numberRows>this.getOption('minRow')){this.getRowByIndex(index).remove();if(this.getOption('minRow')===numberRows-1){this.disableRemoveRowAction();}
if(this.getOption('maxRow')>numberRows-1){this.enableAddRowAction();}}else{console.warn('Can\'t remove row. The list must have least '+this.getOption('minRow')+' row(s)');}
return this;}
Table.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add Table element to DrawingBoard');return;}
var table=new Table(true,this.getOptionsCopy());this.getDrawingBoard().getFieldset().addComponent(table);table.inactiveOthers();return this;}
Table.prototype.cloneToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t clone Table element to DrawingBoard');return;}
var table=new Table(true,this.getOptionsClone());this.getDrawingBoard().getFieldset().addComponent(table);table.inactiveOthers();return this;}
Table.prototype.getPropertySetters=function(){if(!this.hasDrawingBoard()){return[];}
var options=Nth.FormBuilder.Element.prototype.getPropertySetters.call(this);var propertySetter=new Nth.FormBuilder.PropertySetter(this);options.push.apply(options,[propertySetter.getRequiredSetter(),propertySetter.getMarksMandatorySetter(),propertySetter.getValidNameSetter(),propertySetter.getColumnReferSetter(),propertySetter.getMaxRowSetter(),propertySetter.getMinRowSetter(),propertySetter.getColumnHeadersSetter(),propertySetter.getElementIdSetter(),propertySetter.getElementClassSetter(),propertySetter.getElementStyleSetter(),propertySetter.getElementTitleSetter(),propertySetter.getBindIndexSetter()]);return options;}
Table.prototype.toJson=function(){var json=Nth.FormBuilder.Element.prototype.toJson.call(this);if(this.isEmpty()){delete json.options.value;}else{json.options.value=this.getValue();}
json.options.controlAttributes=this.getControl().getAttributes();return json;}
Table.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null,parentComponent:null},options);var fb=Nth.FormBuilder.__getInstance();var $xml=fb.getXmlObject(xml,'component');var name=$xml.attr('name');$xml.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});return new Table(name,options);}
Nth.FormBuilder.Element.Table=Table;return Table;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/Alert','Nth/Helper/Number','Nth/Filter/StringToUpper','Nth/Validator/Number','Nth/Validator/Cmnd','Nth/Validator/PhoneNumber','Nth/Validator/EmailAddress','Nth/Validator/Cdpwd','Nth/Validator/Unit','Nth/FormBuilder/Element'],factory);}else{factory(Nth);}})(function(Nth){var Text=function(name,options){Nth.FormBuilder.Element.call(this,name,$.extend(true,{idPrefix:'_text_',creatorIconClass:'icon text',creatorLabel:'Text',controlAttributes:{type:'text'}},options));name=this.getName();var rc=new Nth.ReflectionClass(this.__CLASS__);var controlAttributes=this.getOption('controlAttributes',{});var controlId=this.getConfigParam('controlIdPrefix')+name;var attrs=$.extend({},{id:controlId,name:name,'class':this.getConfigParam('elementClass')},controlAttributes);var autocomplete=attrs['autocomplete'];autocomplete&&delete attrs['autocomplete'];var $control=$('<input/>',attrs);autocomplete&&$control.attr('autocomplete',autocomplete);this.control=new Nth.Dom.Node($control);var labelAttributes=this.getOption('labelAttributes',{});if(labelAttributes['for']===undefined){this.getLabel().getNode().attr('for',controlId);}
this.getWrapper().getNode().addClass(rc.getShortName().toLowerCase()).append($control);if(this.existsOption('value')){this.setValue(this.getOption('value'));}else if(this.hasDefaultValue()){this.setValue(this.getDefaultValue());}
if(this.getOption('autoInit',true)){this.init();}
if(this.getOption('disabled')){this.disable();}}
Text.prototype=Object.create(Nth.FormBuilder.Element.prototype);Text.prototype.constructor=Text;Text.prototype.__CLASS__='Nth.FormBuilder.Element.Text';Text.prototype.init=function(){this.initFilters().hookFilters();this.initValidators().hookValidators();this.getWrapper().getNode().trigger('nth.fb.bound',[this]);return this;}
Text.prototype.getSupportFilters=function(){return{removable:true,filters:[{filter:new Nth.Filter.StringToUpper()}]}}
Text.prototype.enable=function(){this.getControl().getNode().removeAttr('disabled');return Nth.FormBuilder.Element.prototype.enable.call(this);}
Text.prototype.disable=function(){this.getControl().getNode().attr('disabled','disabled');return Nth.FormBuilder.Element.prototype.disable.call(this);}
Text.prototype.getControl=function(){return this.control;}
Text.prototype.setValue=function(value){this.getControl().getNode().val(value);this.getWrapper().getNode().trigger('nth.fb.set-value',[value,this]);return this;}
Text.prototype.getValue=function(){return this.getControl().getNode().val();}
Text.prototype.getData=function(){var item={name:this.getName(),value:this.getValue(),columnRefer:this.getOption('columnRefer')}
this.getWrapper().getNode().trigger('nth.fb.export-data',[item,this]);return item;}
Text.prototype.focus=function(){Nth.FormBuilder.Element.prototype.focus.call(this);this.getControl().getNode().focus();return this;}
Text.prototype.blur=function(){Nth.FormBuilder.Element.prototype.blur.call(this);this.getControl().getNode().blur();return this;}
Text.prototype.enable=function(){this.getWrapper().getNode().removeClass('disabled');this.getControl().getNode().removeAttr('disabled');return this;}
Text.prototype.disable=function(){this.getWrapper().getNode().addClass('disabled');this.getControl().getNode().attr('disabled','disabled');return this;}
Text.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add Text element to DrawingBoard');return;}
var text=new Text(true,this.getOptionsCopy());this.getDrawingBoard().getFieldset().addComponent(text);text.inactiveOthers();return this;}
Text.prototype.cloneToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t clone Text element to DrawingBoard');return;}
var text=new Text(true,this.getOptionsClone());this.getDrawingBoard().getFieldset().addComponent(text);text.inactiveOthers();return this;}
Text.prototype.getSupportValidators=function(){return{removable:true,validators:[{validator:new Nth.Validator.Cmnd()},{validator:new Nth.Validator.EmailAddress()},{validator:new Nth.Validator.Number()},{validator:new Nth.Validator.PhoneNumber()},{validator:new Nth.Validator.Unit()}]}}
Text.prototype.getPropertySetters=function(){if(!this.hasDrawingBoard()){return[];}
var options=Nth.FormBuilder.Element.prototype.getPropertySetters.call(this);var propertySetter=new Nth.FormBuilder.PropertySetter(this);options.push.apply(options,[propertySetter.getTypeSetter(),propertySetter.getDefaultValueSetter(),propertySetter.getRequiredSetter(),propertySetter.getMarksMandatorySetter(),propertySetter.getFiltersSetter(),propertySetter.getValidatorsSetter(),propertySetter.getValidNameSetter(),propertySetter.getColumnReferSetter(),propertySetter.getElementIdSetter(),propertySetter.getElementNameSetter(),propertySetter.getElementClassSetter(),propertySetter.getElementStyleSetter(),propertySetter.getDisabledSetter(),propertySetter.getReadonlySetter(),propertySetter.getAutocompleteSetter(),propertySetter.getPlaceholderSetter(),propertySetter.getElementTitleSetter(),propertySetter.getBindBySetter(),propertySetter.getBindNameSetter(),propertySetter.getAuthElementSetter(),propertySetter.getValidElementRequiredSetter(),propertySetter.getBindIndexSetter()]);return options;}
Text.prototype.toJson=function(){var json=Nth.FormBuilder.Element.prototype.toJson.call(this);var controlAttributes=this.getControl().getAttributes();if(this.isEmpty()||this.hasDefaultValue()){delete controlAttributes.value;}else{controlAttributes.value=this.getValue();delete json.options.defaultValue;}
json.options.controlAttributes=controlAttributes;return json;}
Text.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null,parentComponent:null},options);var fb=Nth.FormBuilder.__getInstance();var $xml=fb.getXmlObject(xml,'component');var name=$xml.attr('name');$xml.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});return new Text(name,options);}
Nth.FormBuilder.Element.Text=Text;return Text;});;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['Nth/Nth','Nth/FormBuilder/Element'],factory);}else{factory(Nth);}})(function(Nth){var Textarea=function(name,options){Nth.FormBuilder.Element.call(this,name,$.extend(true,{idPrefix:'_textarea_',creatorIconClass:'icon textarea',creatorLabel:'Textarea'},options));name=this.getName();var rc=new Nth.ReflectionClass(this.__CLASS__);var controlAttributes=this.getOption('controlAttributes',{});var controlId=this.getConfigParam('controlIdPrefix')+name;var $control=$('<textarea/>',$.extend({},{id:controlId,name:name,'class':this.getConfigParam('elementClass')},controlAttributes));this.control=new Nth.Dom.Node($control);var labelAttributes=this.getOption('labelAttributes',{});if(labelAttributes['for']===undefined){this.getLabel().getNode().attr('for',controlId);}
this.getWrapper().getNode().addClass(rc.getShortName().toLowerCase()).append($control);if(this.existsOption('value')){this.setValue(this.getOption('value'));}else if(this.hasDefaultValue()){this.setValue(this.getDefaultValue());}
this.getWrapper().getNode().trigger('nth.fb.bound',[this]);if(this.getOption('autoInit',true)){this.init();}
if(this.getOption('disabled')){this.disable();}}
Textarea.prototype=Object.create(Nth.FormBuilder.Element.prototype);Textarea.prototype.constructor=Textarea;Textarea.prototype.__CLASS__='Nth.FormBuilder.Element.Textarea';Textarea.prototype.init=function(){this.initFilters().hookFilters();this.initValidators().hookValidators();this.getWrapper().getNode().trigger('nth.fb.bound',[this]);return this;}
Textarea.prototype.getSupportFilters=function(){return{removable:true,filters:[{filter:new Nth.Filter.StringToUpper()}]}}
Textarea.prototype.enable=function(){this.getControl().getNode().removeAttr('disabled');return Nth.FormBuilder.Element.prototype.enable.call(this);}
Textarea.prototype.disable=function(){this.getControl().getNode().attr('disabled','disabled');return Nth.FormBuilder.Element.prototype.disable.call(this);}
Textarea.prototype.getControl=function(){return this.control;}
Textarea.prototype.setValue=function(value){this.getControl().getNode().val(value);this.getWrapper().getNode().trigger('nth.fb.set-value',[value,this]);return this;}
Textarea.prototype.getValue=function(){return this.getControl().getNode().val();}
Textarea.prototype.getData=function(){var item={name:this.getName(),value:this.getValue(),columnRefer:this.getOption('columnRefer')}
this.getWrapper().getNode().trigger('nth.fb.export-data',[item,this]);return item;}
Textarea.prototype.focus=function(){Nth.FormBuilder.Element.prototype.focus.call(this);this.getControl().getNode().focus();return this;}
Textarea.prototype.blur=function(){Nth.FormBuilder.Element.prototype.blur.call(this);this.getControl().getNode().blur();return this;}
Textarea.prototype.enable=function(){this.getWrapper().getNode().removeClass('disabled');this.getControl().getNode().removeAttr('disabled');return this;}
Textarea.prototype.disable=function(){this.getWrapper().getNode().addClass('disabled');this.getControl().getNode().attr('disabled','disabled');return this;}
Textarea.prototype.copyToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t add Textarea element to DrawingBoard');return;}
var textarea=new Textarea(true,this.getOptionsCopy());this.getDrawingBoard().getFieldset().addComponent(textarea);textarea.inactiveOthers();return this;}
Textarea.prototype.cloneToDrawingBoard=function(){if(!this.hasDrawingBoard()){console.warn('Can\'t clone Textarea element to DrawingBoard');return;}
var textarea=new Textarea(true,this.getOptionsClone());this.getDrawingBoard().getFieldset().addComponent(textarea);textarea.inactiveOthers();return this;}
Textarea.prototype.getSupportValidators=function(){return{removable:true,validators:[{validator:new Nth.Validator.Cmnd()},{validator:new Nth.Validator.EmailAddress()},{validator:new Nth.Validator.Number()},{validator:new Nth.Validator.PhoneNumber()},{validator:new Nth.Validator.Unit()}]}}
Textarea.prototype.getPropertySetters=function(){if(!this.hasDrawingBoard()){return[];}
var options=Nth.FormBuilder.Element.prototype.getPropertySetters.call(this);var propertySetter=new Nth.FormBuilder.PropertySetter(this);options.push.apply(options,[propertySetter.getDefaultValueSetter(),propertySetter.getRequiredSetter(),propertySetter.getMarksMandatorySetter(),propertySetter.getFiltersSetter(),propertySetter.getValidatorsSetter(),propertySetter.getValidNameSetter(),propertySetter.getColumnReferSetter(),propertySetter.getElementIdSetter(),propertySetter.getElementNameSetter(),propertySetter.getElementClassSetter(),propertySetter.getElementStyleSetter(),propertySetter.getDisabledSetter(),propertySetter.getReadonlySetter(),propertySetter.getPlaceholderSetter(),propertySetter.getElementTitleSetter(),propertySetter.getBindBySetter(),propertySetter.getBindNameSetter(),propertySetter.getValidElementRequiredSetter(),propertySetter.getBindIndexSetter()]);return options;}
Textarea.prototype.toJson=function(){var json=Nth.FormBuilder.Element.prototype.toJson.call(this);if(this.isEmpty()||this.hasDefaultValue()){delete json.options.value;}else{json.options.value=this.getValue();delete json.options.defaultValue;}
json.options.controlAttributes=this.getControl().getAttributes();return json;}
Textarea.__fromXml=function(xml,options){options=$.extend({},{drawingBoard:null,toolPalette:null,parentComponent:null},options);var fb=Nth.FormBuilder.__getInstance();var $xml=fb.getXmlObject(xml,'component');var name=$xml.attr('name');$xml.children('options').children('option').each(function(){options[$(this).attr('name')]=fb.decodeXmlData($(this).text());});return new Textarea(name,options);}
Nth.FormBuilder.Element.Textarea=Textarea;return Textarea;});